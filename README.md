# 巨大娘计算器 (ST-GTS-Calculator)

> 酒馆助手脚本 - 用于「巨大娘」角色扮演的辅助工具

## ✨ 功能特性

- 🔢 **身体数据计算** - 根据身高自动计算身体各部位尺寸（足长、手掌、胸部等）
- 📐 **相对尺寸参照** - 计算参考物（人、建筑、天体）在巨大娘眼中的相对大小
- 🚫 **互动限制检查** - 判断哪些互动在物理上合理，并提供替代方案
- 💥 **损害计算系统** - 计算巨大娘行动造成的破坏（伤亡、建筑损毁等）
- 💉 **提示词自动注入** - 将计算数据自动注入到 LLM 提示词中
- 📜 **身高历史记录** - 记录角色身高变化历程
- 🌍 **世界观模板系统** - 支持不同设定下的变化机制
- 🔌 **内置 MVU 集成** - 零配置开箱即用
- 🎨 **现代化 UI** - 优雅简约的卡片式设计

## 📦 安装教程

### 第一步：安装酒馆助手

如果你还没有安装酒馆助手，请先参考官方文档进行安装：

👉 [酒馆助手安装教程](https://n0vi028.github.io/JS-Slash-Runner-Doc/guide/%E5%85%B3%E4%BA%8E%E9%85%92%E9%A6%86%E5%8A%A9%E6%89%8B/%E5%AE%89%E8%A3%85%E4%B8%8E%E6%9B%B4%E6%96%B0.html)

### 第二步：导入脚本

1. 下载脚本文件：[酒馆助手脚本-巨大娘计算器.json](https://github.com/HerSophia/ST-GTS-Calculator/raw/main/json/%E9%85%92%E9%A6%86%E5%8A%A9%E6%89%8B%E8%84%9A%E6%9C%AC-%E5%B7%A8%E5%A4%A7%E5%A8%98%E8%AE%A1%E7%AE%97%E5%99%A8.json)
2. 在 SillyTavern 顶部栏点击 **扩展** → **酒馆助手** → **脚本库**
3. 点击 **导入脚本**，选择下载的 JSON 文件
4. 选择 **全局脚本**
5. 导入后**启用脚本**
6. 在扩展列表中应该能看到「巨大娘计算器」扩展

### 第三步：验证安装

安装成功后，你可以在扩展设置面板中看到「巨大娘计算器」的设置界面。

## 📖 使用教程

> 🚧 **施工中** - 详细使用教程正在编写中...

基本使用方法请参考 [src/README.md](./src/README.md) 中的详细文档。

### 快速开始

1. **快速计算模式**：在设置面板中输入身高，点击计算即可预览数据
2. **MVU 集成模式**（推荐）：在世界书或提示词中使用 MVU 命令设置角色身高：

```javascript
_.set('巨大娘.络络.当前身高', 170)      // 当前身高（米）
_.set('巨大娘.络络.原身高', 1.65)       // 原始身高（米）
```

## 🔧 开发者信息

本项目基于 [tavern_helper_template](https://github.com/StageDog/tavern_helper_template) 模板开发。

### 本地开发

```bash
# 安装依赖
pnpm install

# 开发模式（监听文件变化）
pnpm watch

# 生产构建
pnpm build

# 构建并注入到 JSON
pnpm build:inject

# 运行测试
pnpm test
```

### 项目架构

```
src/
├── core/          # 核心计算（纯函数）
├── stores/        # Pinia 状态管理
├── services/      # 业务服务层
├── composables/   # Vue Composables
├── ui/            # UI 组件
└── types/         # TypeScript 类型定义
```

详细架构说明请参考 [src/README.md](./src/README.md)。

## 📄 许可证

[Aladdin](LICENSE)
