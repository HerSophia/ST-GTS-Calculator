{
  "type": "script",
  "enabled": false,
  "name": "巨大娘计算器 v2.7.0",
  "id": "3f5f5cbb-5345-4458-b3e8-8e25667cf86a",
  "content": "import'https://testingcf.jsdelivr.net/gh/MagicalAstrogy/MagVarUpdate@beta/artifact/bundle.js';import{createPinia as e,defineStore as n,storeToRefs as a}from'https://testingcf.jsdelivr.net/npm/pinia/+esm';import{klona as t}from'https://testingcf.jsdelivr.net/npm/klona/+esm';import{compare as c}from'https://testingcf.jsdelivr.net/npm/compare-versions/+esm';var i={9(e,n,a){a.r(n),a.d(n,{default:()=>s});var t=a(699),c=a.n(t),i=a(465),o=a.n(i)()(c());o.push([e.id,'.gc-worldview-content[data-v-3554c17a]{display:flex;flex-direction:column;gap:16px}.gc-worldview-selector[data-v-3554c17a]{margin-bottom:8px}.gc-worldview-current[data-v-3554c17a]{padding:12px;background:rgba(0,0,0,0.2);border-radius:8px;margin-bottom:12px}.gc-worldview-current-info[data-v-3554c17a]{display:flex;align-items:center;gap:12px}.gc-worldview-icon[data-v-3554c17a]{font-size:1.5em;width:40px;height:40px;display:flex;align-items:center;justify-content:center;background:rgba(244,114,182,0.2);border-radius:8px;color:var(--gc-primary,#f472b6)}.gc-worldview-name[data-v-3554c17a]{font-weight:600;font-size:0.95em;margin-bottom:2px}.gc-worldview-desc[data-v-3554c17a]{font-size:0.8em;color:var(--gc-text-muted,#94a3b8)}.gc-worldview-list[data-v-3554c17a]{display:flex;flex-direction:column;gap:6px;max-height:180px;overflow-y:auto}.gc-worldview-item[data-v-3554c17a]{display:flex;align-items:center;gap:10px;padding:8px 12px;background:rgba(0,0,0,0.15);border-radius:6px;cursor:pointer;transition:all 0.2s}.gc-worldview-item[data-v-3554c17a]:hover{background:rgba(0,0,0,0.25)}.gc-worldview-item.active[data-v-3554c17a]{background:rgba(244,114,182,0.15);border:1px solid rgba(244,114,182,0.3)}.gc-worldview-item-icon[data-v-3554c17a]{font-size:1.1em;width:28px;text-align:center;color:var(--gc-text-muted,#94a3b8)}.gc-worldview-item.active .gc-worldview-item-icon[data-v-3554c17a]{color:var(--gc-primary,#f472b6)}.gc-worldview-item-info[data-v-3554c17a]{flex:1;display:flex;align-items:center;gap:8px}.gc-worldview-item-name[data-v-3554c17a]{font-size:0.9em}.gc-worldview-check[data-v-3554c17a]{color:var(--gc-primary,#f472b6);font-size:0.9em}.gc-worldview-details[data-v-3554c17a]{display:flex;flex-direction:column;gap:12px}.gc-worldview-section[data-v-3554c17a]{padding:10px;background:rgba(0,0,0,0.1);border-radius:6px}.gc-worldview-section h4[data-v-3554c17a]{display:flex;align-items:center;gap:8px;font-size:0.85em;font-weight:600;margin-bottom:8px;color:var(--gc-text,#f1f5f9)}.gc-worldview-section h4 i[data-v-3554c17a]{color:var(--gc-primary,#f472b6)}.gc-worldview-text[data-v-3554c17a]{font-size:0.85em;color:var(--gc-text-muted,#94a3b8);line-height:1.5}.gc-worldview-list-items[data-v-3554c17a]{margin:0;padding-left:20px;font-size:0.85em;color:var(--gc-text-muted,#94a3b8)}.gc-worldview-list-items li[data-v-3554c17a]{margin-bottom:4px}.gc-worldview-options[data-v-3554c17a]{border-top:1px dashed var(--gc-border,rgba(255,255,255,0.1));padding-top:12px}.gc-setting-toggle[data-v-3554c17a]{display:flex;justify-content:space-between;align-items:flex-start;padding:8px 0;border-bottom:1px solid var(--gc-border,rgba(255,255,255,0.1))}.gc-setting-toggle[data-v-3554c17a]:last-child{border-bottom:none}.gc-setting-toggle label[data-v-3554c17a]{display:flex;flex-direction:column;gap:2px}.gc-setting-toggle label span[data-v-3554c17a]{font-size:0.85em;font-weight:500}.gc-setting-toggle label small[data-v-3554c17a]{font-size:0.75em;color:var(--gc-text-muted,#94a3b8)}.gc-worldview-actions[data-v-3554c17a]{display:flex;gap:8px;margin-top:8px}.gc-worldview-editor[data-v-3554c17a]{display:flex;flex-direction:column;gap:12px}.gc-editor-header[data-v-3554c17a]{display:flex;align-items:center;gap:12px}.gc-editor-title[data-v-3554c17a]{font-weight:600;font-size:0.95em}.gc-editor-form[data-v-3554c17a]{display:flex;flex-direction:column;gap:12px}.gc-setting-item[data-v-3554c17a]{display:flex;flex-direction:column;gap:6px}.gc-setting-item label[data-v-3554c17a]{font-size:0.85em;color:var(--gc-text-muted,#94a3b8);font-weight:500}.gc-input[data-v-3554c17a]{padding:8px 10px;background:rgba(0,0,0,0.2);border:1px solid var(--gc-border,rgba(255,255,255,0.1));border-radius:6px;color:var(--gc-text,#f1f5f9);font-size:0.9em}.gc-input[data-v-3554c17a]:focus{outline:none;border-color:var(--gc-primary,#f472b6)}.gc-textarea[data-v-3554c17a]{padding:8px 10px;background:rgba(0,0,0,0.2);border:1px solid var(--gc-border,rgba(255,255,255,0.1));border-radius:6px;color:var(--gc-text,#f1f5f9);font-size:0.9em;resize:vertical}.gc-textarea[data-v-3554c17a]:focus{outline:none;border-color:var(--gc-primary,#f472b6)}.gc-editor-actions[data-v-3554c17a]{display:flex;gap:8px;justify-content:flex-end;margin-top:8px}.gc-add-template-btn[data-v-3554c17a]{margin-top:8px}.gc-btn-link[data-v-3554c17a]{background:transparent;border:none;color:var(--gc-text-muted,#94a3b8);cursor:pointer;padding:4px 8px;font-size:0.9em;display:flex;align-items:center;gap:6px}.gc-btn-link[data-v-3554c17a]:hover{color:var(--gc-text,#f1f5f9)}\\n','',{version:3,sources:['webpack://./src/ui/panels/WorldviewPanel.vue'],names:[],mappings:'AAiRA,uCACE,YAAa,CACb,qBAAsB,CACtB,QACF,CAEA,wCACE,iBACF,CAEA,uCACE,YAAa,CACb,0BAA8B,CAC9B,iBAAkB,CAClB,kBACF,CAEA,4CACE,YAAa,CACb,kBAAmB,CACnB,QACF,CAEA,oCACE,eAAgB,CAChB,UAAW,CACX,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,gCAAoC,CACpC,iBAAkB,CAClB,+BACF,CAEA,oCACE,eAAgB,CAChB,gBAAiB,CACjB,iBACF,CAEA,oCACE,eAAgB,CAChB,kCACF,CAEA,oCACE,YAAa,CACb,qBAAsB,CACtB,OAAQ,CACR,gBAAiB,CACjB,eACF,CAEA,oCACE,YAAa,CACb,kBAAmB,CACnB,QAAS,CACT,gBAAiB,CACjB,2BAA+B,CAC/B,iBAAkB,CAClB,cAAe,CACf,mBACF,CAEA,0CACE,2BACF,CAEA,2CACE,iCAAqC,CACrC,sCACF,CAEA,yCACE,eAAgB,CAChB,UAAW,CACX,iBAAkB,CAClB,kCACF,CAEA,mEACE,+BACF,CAEA,yCACE,MAAO,CACP,YAAa,CACb,kBAAmB,CACnB,OACF,CAEA,yCACE,eACF,CAEA,qCACE,+BAAiC,CACjC,eACF,CAEA,uCACE,YAAa,CACb,qBAAsB,CACtB,QACF,CAEA,uCACE,YAAa,CACb,0BAA8B,CAC9B,iBACF,CAEA,0CACE,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,gBAAiB,CACjB,eAAgB,CAChB,iBAAkB,CAClB,4BACF,CAEA,4CACE,+BACF,CAEA,oCACE,gBAAiB,CACjB,kCAAoC,CACpC,eACF,CAEA,0CACE,QAAS,CACT,iBAAkB,CAClB,gBAAiB,CACjB,kCACF,CAEA,6CACE,iBACF,CAEA,uCACE,4DAAiE,CACjE,gBACF,CAEA,oCACE,YAAa,CACb,6BAA8B,CAC9B,sBAAuB,CACvB,aAAc,CACd,8DACF,CAEA,+CACE,kBACF,CAEA,0CACE,YAAa,CACb,qBAAsB,CACtB,OACF,CAEA,+CACE,gBAAiB,CACjB,eACF,CAEA,gDACE,gBAAiB,CACjB,kCACF,CAEA,uCACE,YAAa,CACb,OAAQ,CACR,cACF,CAEA,sCACE,YAAa,CACb,qBAAsB,CACtB,QACF,CAEA,mCACE,YAAa,CACb,kBAAmB,CACnB,QACF,CAEA,kCACE,eAAgB,CAChB,gBACF,CAEA,iCACE,YAAa,CACb,qBAAsB,CACtB,QACF,CAEA,kCACE,YAAa,CACb,qBAAsB,CACtB,OACF,CAEA,wCACE,gBAAiB,CACjB,kCAAoC,CACpC,eACF,CAEA,2BACE,gBAAiB,CACjB,0BAA8B,CAC9B,uDAA4D,CAC5D,iBAAkB,CAClB,4BAA8B,CAC9B,eACF,CAEA,iCACE,YAAa,CACb,sCACF,CAEA,8BACE,gBAAiB,CACjB,0BAA8B,CAC9B,uDAA4D,CAC5D,iBAAkB,CAClB,4BAA8B,CAC9B,eAAgB,CAChB,eACF,CAEA,oCACE,YAAa,CACb,sCACF,CAEA,oCACE,YAAa,CACb,OAAQ,CACR,wBAAyB,CACzB,cACF,CAEA,sCACE,cACF,CAEA,8BACE,sBAAuB,CACvB,WAAY,CACZ,kCAAoC,CACpC,cAAe,CACf,eAAgB,CAChB,eAAgB,CAChB,YAAa,CACb,kBAAmB,CACnB,OACF,CAEA,oCACE,4BACF',sourcesContent:['<template>\\n  <GcOverlay\\n    :visible=\"visible\"\\n    :title=\"\\'世界观设定\\'\"\\n    :icon=\"currentWorldview?.icon || \\'fa-solid fa-globe\\'\"\\n    panel-class=\"gc-worldview-panel\"\\n    @close=\"handleClose\"\\n  >\\n    <template #header-actions>\\n      <button class=\"gc-btn-link\" @click=\"$emit(\\'reset\\')\" title=\"重置为默认\">\\n        <i class=\"fa-solid fa-rotate-left\"></i>\\n      </button>\\n    </template>\\n\\n    <div class=\"gc-worldview-content\">\\n      \\x3c!-- 当前世界观选择 --\\x3e\\n      <div class=\"gc-worldview-selector\">\\n        <div class=\"gc-worldview-current\">\\n          <div class=\"gc-worldview-current-info\">\\n            <i :class=\"currentWorldview?.icon\" class=\"gc-worldview-icon\"></i>\\n            <div>\\n              <div class=\"gc-worldview-name\">{{ currentWorldview?.name }}</div>\\n              <div class=\"gc-worldview-desc\">{{ currentWorldview?.description }}</div>\\n            </div>\\n          </div>\\n        </div>\\n        \\n        \\x3c!-- 世界观快速切换列表 --\\x3e\\n        <div class=\"gc-worldview-list\">\\n          <div \\n            v-for=\"wv in worldviews\" \\n            :key=\"wv.id\"\\n            class=\"gc-worldview-item\"\\n            :class=\"{ active: wv.id === currentWorldviewId, builtin: wv.builtin }\"\\n            @click=\"$emit(\\'select\\', wv.id)\"\\n          >\\n            <i :class=\"wv.icon\" class=\"gc-worldview-item-icon\"></i>\\n            <div class=\"gc-worldview-item-info\">\\n              <span class=\"gc-worldview-item-name\">{{ wv.name }}</span>\\n              <GcBadge v-if=\"!wv.builtin\" variant=\"custom\" size=\"sm\">自定义</GcBadge>\\n            </div>\\n            <i v-if=\"wv.id === currentWorldviewId\" class=\"fa-solid fa-check gc-worldview-check\"></i>\\n          </div>\\n        </div>\\n      </div>\\n      \\n      \\x3c!-- 当前世界观详情 --\\x3e\\n      <div v-if=\"!isEditing\" class=\"gc-worldview-details\">\\n        <div class=\"gc-worldview-section\">\\n          <h4><i class=\"fa-solid fa-gears\"></i> 变化机制</h4>\\n          <div class=\"gc-worldview-text\">{{ currentWorldview?.mechanism }}</div>\\n        </div>\\n        \\n        <div class=\"gc-worldview-section\">\\n          <h4><i class=\"fa-solid fa-person\"></i> 身体特性</h4>\\n          <div class=\"gc-worldview-text\">{{ currentWorldview?.bodyCharacteristics }}</div>\\n        </div>\\n        \\n        <div v-if=\"hasLimitations\" class=\"gc-worldview-section\">\\n          <h4><i class=\"fa-solid fa-triangle-exclamation\"></i> 限制与代价</h4>\\n          <ul class=\"gc-worldview-list-items\">\\n            <li v-for=\"(item, i) in currentWorldview?.limitations\" :key=\"i\">{{ item }}</li>\\n          </ul>\\n        </div>\\n        \\n        <div v-if=\"currentWorldview?.specialRules?.length\" class=\"gc-worldview-section\">\\n          <h4><i class=\"fa-solid fa-star\"></i> 特殊规则</h4>\\n          <ul class=\"gc-worldview-list-items\">\\n            <li v-for=\"(item, i) in currentWorldview?.specialRules\" :key=\"i\">{{ item }}</li>\\n          </ul>\\n        </div>\\n        \\n        <div v-if=\"currentWorldview?.writingTips?.length\" class=\"gc-worldview-section\">\\n          <h4><i class=\"fa-solid fa-pen-fancy\"></i> 写作建议</h4>\\n          <ul class=\"gc-worldview-list-items\">\\n            <li v-for=\"(item, i) in currentWorldview?.writingTips\" :key=\"i\">{{ item }}</li>\\n          </ul>\\n        </div>\\n        \\n        \\x3c!-- 世界观设置选项 --\\x3e\\n        <div class=\"gc-worldview-section gc-worldview-options\">\\n          <h4><i class=\"fa-solid fa-sliders\"></i> 世界观选项</h4>\\n          <div class=\"gc-setting-toggle\">\\n            <label>\\n              <span>注入世界观提示词</span>\\n              <small>将世界观设定注入到 AI 提示词中</small>\\n            </label>\\n            <GcSwitch\\n              :model-value=\"settings.injectWorldviewPrompt\"\\n              @update:model-value=\"$emit(\\'update:setting\\', \\'injectWorldviewPrompt\\', $event)\"\\n            />\\n          </div>\\n          <div class=\"gc-setting-toggle\">\\n            <label>\\n              <span>允许身体部位独立变化</span>\\n              <small>特定部位可以有不同的缩放倍率</small>\\n            </label>\\n            <GcSwitch\\n              :model-value=\"settings.allowPartialScaling\"\\n              @update:model-value=\"$emit(\\'update:setting\\', \\'allowPartialScaling\\', $event)\"\\n            />\\n          </div>\\n        </div>\\n        \\n        <div v-if=\"!currentWorldview?.builtin\" class=\"gc-worldview-actions\">\\n          <GcButton @click=\"startEdit\"><i class=\"fa-solid fa-pen\"></i> 编辑</GcButton>\\n          <GcButton variant=\"danger\" @click=\"$emit(\\'delete\\', currentWorldview?.id, currentWorldview?.name)\">\\n            <i class=\"fa-solid fa-trash\"></i> 删除\\n          </GcButton>\\n        </div>\\n      </div>\\n      \\n      \\x3c!-- 编辑世界观 --\\x3e\\n      <div v-else class=\"gc-worldview-editor\">\\n        <div class=\"gc-editor-header\">\\n          <button class=\"gc-btn-link\" @click=\"cancelEdit\">\\n            <i class=\"fa-solid fa-arrow-left\"></i> 返回\\n          </button>\\n          <span class=\"gc-editor-title\">{{ editingData ? \\'编辑世界观\\' : \\'新建世界观\\' }}</span>\\n        </div>\\n        <div class=\"gc-editor-form\">\\n          <div class=\"gc-setting-item\">\\n            <label>名称 *</label>\\n            <input v-model=\"form.name\" type=\"text\" class=\"gc-input\" placeholder=\"世界观名称\" />\\n          </div>\\n          <div class=\"gc-setting-item\">\\n            <label>图标 (Font Awesome class)</label>\\n            <input v-model=\"form.icon\" type=\"text\" class=\"gc-input\" placeholder=\"fa-solid fa-atom\" />\\n          </div>\\n          <div class=\"gc-setting-item\">\\n            <label>描述</label>\\n            <input v-model=\"form.description\" type=\"text\" class=\"gc-input\" placeholder=\"简短描述\" />\\n          </div>\\n          <div class=\"gc-setting-item\">\\n            <label>变化机制</label>\\n            <textarea v-model=\"form.mechanism\" class=\"gc-textarea\" rows=\"4\" placeholder=\"描述体型变化的机制...\"></textarea>\\n          </div>\\n          <div class=\"gc-setting-item\">\\n            <label>身体特性</label>\\n            <textarea v-model=\"form.bodyCharacteristics\" class=\"gc-textarea\" rows=\"4\" placeholder=\"描述变化后的身体特征...\"></textarea>\\n          </div>\\n          <div class=\"gc-editor-actions\">\\n            <GcButton @click=\"cancelEdit\">取消</GcButton>\\n            <GcButton variant=\"primary\" @click=\"saveWorldview\">\\n              <i class=\"fa-solid fa-save\"></i> 保存\\n            </GcButton>\\n          </div>\\n        </div>\\n      </div>\\n      \\n      \\x3c!-- 新建世界观按钮 --\\x3e\\n      <GcButton v-if=\"!isEditing\" class=\"gc-add-template-btn\" @click=\"startCreate\">\\n        <i class=\"fa-solid fa-plus\"></i> 新建自定义世界观\\n      </GcButton>\\n    </div>\\n  </GcOverlay>\\n</template>\\n\\n<script setup lang=\"ts\">\\nimport { ref, computed } from \\'vue\\';\\nimport { GcOverlay, GcSwitch, GcButton, GcBadge } from \\'../components\\';\\nimport type { Worldview } from \\'../../types\\';\\nimport type { Settings } from \\'../../types\\';\\n\\nconst props = defineProps<{\\n  visible: boolean;\\n  worldviews: Worldview[];\\n  currentWorldviewId: string;\\n  currentWorldview: Worldview | undefined;\\n  settings: Settings;\\n}>();\\n\\nconst emit = defineEmits<{\\n  (e: \\'close\\'): void;\\n  (e: \\'reset\\'): void;\\n  (e: \\'select\\', id: string): void;\\n  (e: \\'create\\', wv: Omit<Worldview, \\'id\\' | \\'builtin\\'>): void;\\n  (e: \\'update\\', id: string, wv: Partial<Worldview>): void;\\n  (e: \\'delete\\', id: string | undefined, name: string | undefined): void;\\n  (e: \\'update:setting\\', key: keyof Settings, value: unknown): void;\\n}>();\\n\\n// 内部状态\\nconst isEditing = ref(false);\\nconst editingData = ref<Worldview | null>(null);\\nconst form = ref({\\n  name: \\'\\',\\n  icon: \\'fa-solid fa-star\\',\\n  description: \\'\\',\\n  mechanism: \\'\\',\\n  bodyCharacteristics: \\'\\',\\n  limitations: [] as string[],\\n  specialRules: [] as string[],\\n  writingTips: [] as string[],\\n});\\n\\nconst hasLimitations = computed(() => {\\n  const lim = props.currentWorldview?.limitations;\\n  return lim && lim.length > 0 && lim[0] !== \\'无\\';\\n});\\n\\nconst startCreate = () => {\\n  editingData.value = null;\\n  form.value = {\\n    name: \\'\\',\\n    icon: \\'fa-solid fa-star\\',\\n    description: \\'\\',\\n    mechanism: \\'\\',\\n    bodyCharacteristics: \\'\\',\\n    limitations: [],\\n    specialRules: [],\\n    writingTips: [],\\n  };\\n  isEditing.value = true;\\n};\\n\\nconst startEdit = () => {\\n  if (!props.currentWorldview) return;\\n  editingData.value = props.currentWorldview;\\n  form.value = {\\n    name: props.currentWorldview.name,\\n    icon: props.currentWorldview.icon,\\n    description: props.currentWorldview.description,\\n    mechanism: props.currentWorldview.mechanism,\\n    bodyCharacteristics: props.currentWorldview.bodyCharacteristics,\\n    limitations: [...props.currentWorldview.limitations],\\n    specialRules: [...props.currentWorldview.specialRules],\\n    writingTips: [...props.currentWorldview.writingTips],\\n  };\\n  isEditing.value = true;\\n};\\n\\nconst cancelEdit = () => {\\n  isEditing.value = false;\\n  editingData.value = null;\\n};\\n\\nconst saveWorldview = () => {\\n  if (!form.value.name.trim()) {\\n    toastr.warning(\\'请输入世界观名称\\');\\n    return;\\n  }\\n  \\n  const worldviewData = {\\n    name: form.value.name.trim(),\\n    icon: form.value.icon.trim() || \\'fa-solid fa-star\\',\\n    description: form.value.description.trim(),\\n    mechanism: form.value.mechanism.trim(),\\n    bodyCharacteristics: form.value.bodyCharacteristics.trim(),\\n    limitations: form.value.limitations.filter(s => s.trim()),\\n    specialRules: form.value.specialRules.filter(s => s.trim()),\\n    writingTips: form.value.writingTips.filter(s => s.trim()),\\n  };\\n  \\n  if (editingData.value) {\\n    emit(\\'update\\', editingData.value.id, worldviewData);\\n  } else {\\n    emit(\\'create\\', worldviewData);\\n  }\\n  \\n  isEditing.value = false;\\n  editingData.value = null;\\n};\\n\\nconst handleClose = () => {\\n  if (isEditing.value) {\\n    cancelEdit();\\n  }\\n  emit(\\'close\\');\\n};\\n<\\/script>\\n\\n<style scoped>\\n.gc-worldview-content {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 16px;\\n}\\n\\n.gc-worldview-selector {\\n  margin-bottom: 8px;\\n}\\n\\n.gc-worldview-current {\\n  padding: 12px;\\n  background: rgba(0, 0, 0, 0.2);\\n  border-radius: 8px;\\n  margin-bottom: 12px;\\n}\\n\\n.gc-worldview-current-info {\\n  display: flex;\\n  align-items: center;\\n  gap: 12px;\\n}\\n\\n.gc-worldview-icon {\\n  font-size: 1.5em;\\n  width: 40px;\\n  height: 40px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  background: rgba(244, 114, 182, 0.2);\\n  border-radius: 8px;\\n  color: var(--gc-primary, #f472b6);\\n}\\n\\n.gc-worldview-name {\\n  font-weight: 600;\\n  font-size: 0.95em;\\n  margin-bottom: 2px;\\n}\\n\\n.gc-worldview-desc {\\n  font-size: 0.8em;\\n  color: var(--gc-text-muted, #94a3b8);\\n}\\n\\n.gc-worldview-list {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 6px;\\n  max-height: 180px;\\n  overflow-y: auto;\\n}\\n\\n.gc-worldview-item {\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n  padding: 8px 12px;\\n  background: rgba(0, 0, 0, 0.15);\\n  border-radius: 6px;\\n  cursor: pointer;\\n  transition: all 0.2s;\\n}\\n\\n.gc-worldview-item:hover {\\n  background: rgba(0, 0, 0, 0.25);\\n}\\n\\n.gc-worldview-item.active {\\n  background: rgba(244, 114, 182, 0.15);\\n  border: 1px solid rgba(244, 114, 182, 0.3);\\n}\\n\\n.gc-worldview-item-icon {\\n  font-size: 1.1em;\\n  width: 28px;\\n  text-align: center;\\n  color: var(--gc-text-muted, #94a3b8);\\n}\\n\\n.gc-worldview-item.active .gc-worldview-item-icon {\\n  color: var(--gc-primary, #f472b6);\\n}\\n\\n.gc-worldview-item-info {\\n  flex: 1;\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n}\\n\\n.gc-worldview-item-name {\\n  font-size: 0.9em;\\n}\\n\\n.gc-worldview-check {\\n  color: var(--gc-primary, #f472b6);\\n  font-size: 0.9em;\\n}\\n\\n.gc-worldview-details {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 12px;\\n}\\n\\n.gc-worldview-section {\\n  padding: 10px;\\n  background: rgba(0, 0, 0, 0.1);\\n  border-radius: 6px;\\n}\\n\\n.gc-worldview-section h4 {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  font-size: 0.85em;\\n  font-weight: 600;\\n  margin-bottom: 8px;\\n  color: var(--gc-text, #f1f5f9);\\n}\\n\\n.gc-worldview-section h4 i {\\n  color: var(--gc-primary, #f472b6);\\n}\\n\\n.gc-worldview-text {\\n  font-size: 0.85em;\\n  color: var(--gc-text-muted, #94a3b8);\\n  line-height: 1.5;\\n}\\n\\n.gc-worldview-list-items {\\n  margin: 0;\\n  padding-left: 20px;\\n  font-size: 0.85em;\\n  color: var(--gc-text-muted, #94a3b8);\\n}\\n\\n.gc-worldview-list-items li {\\n  margin-bottom: 4px;\\n}\\n\\n.gc-worldview-options {\\n  border-top: 1px dashed var(--gc-border, rgba(255, 255, 255, 0.1));\\n  padding-top: 12px;\\n}\\n\\n.gc-setting-toggle {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: flex-start;\\n  padding: 8px 0;\\n  border-bottom: 1px solid var(--gc-border, rgba(255, 255, 255, 0.1));\\n}\\n\\n.gc-setting-toggle:last-child {\\n  border-bottom: none;\\n}\\n\\n.gc-setting-toggle label {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 2px;\\n}\\n\\n.gc-setting-toggle label span {\\n  font-size: 0.85em;\\n  font-weight: 500;\\n}\\n\\n.gc-setting-toggle label small {\\n  font-size: 0.75em;\\n  color: var(--gc-text-muted, #94a3b8);\\n}\\n\\n.gc-worldview-actions {\\n  display: flex;\\n  gap: 8px;\\n  margin-top: 8px;\\n}\\n\\n.gc-worldview-editor {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 12px;\\n}\\n\\n.gc-editor-header {\\n  display: flex;\\n  align-items: center;\\n  gap: 12px;\\n}\\n\\n.gc-editor-title {\\n  font-weight: 600;\\n  font-size: 0.95em;\\n}\\n\\n.gc-editor-form {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 12px;\\n}\\n\\n.gc-setting-item {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 6px;\\n}\\n\\n.gc-setting-item label {\\n  font-size: 0.85em;\\n  color: var(--gc-text-muted, #94a3b8);\\n  font-weight: 500;\\n}\\n\\n.gc-input {\\n  padding: 8px 10px;\\n  background: rgba(0, 0, 0, 0.2);\\n  border: 1px solid var(--gc-border, rgba(255, 255, 255, 0.1));\\n  border-radius: 6px;\\n  color: var(--gc-text, #f1f5f9);\\n  font-size: 0.9em;\\n}\\n\\n.gc-input:focus {\\n  outline: none;\\n  border-color: var(--gc-primary, #f472b6);\\n}\\n\\n.gc-textarea {\\n  padding: 8px 10px;\\n  background: rgba(0, 0, 0, 0.2);\\n  border: 1px solid var(--gc-border, rgba(255, 255, 255, 0.1));\\n  border-radius: 6px;\\n  color: var(--gc-text, #f1f5f9);\\n  font-size: 0.9em;\\n  resize: vertical;\\n}\\n\\n.gc-textarea:focus {\\n  outline: none;\\n  border-color: var(--gc-primary, #f472b6);\\n}\\n\\n.gc-editor-actions {\\n  display: flex;\\n  gap: 8px;\\n  justify-content: flex-end;\\n  margin-top: 8px;\\n}\\n\\n.gc-add-template-btn {\\n  margin-top: 8px;\\n}\\n\\n.gc-btn-link {\\n  background: transparent;\\n  border: none;\\n  color: var(--gc-text-muted, #94a3b8);\\n  cursor: pointer;\\n  padding: 4px 8px;\\n  font-size: 0.9em;\\n  display: flex;\\n  align-items: center;\\n  gap: 6px;\\n}\\n\\n.gc-btn-link:hover {\\n  color: var(--gc-text, #f1f5f9);\\n}\\n</style>\\n'],sourceRoot:''}]);const s=o},18(e,n,a){a.r(n),a.d(n,{default:()=>s});var t=a(699),c=a.n(t),i=a(465),o=a.n(i)()(c());o.push([e.id,'.gc-badge[data-v-8712d0e8]{display:inline-flex;align-items:center;padding:2px 8px;font-size:0.75em;font-weight:500;border-radius:4px;background:rgba(255,255,255,0.1);color:var(--gc-text-muted,#94a3b8)}.gc-badge.primary[data-v-8712d0e8]{background:rgba(244,114,182,0.2);color:#f472b6}.gc-badge.success[data-v-8712d0e8]{background:rgba(52,211,153,0.2);color:#34d399}.gc-badge.warning[data-v-8712d0e8]{background:rgba(251,191,36,0.2);color:#fbbf24}.gc-badge.danger[data-v-8712d0e8]{background:rgba(239,68,68,0.2);color:#f87171}.gc-badge.muted[data-v-8712d0e8]{background:rgba(148,163,184,0.2);color:#94a3b8}.gc-badge.giant[data-v-8712d0e8]{background:rgba(244,114,182,0.2);color:#f472b6}.gc-badge.tiny[data-v-8712d0e8]{background:rgba(59,130,246,0.2);color:#60a5fa}.gc-badge.custom[data-v-8712d0e8]{background:rgba(168,85,247,0.2);color:#a855f7}.gc-badge.sm[data-v-8712d0e8]{padding:1px 6px;font-size:0.7em}\\n','',{version:3,sources:['webpack://./src/ui/components/GcBadge.vue'],names:[],mappings:'AAcA,2BACE,mBAAoB,CACpB,kBAAmB,CACnB,eAAgB,CAChB,gBAAiB,CACjB,eAAgB,CAChB,iBAAkB,CAClB,gCAAoC,CACpC,kCACF,CAEA,mCACE,gCAAoC,CACpC,aACF,CAEA,mCACE,+BAAmC,CACnC,aACF,CAEA,mCACE,+BAAmC,CACnC,aACF,CAEA,kCACE,8BAAkC,CAClC,aACF,CAEA,iCACE,gCAAoC,CACpC,aACF,CAEA,iCACE,gCAAoC,CACpC,aACF,CAEA,gCACE,+BAAmC,CACnC,aACF,CAEA,kCACE,+BAAmC,CACnC,aACF,CAEA,8BACE,eAAgB,CAChB,eACF',sourcesContent:['<template>\\n  <span class=\"gc-badge\" :class=\"[variant, size]\">\\n    <slot></slot>\\n  </span>\\n</template>\\n\\n<script setup lang=\"ts\">\\ndefineProps<{\\n  variant?: \\'primary\\' | \\'success\\' | \\'warning\\' | \\'danger\\' | \\'muted\\' | \\'giant\\' | \\'tiny\\' | \\'custom\\';\\n  size?: \\'sm\\' | \\'md\\';\\n}>();\\n<\\/script>\\n\\n<style scoped>\\n.gc-badge {\\n  display: inline-flex;\\n  align-items: center;\\n  padding: 2px 8px;\\n  font-size: 0.75em;\\n  font-weight: 500;\\n  border-radius: 4px;\\n  background: rgba(255, 255, 255, 0.1);\\n  color: var(--gc-text-muted, #94a3b8);\\n}\\n\\n.gc-badge.primary {\\n  background: rgba(244, 114, 182, 0.2);\\n  color: #f472b6;\\n}\\n\\n.gc-badge.success {\\n  background: rgba(52, 211, 153, 0.2);\\n  color: #34d399;\\n}\\n\\n.gc-badge.warning {\\n  background: rgba(251, 191, 36, 0.2);\\n  color: #fbbf24;\\n}\\n\\n.gc-badge.danger {\\n  background: rgba(239, 68, 68, 0.2);\\n  color: #f87171;\\n}\\n\\n.gc-badge.muted {\\n  background: rgba(148, 163, 184, 0.2);\\n  color: #94a3b8;\\n}\\n\\n.gc-badge.giant {\\n  background: rgba(244, 114, 182, 0.2);\\n  color: #f472b6;\\n}\\n\\n.gc-badge.tiny {\\n  background: rgba(59, 130, 246, 0.2);\\n  color: #60a5fa;\\n}\\n\\n.gc-badge.custom {\\n  background: rgba(168, 85, 247, 0.2);\\n  color: #a855f7;\\n}\\n\\n.gc-badge.sm {\\n  padding: 1px 6px;\\n  font-size: 0.7em;\\n}\\n</style>\\n'],sourceRoot:''}]);const s=o},42(e,n,a){a.r(n),a.d(n,{default:()=>s});var t=a(699),c=a.n(t),i=a(465),o=a.n(i)()(c());o.push([e.id,'.gc-extensions[data-v-4e3af112]{margin-top:16px}.gc-section-header[data-v-4e3af112]{display:flex;align-items:center;justify-content:space-between;padding:8px 0;font-size:0.9em;font-weight:600;margin-bottom:4px;color:var(--gc-text-muted,#94a3b8);cursor:pointer;-webkit-user-select:none;user-select:none;transition:color 0.2s}.gc-section-header[data-v-4e3af112]:hover{color:var(--gc-text,#f1f5f9)}.gc-section-header.clickable:hover .gc-header-left[data-v-4e3af112]{color:var(--gc-primary,#f472b6)}.gc-header-left[data-v-4e3af112]{display:flex;align-items:center;gap:8px;transition:color 0.2s}.gc-chevron[data-v-4e3af112]{font-size:0.8em;opacity:0.7;transition:transform 0.2s}.gc-section-header i[data-v-4e3af112]{color:var(--gc-primary,#f472b6)}.gc-extension-list[data-v-4e3af112]{display:flex;flex-direction:column;gap:8px}.gc-extension-item[data-v-4e3af112]{display:flex;align-items:center;gap:12px;padding:10px 12px;background:rgba(0,0,0,0.2);border-radius:8px;border:1px solid transparent;transition:all 0.2s}.gc-extension-item[data-v-4e3af112]:hover{background:rgba(0,0,0,0.3)}.gc-extension-item.clickable[data-v-4e3af112]{cursor:pointer}.gc-extension-item.core[data-v-4e3af112]{border-color:rgba(52,211,153,0.2)}.gc-extension-item.active[data-v-4e3af112]{border-color:rgba(244,114,182,0.3)}.gc-extension-icon[data-v-4e3af112]{width:36px;height:36px;display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,0.05);border-radius:8px;color:var(--gc-text-muted,#94a3b8)}.gc-extension-item.core .gc-extension-icon[data-v-4e3af112]{background:rgba(52,211,153,0.1);color:#34d399}.gc-extension-icon.damage[data-v-4e3af112]{background:rgba(239,68,68,0.1);color:#f87171}.gc-extension-item.active .gc-extension-icon.damage[data-v-4e3af112]{color:#ef4444}.gc-extension-info[data-v-4e3af112]{flex:1;min-width:0}.gc-extension-name[data-v-4e3af112]{display:flex;align-items:center;gap:6px;font-weight:500;font-size:0.9em;margin-bottom:2px}.gc-extension-desc[data-v-4e3af112]{font-size:0.8em;color:var(--gc-text-muted,#94a3b8)}.gc-extension-toggle[data-v-4e3af112]{flex-shrink:0;display:flex;align-items:center;gap:12px}.gc-switch-wrapper[data-v-4e3af112]{display:flex;align-items:center}.gc-expand-icon[data-v-4e3af112]{width:20px;display:flex;justify-content:center;color:var(--gc-text-muted,#94a3b8);font-size:0.8em;opacity:0.7}.gc-always-on[data-v-4e3af112]{font-size:0.75em;color:#34d399;padding:2px 8px;background:rgba(52,211,153,0.1);border-radius:4px}.gc-extension-settings[data-v-4e3af112]{padding:12px;background:rgba(0,0,0,0.15);border-radius:8px;margin-left:48px;display:flex;flex-direction:column;gap:10px}.gc-setting-item[data-v-4e3af112]{display:flex;flex-direction:column;gap:6px}.gc-setting-item label[data-v-4e3af112]{font-size:0.85em;color:var(--gc-text-muted,#94a3b8)}.gc-input[data-v-4e3af112]{width:100%;padding:6px 10px;background:rgba(0,0,0,0.2);border:1px solid var(--gc-border,rgba(255,255,255,0.1));border-radius:6px;color:var(--gc-text,#f1f5f9);font-size:0.85em}.gc-setting-toggle[data-v-4e3af112]{display:flex;justify-content:space-between;align-items:flex-start;padding:6px 0}.gc-setting-toggle label[data-v-4e3af112]{display:flex;flex-direction:column;gap:2px}.gc-setting-toggle label span[data-v-4e3af112]{font-size:0.85em;font-weight:500}.gc-setting-toggle label small[data-v-4e3af112]{font-size:0.75em;color:var(--gc-text-muted,#94a3b8)}.gc-damage-preview[data-v-4e3af112]{margin-top:8px;padding:10px;background:rgba(239,68,68,0.1);border-radius:6px}.gc-damage-preview-header[data-v-4e3af112]{display:flex;align-items:center;gap:6px;font-size:0.85em;font-weight:500;margin-bottom:8px;color:#f87171}.gc-damage-preview-content[data-v-4e3af112]{display:flex;flex-direction:column;gap:4px}.gc-damage-stat[data-v-4e3af112]{display:flex;justify-content:space-between;font-size:0.8em}.gc-damage-label[data-v-4e3af112]{color:var(--gc-text-muted,#94a3b8)}.gc-damage-value[data-v-4e3af112]{font-weight:500}.gc-damage-value.casualties[data-v-4e3af112]{color:#f87171}.gc-damage-value.buildings[data-v-4e3af112]{color:#fbbf24}.slide-enter-active[data-v-4e3af112],.slide-leave-active[data-v-4e3af112]{transition:all 0.3s ease}.slide-enter-from[data-v-4e3af112],.slide-leave-to[data-v-4e3af112]{opacity:0;max-height:0;padding-top:0;padding-bottom:0;margin-top:0}.slide-enter-to[data-v-4e3af112],.slide-leave-from[data-v-4e3af112]{max-height:1000px}\\n','',{version:3,sources:['webpack://./src/ui/panels/ExtensionsPanel.vue'],names:[],mappings:'AAwMA,gCACE,eACF,CAEA,oCACE,YAAa,CACb,kBAAmB,CACnB,6BAA8B,CAC9B,aAAc,CACd,eAAgB,CAChB,eAAgB,CAChB,iBAAkB,CAClB,kCAAoC,CACpC,cAAe,CACf,wBAAiB,CAAjB,gBAAiB,CACjB,qBACF,CAEA,0CACE,4BACF,CAEA,oEACE,+BACF,CAEA,iCACE,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,qBACF,CAEA,6BACE,eAAgB,CAChB,WAAY,CACZ,yBACF,CAEA,sCACE,+BACF,CAEA,oCACE,YAAa,CACb,qBAAsB,CACtB,OACF,CAEA,oCACE,YAAa,CACb,kBAAmB,CACnB,QAAS,CACT,iBAAkB,CAClB,0BAA8B,CAC9B,iBAAkB,CAClB,4BAA6B,CAC7B,mBACF,CAEA,0CACE,0BACF,CAEA,8CACE,cACF,CAEA,yCACE,iCACF,CAEA,2CACE,kCACF,CAEA,oCACE,UAAW,CACX,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,iCAAqC,CACrC,iBAAkB,CAClB,kCACF,CAEA,4DACE,+BAAmC,CACnC,aACF,CAEA,2CACE,8BAAkC,CAClC,aACF,CAEA,qEACE,aACF,CAEA,oCACE,MAAO,CACP,WACF,CAEA,oCACE,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,eAAgB,CAChB,eAAgB,CAChB,iBACF,CAEA,oCACE,eAAgB,CAChB,kCACF,CAEA,sCACE,aAAc,CACd,YAAa,CACb,kBAAmB,CACnB,QACF,CAEA,oCACE,YAAa,CACb,kBACF,CAEA,iCACE,UAAW,CACX,YAAa,CACb,sBAAuB,CACvB,kCAAoC,CACpC,eAAgB,CAChB,WACF,CAEA,+BACE,gBAAiB,CACjB,aAAc,CACd,eAAgB,CAChB,+BAAmC,CACnC,iBACF,CAEA,wCACE,YAAa,CACb,2BAA+B,CAC/B,iBAAkB,CAClB,gBAAiB,CACjB,YAAa,CACb,qBAAsB,CACtB,QACF,CAEA,kCACE,YAAa,CACb,qBAAsB,CACtB,OACF,CAEA,wCACE,gBAAiB,CACjB,kCACF,CAEA,2BACE,UAAW,CACX,gBAAiB,CACjB,0BAA8B,CAC9B,uDAA4D,CAC5D,iBAAkB,CAClB,4BAA8B,CAC9B,gBACF,CAEA,oCACE,YAAa,CACb,6BAA8B,CAC9B,sBAAuB,CACvB,aACF,CAEA,0CACE,YAAa,CACb,qBAAsB,CACtB,OACF,CAEA,+CACE,gBAAiB,CACjB,eACF,CAEA,gDACE,gBAAiB,CACjB,kCACF,CAEA,oCACE,cAAe,CACf,YAAa,CACb,8BAAkC,CAClC,iBACF,CAEA,2CACE,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,gBAAiB,CACjB,eAAgB,CAChB,iBAAkB,CAClB,aACF,CAEA,4CACE,YAAa,CACb,qBAAsB,CACtB,OACF,CAEA,iCACE,YAAa,CACb,6BAA8B,CAC9B,eACF,CAEA,kCACE,kCACF,CAEA,kCACE,eACF,CAEA,6CACE,aACF,CAEA,4CACE,aACF,CAEA,0EAEE,wBACF,CAEA,oEAEE,SAAU,CACV,YAAa,CACb,aAAc,CACd,gBAAiB,CACjB,YACF,CAEA,oEAEE,iBACF',sourcesContent:['<template>\\n  <div class=\"gc-extensions\">\\n    <div \\n      class=\"gc-section-header clickable\"\\n      @click=\"isSectionCollapsed = !isSectionCollapsed\"\\n    >\\n      <div class=\"gc-header-left\">\\n        <i class=\"fa-solid fa-puzzle-piece\"></i>\\n        <span>扩展系统</span>\\n      </div>\\n      <i \\n        class=\"fa-solid gc-chevron\"\\n        :class=\"isSectionCollapsed ? \\'fa-chevron-right\\' : \\'fa-chevron-down\\'\"\\n      ></i>\\n    </div>\\n    \\n    <transition name=\"slide\">\\n      <div v-show=\"!isSectionCollapsed\" class=\"gc-extension-list\">\\n      \\x3c!-- 核心计算（始终开启） --\\x3e\\n      <div class=\"gc-extension-item core\">\\n        <div class=\"gc-extension-icon\">\\n          <i class=\"fa-solid fa-calculator\"></i>\\n        </div>\\n        <div class=\"gc-extension-info\">\\n          <div class=\"gc-extension-name\">\\n            基础计算\\n            <GcBadge size=\"sm\">核心</GcBadge>\\n          </div>\\n          <div class=\"gc-extension-desc\">身体数据计算、相对尺寸参照</div>\\n        </div>\\n        <div class=\"gc-extension-toggle\">\\n          <span class=\"gc-always-on\">始终开启</span>\\n        </div>\\n      </div>\\n\\n      \\x3c!-- 损害计算（可开关） --\\x3e\\n      <div \\n        class=\"gc-extension-item\" \\n        :class=\"{ \\n          active: settings.enableDamageCalculation,\\n          clickable: settings.enableDamageCalculation\\n        }\"\\n        @click=\"settings.enableDamageCalculation ? (isDamageExpanded = !isDamageExpanded) : null\"\\n      >\\n        <div class=\"gc-extension-icon damage\">\\n          <i class=\"fa-solid fa-explosion\"></i>\\n        </div>\\n        <div class=\"gc-extension-info\">\\n          <div class=\"gc-extension-name\">\\n            损害计算\\n            <GcBadge v-if=\"settings.enableDamageCalculation\" variant=\"success\" size=\"sm\">已启用</GcBadge>\\n          </div>\\n          <div class=\"gc-extension-desc\">计算巨大娘行动可能造成的破坏</div>\\n        </div>\\n        <div class=\"gc-extension-toggle\">\\n          <div @click.stop class=\"gc-switch-wrapper\">\\n            <GcSwitch\\n              :model-value=\"settings.enableDamageCalculation\"\\n              @update:model-value=\"$emit(\\'toggle-damage\\', $event)\"\\n            />\\n          </div>\\n          <div v-if=\"settings.enableDamageCalculation\" class=\"gc-expand-icon\">\\n            <i class=\"fa-solid\" :class=\"isDamageExpanded ? \\'fa-chevron-up\\' : \\'fa-chevron-down\\'\"></i>\\n          </div>\\n        </div>\\n      </div>\\n\\n      \\x3c!-- 损害计算设置 --\\x3e\\n      <transition name=\"slide\">\\n        <div v-if=\"settings.enableDamageCalculation && isDamageExpanded\" class=\"gc-extension-settings\">\\n          <div class=\"gc-setting-item\">\\n            <label>默认场景</label>\\n            <select class=\"gc-input\" :value=\"settings.damageScenario\" @change=\"$emit(\\'update:setting\\', \\'damageScenario\\', ($event.target as HTMLSelectElement).value)\">\\n              <option\\n                v-for=\"scenario in damageScenarios\"\\n                :key=\"scenario.id\"\\n                :value=\"scenario.id\"\\n              >\\n                {{ scenario.name }} ({{ scenario.density.toLocaleString() }}人/km²)\\n              </option>\\n            </select>\\n          </div>\\n          \\n          <div class=\"gc-setting-toggle\">\\n            <label>\\n              <span>注入损害提示词</span>\\n              <small>在提示词中包含损害计算结果</small>\\n            </label>\\n            <GcSwitch\\n              size=\"sm\"\\n              :model-value=\"settings.injectDamagePrompt\"\\n              @update:model-value=\"$emit(\\'update:setting\\', \\'injectDamagePrompt\\', $event)\"\\n            />\\n          </div>\\n          \\n          <div class=\"gc-setting-toggle\">\\n            <label>\\n              <span>显示特殊效应</span>\\n              <small>地震、海啸等物理效应</small>\\n            </label>\\n            <GcSwitch\\n              size=\"sm\"\\n              :model-value=\"settings.showSpecialEffects\"\\n              @update:model-value=\"$emit(\\'update:setting\\', \\'showSpecialEffects\\', $event)\"\\n            />\\n          </div>\\n          \\n          <div class=\"gc-setting-toggle\">\\n            <label>\\n              <span>按角色显示损害</span>\\n              <small>在角色卡片中显示损害数据</small>\\n            </label>\\n            <GcSwitch\\n              size=\"sm\"\\n              :model-value=\"settings.showDamagePerCharacter\"\\n              @update:model-value=\"$emit(\\'update:setting\\', \\'showDamagePerCharacter\\', $event)\"\\n            />\\n          </div>\\n          \\n          <div class=\"gc-setting-toggle\">\\n            <label>\\n              <span>显示损害汇总</span>\\n              <small>所有角色的损害统计</small>\\n            </label>\\n            <GcSwitch\\n              size=\"sm\"\\n              :model-value=\"settings.showDamageSummary\"\\n              @update:model-value=\"$emit(\\'update:setting\\', \\'showDamageSummary\\', $event)\"\\n            />\\n          </div>\\n          \\n          \\x3c!-- 损害预览 --\\x3e\\n          <div v-if=\"damageSummary\" class=\"gc-damage-preview\">\\n            <div class=\"gc-damage-preview-header\">\\n              <i class=\"fa-solid fa-chart-bar\"></i>\\n              <span>当前汇总</span>\\n            </div>\\n            <div class=\"gc-damage-preview-content\">\\n              <div class=\"gc-damage-stat\">\\n                <span class=\"gc-damage-label\">巨大娘数量</span>\\n                <span class=\"gc-damage-value\">{{ damageSummary.giantCount }}</span>\\n              </div>\\n              <div class=\"gc-damage-stat\">\\n                <span class=\"gc-damage-label\">预估单步伤亡</span>\\n                <span class=\"gc-damage-value casualties\">\\n                  {{ formatDamageRange(damageSummary.totalCasualties) }}\\n                </span>\\n              </div>\\n              <div class=\"gc-damage-stat\">\\n                <span class=\"gc-damage-label\">预估建筑损毁</span>\\n                <span class=\"gc-damage-value buildings\">\\n                  {{ formatDamageRange(damageSummary.totalBuildings) }}\\n                </span>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </transition>\\n      </div>\\n    </transition>\\n  </div>\\n</template>\\n\\n<script setup lang=\"ts\">\\nimport { ref, watch } from \\'vue\\';\\nimport { GcSwitch, GcBadge } from \\'../components\\';\\nimport type { Settings, DamageSummary } from \\'../../types\\';\\n\\nconst props = defineProps<{\\n  settings: Settings;\\n  damageSummary: DamageSummary | null;\\n  damageScenarios: Array<{ id: string; name: string; density: number }>;\\n}>();\\n\\ndefineEmits<{\\n  (e: \\'toggle-damage\\', value: boolean): void;\\n  (e: \\'update:setting\\', key: keyof Settings, value: unknown): void;\\n}>();\\n\\n// 状态控制\\nconst isSectionCollapsed = ref(false);\\nconst isDamageExpanded = ref(true);\\n\\n// 当启用损害计算时，自动展开设置\\nwatch(() => props.settings.enableDamageCalculation, (val) => {\\n  if (val) isDamageExpanded.value = true;\\n});\\n\\nconst formatDamageRange = (range: { min: number; max: number } | undefined) => {\\n  if (!range) return \\'-\\';\\n  const formatNum = (n: number) => {\\n    if (n >= 1000000) return `${(n / 1000000).toFixed(1)}M`;\\n    if (n >= 1000) return `${(n / 1000).toFixed(1)}K`;\\n    return n.toString();\\n  };\\n  return `${formatNum(range.min)} - ${formatNum(range.max)}`;\\n};\\n<\\/script>\\n\\n<style scoped>\\n.gc-extensions {\\n  margin-top: 16px;\\n}\\n\\n.gc-section-header {\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  padding: 8px 0;\\n  font-size: 0.9em;\\n  font-weight: 600;\\n  margin-bottom: 4px;\\n  color: var(--gc-text-muted, #94a3b8);\\n  cursor: pointer;\\n  user-select: none;\\n  transition: color 0.2s;\\n}\\n\\n.gc-section-header:hover {\\n  color: var(--gc-text, #f1f5f9);\\n}\\n\\n.gc-section-header.clickable:hover .gc-header-left {\\n  color: var(--gc-primary, #f472b6);\\n}\\n\\n.gc-header-left {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  transition: color 0.2s;\\n}\\n\\n.gc-chevron {\\n  font-size: 0.8em;\\n  opacity: 0.7;\\n  transition: transform 0.2s;\\n}\\n\\n.gc-section-header i {\\n  color: var(--gc-primary, #f472b6);\\n}\\n\\n.gc-extension-list {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 8px;\\n}\\n\\n.gc-extension-item {\\n  display: flex;\\n  align-items: center;\\n  gap: 12px;\\n  padding: 10px 12px;\\n  background: rgba(0, 0, 0, 0.2);\\n  border-radius: 8px;\\n  border: 1px solid transparent;\\n  transition: all 0.2s;\\n}\\n\\n.gc-extension-item:hover {\\n  background: rgba(0, 0, 0, 0.3);\\n}\\n\\n.gc-extension-item.clickable {\\n  cursor: pointer;\\n}\\n\\n.gc-extension-item.core {\\n  border-color: rgba(52, 211, 153, 0.2);\\n}\\n\\n.gc-extension-item.active {\\n  border-color: rgba(244, 114, 182, 0.3);\\n}\\n\\n.gc-extension-icon {\\n  width: 36px;\\n  height: 36px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  background: rgba(255, 255, 255, 0.05);\\n  border-radius: 8px;\\n  color: var(--gc-text-muted, #94a3b8);\\n}\\n\\n.gc-extension-item.core .gc-extension-icon {\\n  background: rgba(52, 211, 153, 0.1);\\n  color: #34d399;\\n}\\n\\n.gc-extension-icon.damage {\\n  background: rgba(239, 68, 68, 0.1);\\n  color: #f87171;\\n}\\n\\n.gc-extension-item.active .gc-extension-icon.damage {\\n  color: #ef4444;\\n}\\n\\n.gc-extension-info {\\n  flex: 1;\\n  min-width: 0;\\n}\\n\\n.gc-extension-name {\\n  display: flex;\\n  align-items: center;\\n  gap: 6px;\\n  font-weight: 500;\\n  font-size: 0.9em;\\n  margin-bottom: 2px;\\n}\\n\\n.gc-extension-desc {\\n  font-size: 0.8em;\\n  color: var(--gc-text-muted, #94a3b8);\\n}\\n\\n.gc-extension-toggle {\\n  flex-shrink: 0;\\n  display: flex;\\n  align-items: center;\\n  gap: 12px;\\n}\\n\\n.gc-switch-wrapper {\\n  display: flex;\\n  align-items: center;\\n}\\n\\n.gc-expand-icon {\\n  width: 20px;\\n  display: flex;\\n  justify-content: center;\\n  color: var(--gc-text-muted, #94a3b8);\\n  font-size: 0.8em;\\n  opacity: 0.7;\\n}\\n\\n.gc-always-on {\\n  font-size: 0.75em;\\n  color: #34d399;\\n  padding: 2px 8px;\\n  background: rgba(52, 211, 153, 0.1);\\n  border-radius: 4px;\\n}\\n\\n.gc-extension-settings {\\n  padding: 12px;\\n  background: rgba(0, 0, 0, 0.15);\\n  border-radius: 8px;\\n  margin-left: 48px;\\n  display: flex;\\n  flex-direction: column;\\n  gap: 10px;\\n}\\n\\n.gc-setting-item {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 6px;\\n}\\n\\n.gc-setting-item label {\\n  font-size: 0.85em;\\n  color: var(--gc-text-muted, #94a3b8);\\n}\\n\\n.gc-input {\\n  width: 100%;\\n  padding: 6px 10px;\\n  background: rgba(0, 0, 0, 0.2);\\n  border: 1px solid var(--gc-border, rgba(255, 255, 255, 0.1));\\n  border-radius: 6px;\\n  color: var(--gc-text, #f1f5f9);\\n  font-size: 0.85em;\\n}\\n\\n.gc-setting-toggle {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: flex-start;\\n  padding: 6px 0;\\n}\\n\\n.gc-setting-toggle label {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 2px;\\n}\\n\\n.gc-setting-toggle label span {\\n  font-size: 0.85em;\\n  font-weight: 500;\\n}\\n\\n.gc-setting-toggle label small {\\n  font-size: 0.75em;\\n  color: var(--gc-text-muted, #94a3b8);\\n}\\n\\n.gc-damage-preview {\\n  margin-top: 8px;\\n  padding: 10px;\\n  background: rgba(239, 68, 68, 0.1);\\n  border-radius: 6px;\\n}\\n\\n.gc-damage-preview-header {\\n  display: flex;\\n  align-items: center;\\n  gap: 6px;\\n  font-size: 0.85em;\\n  font-weight: 500;\\n  margin-bottom: 8px;\\n  color: #f87171;\\n}\\n\\n.gc-damage-preview-content {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 4px;\\n}\\n\\n.gc-damage-stat {\\n  display: flex;\\n  justify-content: space-between;\\n  font-size: 0.8em;\\n}\\n\\n.gc-damage-label {\\n  color: var(--gc-text-muted, #94a3b8);\\n}\\n\\n.gc-damage-value {\\n  font-weight: 500;\\n}\\n\\n.gc-damage-value.casualties {\\n  color: #f87171;\\n}\\n\\n.gc-damage-value.buildings {\\n  color: #fbbf24;\\n}\\n\\n.slide-enter-active,\\n.slide-leave-active {\\n  transition: all 0.3s ease;\\n}\\n\\n.slide-enter-from,\\n.slide-leave-to {\\n  opacity: 0;\\n  max-height: 0;\\n  padding-top: 0;\\n  padding-bottom: 0;\\n  margin-top: 0;\\n}\\n\\n.slide-enter-to,\\n.slide-leave-from {\\n  max-height: 1000px;\\n}\\n</style>\\n'],sourceRoot:''}]);const s=o},65(e,n,a){a.r(n),a.d(n,{default:()=>s});var t=a(699),c=a.n(t),i=a(465),o=a.n(i)()(c());o.push([e.id,'.gc-btn[data-v-7bc235a6]{display:inline-flex;align-items:center;justify-content:center;gap:6px;padding:8px 14px;background:rgba(255,255,255,0.05);border:1px solid var(--gc-border,rgba(255,255,255,0.1));border-radius:8px;color:var(--gc-text,#f1f5f9);font-weight:500;font-size:0.85em;cursor:pointer;transition:all 0.2s}.gc-btn[data-v-7bc235a6]:hover{background:rgba(255,255,255,0.1)}.gc-btn-primary[data-v-7bc235a6]{background:var(--gc-primary,#f472b6);border-color:var(--gc-primary,#f472b6);color:white}.gc-btn-primary[data-v-7bc235a6]:hover{background:var(--gc-primary-hover,#ec4899)}.gc-btn-danger[data-v-7bc235a6]{background:rgba(239,68,68,0.1);border-color:rgba(239,68,68,0.3);color:#f87171}.gc-btn-danger[data-v-7bc235a6]:hover{background:rgba(239,68,68,0.2)}.gc-btn-link[data-v-7bc235a6]{background:transparent;border:none;color:var(--gc-text-muted,#94a3b8);padding:4px 8px}.gc-btn-link[data-v-7bc235a6]:hover{color:var(--gc-text,#f1f5f9)}.gc-btn-sm[data-v-7bc235a6]{padding:6px 10px;font-size:0.8em}.gc-btn-icon[data-v-7bc235a6]{width:36px;height:36px;padding:0;border-radius:8px}.gc-btn-icon-sm[data-v-7bc235a6]{width:28px;height:28px;padding:0;font-size:0.8em;border-radius:6px}.gc-btn-icon-xs[data-v-7bc235a6]{width:20px;height:20px;padding:0;font-size:0.7em;border-radius:4px}.gc-btn[data-v-7bc235a6]:disabled{opacity:0.5;cursor:not-allowed}.gc-btn.active[data-v-7bc235a6]{background:var(--gc-primary,#f472b6);color:white}\\n','',{version:3,sources:['webpack://./src/ui/components/GcButton.vue'],names:[],mappings:'AA+BA,yBACE,mBAAoB,CACpB,kBAAmB,CACnB,sBAAuB,CACvB,OAAQ,CACR,gBAAiB,CACjB,iCAAqC,CACrC,uDAA4D,CAC5D,iBAAkB,CAClB,4BAA8B,CAC9B,eAAgB,CAChB,gBAAiB,CACjB,cAAe,CACf,mBACF,CAEA,+BACE,gCACF,CAEA,iCACE,oCAAsC,CACtC,sCAAwC,CACxC,WACF,CAEA,uCACE,0CACF,CAEA,gCACE,8BAAkC,CAClC,gCAAoC,CACpC,aACF,CAEA,sCACE,8BACF,CAEA,8BACE,sBAAuB,CACvB,WAAY,CACZ,kCAAoC,CACpC,eACF,CAEA,oCACE,4BACF,CAEA,4BACE,gBAAiB,CACjB,eACF,CAEA,8BACE,UAAW,CACX,WAAY,CACZ,SAAU,CACV,iBACF,CAEA,iCACE,UAAW,CACX,WAAY,CACZ,SAAU,CACV,eAAgB,CAChB,iBACF,CAEA,iCACE,UAAW,CACX,WAAY,CACZ,SAAU,CACV,eAAgB,CAChB,iBACF,CAEA,kCACE,WAAY,CACZ,kBACF,CAEA,gCACE,oCAAsC,CACtC,WACF',sourcesContent:['<template>\\n  <button\\n    class=\"gc-btn\"\\n    :class=\"[\\n      variant && `gc-btn-${variant}`,\\n      size && `gc-btn-${size}`,\\n      { active, disabled }\\n    ]\"\\n    :disabled=\"disabled\"\\n    @click=\"$emit(\\'click\\', $event)\"\\n  >\\n    <i v-if=\"icon\" :class=\"icon\"></i>\\n    <slot></slot>\\n  </button>\\n</template>\\n\\n<script setup lang=\"ts\">\\ndefineProps<{\\n  variant?: \\'primary\\' | \\'danger\\' | \\'link\\' | \\'icon\\' | \\'icon-sm\\' | \\'icon-xs\\';\\n  size?: \\'sm\\' | \\'md\\';\\n  icon?: string;\\n  active?: boolean;\\n  disabled?: boolean;\\n}>();\\n\\ndefineEmits<{\\n  (e: \\'click\\', event: MouseEvent): void;\\n}>();\\n<\\/script>\\n\\n<style scoped>\\n.gc-btn {\\n  display: inline-flex;\\n  align-items: center;\\n  justify-content: center;\\n  gap: 6px;\\n  padding: 8px 14px;\\n  background: rgba(255, 255, 255, 0.05);\\n  border: 1px solid var(--gc-border, rgba(255, 255, 255, 0.1));\\n  border-radius: 8px;\\n  color: var(--gc-text, #f1f5f9);\\n  font-weight: 500;\\n  font-size: 0.85em;\\n  cursor: pointer;\\n  transition: all 0.2s;\\n}\\n\\n.gc-btn:hover {\\n  background: rgba(255, 255, 255, 0.1);\\n}\\n\\n.gc-btn-primary {\\n  background: var(--gc-primary, #f472b6);\\n  border-color: var(--gc-primary, #f472b6);\\n  color: white;\\n}\\n\\n.gc-btn-primary:hover {\\n  background: var(--gc-primary-hover, #ec4899);\\n}\\n\\n.gc-btn-danger {\\n  background: rgba(239, 68, 68, 0.1);\\n  border-color: rgba(239, 68, 68, 0.3);\\n  color: #f87171;\\n}\\n\\n.gc-btn-danger:hover {\\n  background: rgba(239, 68, 68, 0.2);\\n}\\n\\n.gc-btn-link {\\n  background: transparent;\\n  border: none;\\n  color: var(--gc-text-muted, #94a3b8);\\n  padding: 4px 8px;\\n}\\n\\n.gc-btn-link:hover {\\n  color: var(--gc-text, #f1f5f9);\\n}\\n\\n.gc-btn-sm {\\n  padding: 6px 10px;\\n  font-size: 0.8em;\\n}\\n\\n.gc-btn-icon {\\n  width: 36px;\\n  height: 36px;\\n  padding: 0;\\n  border-radius: 8px;\\n}\\n\\n.gc-btn-icon-sm {\\n  width: 28px;\\n  height: 28px;\\n  padding: 0;\\n  font-size: 0.8em;\\n  border-radius: 6px;\\n}\\n\\n.gc-btn-icon-xs {\\n  width: 20px;\\n  height: 20px;\\n  padding: 0;\\n  font-size: 0.7em;\\n  border-radius: 4px;\\n}\\n\\n.gc-btn:disabled {\\n  opacity: 0.5;\\n  cursor: not-allowed;\\n}\\n\\n.gc-btn.active {\\n  background: var(--gc-primary, #f472b6);\\n  color: white;\\n}\\n</style>\\n'],sourceRoot:''}]);const s=o},134(e,n,a){var t=a(9);t.__esModule&&(t=t.default),'string'==typeof t&&(t=[[e.id,t,'']]),t.locals&&(e.exports=t.locals);(0,a(424).A)('74633356',t,!1,{ssrId:!0})},139(e,n,a){a.r(n),a.d(n,{default:()=>s});var t=a(699),c=a.n(t),i=a(465),o=a.n(i)()(c());o.push([e.id,'.gc-result[data-v-5651f202]{--gc-giant-color:#fb923c;--gc-tiny-color:#60a5fa;--gc-bg:rgba(30,41,59,0.7);--gc-border:rgba(255,255,255,0.1);background:var(--gc-bg);border:1px solid var(--gc-border);border-radius:12px;overflow:hidden;margin-bottom:16px;transition:transform 0.2s,box-shadow 0.2s;backdrop-filter:blur(8px)}.gc-result[data-v-5651f202]:hover{transform:translateY(-2px);box-shadow:0 8px 16px -4px rgba(0,0,0,0.2)}.gc-result.giant[data-v-5651f202]{border-left:4px solid var(--gc-giant-color)}.gc-result.tiny[data-v-5651f202]{border-left:4px solid var(--gc-tiny-color)}.gc-result-header[data-v-5651f202]{padding:16px;display:flex;align-items:center;gap:16px;border-bottom:1px solid var(--gc-border);background:rgba(255,255,255,0.03);position:relative}.gc-result-close[data-v-5651f202]{position:absolute;top:8px;right:8px;width:28px;height:28px;border:none;border-radius:6px;background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.5);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.2s}.gc-result-close[data-v-5651f202]:hover{background:rgba(239,68,68,0.2);color:#ef4444}.gc-result-icon-wrapper[data-v-5651f202]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.5em;flex-shrink:0;background:rgba(255,255,255,0.05)}.gc-result.giant .gc-result-icon-wrapper[data-v-5651f202]{color:var(--gc-giant-color);background:rgba(251,146,60,0.1)}.gc-result.tiny .gc-result-icon-wrapper[data-v-5651f202]{color:var(--gc-tiny-color);background:rgba(96,165,250,0.1)}.gc-result-title[data-v-5651f202]{flex:1}.gc-result-height[data-v-5651f202]{font-size:1.5em;font-weight:700;line-height:1.2;color:var(--smart-text-color,#e2e8f0);letter-spacing:-0.02em}.gc-result-meta[data-v-5651f202]{display:flex;align-items:center;gap:8px;margin-top:4px;font-size:0.85em}.gc-badge[data-v-5651f202]{padding:2px 8px;border-radius:6px;font-weight:600;text-transform:uppercase;font-size:0.85em}.gc-badge.giant[data-v-5651f202]{background:rgba(251,146,60,0.2);color:var(--gc-giant-color)}.gc-badge.tiny[data-v-5651f202]{background:rgba(96,165,250,0.2);color:var(--gc-tiny-color)}.gc-multiplier[data-v-5651f202]{color:var(--smart-text-muted-color,#94a3b8);font-family:\\'JetBrains Mono\\',monospace}.gc-result-body[data-v-5651f202]{padding:16px}.gc-level-desc[data-v-5651f202]{font-size:0.9em;color:var(--smart-text-muted-color,#94a3b8);margin-bottom:12px;font-style:italic;display:flex;gap:8px}.gc-level-desc i[data-v-5651f202]{opacity:0.5;margin-top:2px}.gc-result-desc[data-v-5651f202]{font-size:0.95em;line-height:1.6;color:var(--smart-text-color,#e2e8f0);white-space:pre-wrap}\\n','',{version:3,sources:['webpack://./src/ui/Result.vue'],names:[],mappings:'AAgDA,4BACE,wBAAyB,CACzB,uBAAwB,CACxB,0BAA8B,CAC9B,iCAAqC,CAErC,uBAAwB,CACxB,iCAAkC,CAClC,kBAAmB,CACnB,eAAgB,CAChB,kBAAmB,CACnB,yCAA2C,CAC3C,yBACF,CAEA,kCACE,0BAA2B,CAC3B,0CACF,CAEA,kCACE,2CACF,CAEA,iCACE,0CACF,CAEA,mCACE,YAAa,CACb,YAAa,CACb,kBAAmB,CACnB,QAAS,CACT,wCAAyC,CACzC,iCAAqC,CACrC,iBACF,CAEA,kCACE,iBAAkB,CAClB,OAAQ,CACR,SAAU,CACV,UAAW,CACX,WAAY,CACZ,WAAY,CACZ,iBAAkB,CAClB,iCAAqC,CACrC,2BAA+B,CAC/B,cAAe,CACf,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,mBACF,CAEA,wCACE,8BAAkC,CAClC,aACF,CAEA,yCACE,UAAW,CACX,WAAY,CACZ,kBAAmB,CACnB,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,eAAgB,CAChB,aAAc,CACd,iCACF,CAEA,0DACE,2BAA4B,CAC5B,+BACF,CAEA,yDACE,0BAA2B,CAC3B,+BACF,CAEA,kCACE,MACF,CAEA,mCACE,eAAgB,CAChB,eAAgB,CAChB,eAAgB,CAChB,qCAAuC,CACvC,sBACF,CAEA,iCACE,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,cAAe,CACf,gBACF,CAEA,2BACE,eAAgB,CAChB,iBAAkB,CAClB,eAAgB,CAChB,wBAAyB,CACzB,gBACF,CAEA,iCACE,+BAAmC,CACnC,2BACF,CAEA,gCACE,+BAAmC,CACnC,0BACF,CAEA,gCACE,2CAA6C,CAC7C,sCACF,CAEA,iCACE,YACF,CAEA,gCACE,eAAgB,CAChB,2CAA6C,CAC7C,kBAAmB,CACnB,iBAAkB,CAClB,YAAa,CACb,OACF,CAEA,kCACE,WAAY,CACZ,cACF,CAEA,iCACE,gBAAiB,CACjB,eAAgB,CAChB,qCAAuC,CACvC,oBACF',sourcesContent:['<template>\\n  <div class=\"gc-result\" :class=\"isGiant ? \\'giant\\' : \\'tiny\\'\">\\n    <div class=\"gc-result-header\">\\n      <div class=\"gc-result-icon-wrapper\">\\n        <i class=\"fa-solid\" :class=\"isGiant ? \\'fa-ruler-vertical\\' : \\'fa-microscope\\'\"></i>\\n      </div>\\n      <div class=\"gc-result-title\">\\n        <div class=\"gc-result-height\">\\n          {{ result.当前身高_格式化 }}\\n        </div>\\n        <div class=\"gc-result-meta\">\\n          <span class=\"gc-badge\" :class=\"isGiant ? \\'giant\\' : \\'tiny\\'\">\\n            {{ result.级别 }}\\n          </span>\\n          <span class=\"gc-multiplier\">\\n            <i class=\"fa-solid fa-xmark\"></i> {{ result.倍率 }}\\n          </span>\\n        </div>\\n      </div>\\n      <button class=\"gc-result-close\" @click=\"$emit(\\'close\\')\" title=\"关闭\">\\n        <i class=\"fa-solid fa-times\"></i>\\n      </button>\\n    </div>\\n    \\n    <div class=\"gc-result-body\">\\n      <div class=\"gc-level-desc\">\\n        <i class=\"fa-solid fa-quote-left\"></i>\\n        {{ result.级别描述 }}\\n      </div>\\n      <div class=\"gc-result-desc\">{{ result.描述 }}</div>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\"ts\">\\nimport type { GiantessData, TinyData } from \\'../core\\';\\n\\ndefineProps<{\\n  result: GiantessData | TinyData;\\n  isGiant: boolean;\\n}>();\\n\\ndefineEmits<{\\n  (e: \\'close\\'): void;\\n}>();\\n<\\/script>\\n\\n<style scoped>\\n.gc-result {\\n  --gc-giant-color: #fb923c;\\n  --gc-tiny-color: #60a5fa;\\n  --gc-bg: rgba(30, 41, 59, 0.7);\\n  --gc-border: rgba(255, 255, 255, 0.1);\\n  \\n  background: var(--gc-bg);\\n  border: 1px solid var(--gc-border);\\n  border-radius: 12px;\\n  overflow: hidden;\\n  margin-bottom: 16px;\\n  transition: transform 0.2s, box-shadow 0.2s;\\n  backdrop-filter: blur(8px);\\n}\\n\\n.gc-result:hover {\\n  transform: translateY(-2px);\\n  box-shadow: 0 8px 16px -4px rgba(0, 0, 0, 0.2);\\n}\\n\\n.gc-result.giant {\\n  border-left: 4px solid var(--gc-giant-color);\\n}\\n\\n.gc-result.tiny {\\n  border-left: 4px solid var(--gc-tiny-color);\\n}\\n\\n.gc-result-header {\\n  padding: 16px;\\n  display: flex;\\n  align-items: center;\\n  gap: 16px;\\n  border-bottom: 1px solid var(--gc-border);\\n  background: rgba(255, 255, 255, 0.03);\\n  position: relative;\\n}\\n\\n.gc-result-close {\\n  position: absolute;\\n  top: 8px;\\n  right: 8px;\\n  width: 28px;\\n  height: 28px;\\n  border: none;\\n  border-radius: 6px;\\n  background: rgba(255, 255, 255, 0.05);\\n  color: rgba(255, 255, 255, 0.5);\\n  cursor: pointer;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  transition: all 0.2s;\\n}\\n\\n.gc-result-close:hover {\\n  background: rgba(239, 68, 68, 0.2);\\n  color: #ef4444;\\n}\\n\\n.gc-result-icon-wrapper {\\n  width: 48px;\\n  height: 48px;\\n  border-radius: 12px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  font-size: 1.5em;\\n  flex-shrink: 0;\\n  background: rgba(255, 255, 255, 0.05);\\n}\\n\\n.gc-result.giant .gc-result-icon-wrapper {\\n  color: var(--gc-giant-color);\\n  background: rgba(251, 146, 60, 0.1);\\n}\\n\\n.gc-result.tiny .gc-result-icon-wrapper {\\n  color: var(--gc-tiny-color);\\n  background: rgba(96, 165, 250, 0.1);\\n}\\n\\n.gc-result-title {\\n  flex: 1;\\n}\\n\\n.gc-result-height {\\n  font-size: 1.5em;\\n  font-weight: 700;\\n  line-height: 1.2;\\n  color: var(--smart-text-color, #e2e8f0);\\n  letter-spacing: -0.02em;\\n}\\n\\n.gc-result-meta {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  margin-top: 4px;\\n  font-size: 0.85em;\\n}\\n\\n.gc-badge {\\n  padding: 2px 8px;\\n  border-radius: 6px;\\n  font-weight: 600;\\n  text-transform: uppercase;\\n  font-size: 0.85em;\\n}\\n\\n.gc-badge.giant {\\n  background: rgba(251, 146, 60, 0.2);\\n  color: var(--gc-giant-color);\\n}\\n\\n.gc-badge.tiny {\\n  background: rgba(96, 165, 250, 0.2);\\n  color: var(--gc-tiny-color);\\n}\\n\\n.gc-multiplier {\\n  color: var(--smart-text-muted-color, #94a3b8);\\n  font-family: \\'JetBrains Mono\\', monospace;\\n}\\n\\n.gc-result-body {\\n  padding: 16px;\\n}\\n\\n.gc-level-desc {\\n  font-size: 0.9em;\\n  color: var(--smart-text-muted-color, #94a3b8);\\n  margin-bottom: 12px;\\n  font-style: italic;\\n  display: flex;\\n  gap: 8px;\\n}\\n\\n.gc-level-desc i {\\n  opacity: 0.5;\\n  margin-top: 2px;\\n}\\n\\n.gc-result-desc {\\n  font-size: 0.95em;\\n  line-height: 1.6;\\n  color: var(--smart-text-color, #e2e8f0);\\n  white-space: pre-wrap;\\n}\\n</style>'],sourceRoot:''}]);const s=o},152(e,n,a){var t=a(176);t.__esModule&&(t=t.default),'string'==typeof t&&(t=[[e.id,t,'']]),t.locals&&(e.exports=t.locals);(0,a(424).A)('f75aac88',t,!1,{ssrId:!0})},175(e,n,a){var t=a(926);t.__esModule&&(t=t.default),'string'==typeof t&&(t=[[e.id,t,'']]),t.locals&&(e.exports=t.locals);(0,a(424).A)('700a4cf8',t,!1,{ssrId:!0})},176(e,n,a){a.r(n),a.d(n,{default:()=>s});var t=a(699),c=a.n(t),i=a(465),o=a.n(i)()(c());o.push([e.id,'.gc-debug-logs-section[data-v-4e1480de]{display:flex;flex-direction:column;height:100%}.gc-debug-logs-header[data-v-4e1480de]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.gc-debug-logs-header h3[data-v-4e1480de]{display:flex;align-items:center;gap:8px;font-size:0.9em;font-weight:600;color:var(--gc-text,#f1f5f9)}.gc-debug-logs-header h3 i[data-v-4e1480de]{color:var(--gc-primary,#f472b6)}.gc-btn-link[data-v-4e1480de]{background:transparent;border:none;color:var(--gc-text-muted,#94a3b8);cursor:pointer;padding:4px 8px}.gc-btn-link[data-v-4e1480de]:hover{color:var(--gc-text,#f1f5f9)}.gc-debug-logs[data-v-4e1480de]{flex:1;background:rgba(0,0,0,0.3);border-radius:8px;padding:10px;font-family:\\'Monaco\\',\\'Menlo\\',monospace;font-size:0.8em;max-height:400px;overflow-y:auto}.gc-debug-log-item[data-v-4e1480de]{display:flex;gap:10px;padding:4px 0;border-bottom:1px solid rgba(255,255,255,0.05)}.gc-debug-log-item[data-v-4e1480de]:last-child{border-bottom:none}.gc-debug-log-item.warn[data-v-4e1480de]{color:#fbbf24}.gc-debug-log-item.error[data-v-4e1480de]{color:#f87171}.gc-log-time[data-v-4e1480de]{color:var(--gc-text-muted,#94a3b8);white-space:nowrap}.gc-log-msg[data-v-4e1480de]{word-break:break-all;color:var(--gc-text,#f1f5f9)}.gc-debug-empty[data-v-4e1480de]{display:flex;flex-direction:column;align-items:center;padding:40px 20px;text-align:center}.gc-debug-empty i[data-v-4e1480de]{font-size:2em;color:var(--gc-text-muted,#94a3b8);margin-bottom:12px}.gc-debug-empty p[data-v-4e1480de]{font-size:0.9em;margin-bottom:6px}.gc-debug-empty small[data-v-4e1480de]{font-size:0.8em;color:var(--gc-text-muted,#94a3b8)}\\n','',{version:3,sources:['webpack://./src/ui/features/debug/DebugLogsSection.vue'],names:[],mappings:'AAwCA,wCACE,YAAa,CACb,qBAAsB,CACtB,WACF,CAEA,uCACE,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,kBACF,CAEA,0CACE,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,eAAgB,CAChB,eAAgB,CAChB,4BACF,CAEA,4CACE,+BACF,CAEA,8BACE,sBAAuB,CACvB,WAAY,CACZ,kCAAoC,CACpC,cAAe,CACf,eACF,CAEA,oCACE,4BACF,CAEA,gCACE,MAAO,CACP,0BAA8B,CAC9B,iBAAkB,CAClB,YAAa,CACb,sCAAyC,CACzC,eAAgB,CAChB,gBAAiB,CACjB,eACF,CAEA,oCACE,YAAa,CACb,QAAS,CACT,aAAc,CACd,8CACF,CAEA,+CACE,kBACF,CAEA,yCACE,aACF,CAEA,0CACE,aACF,CAEA,8BACE,kCAAoC,CACpC,kBACF,CAEA,6BACE,oBAAqB,CACrB,4BACF,CAEA,iCACE,YAAa,CACb,qBAAsB,CACtB,kBAAmB,CACnB,iBAAkB,CAClB,iBACF,CAEA,mCACE,aAAc,CACd,kCAAoC,CACpC,kBACF,CAEA,mCACE,eAAgB,CAChB,iBACF,CAEA,uCACE,eAAgB,CAChB,kCACF',sourcesContent:['<template>\\n  <div class=\"gc-debug-logs-section\">\\n    <div class=\"gc-debug-logs-header\">\\n      <h3><i class=\"fa-solid fa-terminal\"></i> 调试日志</h3>\\n      <button class=\"gc-btn-link\" @click=\"$emit(\\'clear\\')\" title=\"清空日志\">\\n        <i class=\"fa-solid fa-trash\"></i>\\n      </button>\\n    </div>\\n    \\n    <div class=\"gc-debug-logs\">\\n      <div \\n        v-for=\"(log, i) in logs\" \\n        :key=\"i\" \\n        class=\"gc-debug-log-item\"\\n        :class=\"log.level\"\\n      >\\n        <span class=\"gc-log-time\">{{ log.time }}</span>\\n        <span class=\"gc-log-msg\">{{ log.message }}</span>\\n      </div>\\n      \\n      <div v-if=\"!logs.length\" class=\"gc-debug-empty\">\\n        <i class=\"fa-solid fa-terminal\"></i>\\n        <p>暂无日志</p>\\n        <small>开启调试模式后操作会记录在这里</small>\\n      </div>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\"ts\">\\ndefineProps<{\\n  logs: Array<{ time: string; message: string; level?: string }>;\\n}>();\\n\\ndefineEmits<{\\n  (e: \\'clear\\'): void;\\n}>();\\n<\\/script>\\n\\n<style scoped>\\n.gc-debug-logs-section {\\n  display: flex;\\n  flex-direction: column;\\n  height: 100%;\\n}\\n\\n.gc-debug-logs-header {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  margin-bottom: 10px;\\n}\\n\\n.gc-debug-logs-header h3 {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  font-size: 0.9em;\\n  font-weight: 600;\\n  color: var(--gc-text, #f1f5f9);\\n}\\n\\n.gc-debug-logs-header h3 i {\\n  color: var(--gc-primary, #f472b6);\\n}\\n\\n.gc-btn-link {\\n  background: transparent;\\n  border: none;\\n  color: var(--gc-text-muted, #94a3b8);\\n  cursor: pointer;\\n  padding: 4px 8px;\\n}\\n\\n.gc-btn-link:hover {\\n  color: var(--gc-text, #f1f5f9);\\n}\\n\\n.gc-debug-logs {\\n  flex: 1;\\n  background: rgba(0, 0, 0, 0.3);\\n  border-radius: 8px;\\n  padding: 10px;\\n  font-family: \\'Monaco\\', \\'Menlo\\', monospace;\\n  font-size: 0.8em;\\n  max-height: 400px;\\n  overflow-y: auto;\\n}\\n\\n.gc-debug-log-item {\\n  display: flex;\\n  gap: 10px;\\n  padding: 4px 0;\\n  border-bottom: 1px solid rgba(255, 255, 255, 0.05);\\n}\\n\\n.gc-debug-log-item:last-child {\\n  border-bottom: none;\\n}\\n\\n.gc-debug-log-item.warn {\\n  color: #fbbf24;\\n}\\n\\n.gc-debug-log-item.error {\\n  color: #f87171;\\n}\\n\\n.gc-log-time {\\n  color: var(--gc-text-muted, #94a3b8);\\n  white-space: nowrap;\\n}\\n\\n.gc-log-msg {\\n  word-break: break-all;\\n  color: var(--gc-text, #f1f5f9);\\n}\\n\\n.gc-debug-empty {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  padding: 40px 20px;\\n  text-align: center;\\n}\\n\\n.gc-debug-empty i {\\n  font-size: 2em;\\n  color: var(--gc-text-muted, #94a3b8);\\n  margin-bottom: 12px;\\n}\\n\\n.gc-debug-empty p {\\n  font-size: 0.9em;\\n  margin-bottom: 6px;\\n}\\n\\n.gc-debug-empty small {\\n  font-size: 0.8em;\\n  color: var(--gc-text-muted, #94a3b8);\\n}\\n</style>\\n'],sourceRoot:''}]);const s=o},202(e,n,a){var t=a(901);t.__esModule&&(t=t.default),'string'==typeof t&&(t=[[e.id,t,'']]),t.locals&&(e.exports=t.locals);(0,a(424).A)('49523336',t,!1,{ssrId:!0})},206(e,n,a){a.r(n),a.d(n,{default:()=>s});var t=a(699),c=a.n(t),i=a(465),o=a.n(i)()(c());o.push([e.id,'.gc-switch[data-v-03ff4c3e]{-webkit-appearance:none;appearance:none;width:36px;height:20px;background:rgba(255,255,255,0.1);border-radius:10px;position:relative;cursor:pointer;transition:all 0.2s}.gc-switch[data-v-03ff4c3e]::after{content:\\'\\';position:absolute;width:16px;height:16px;background:white;border-radius:50%;top:2px;left:2px;transition:all 0.2s}.gc-switch[data-v-03ff4c3e]:checked{background:var(--gc-primary,#f472b6)}.gc-switch[data-v-03ff4c3e]:checked::after{left:18px}.gc-switch.sm[data-v-03ff4c3e]{width:28px;height:16px}.gc-switch.sm[data-v-03ff4c3e]::after{width:12px;height:12px}.gc-switch.sm[data-v-03ff4c3e]:checked::after{left:14px}\\n','',{version:3,sources:['webpack://./src/ui/components/GcSwitch.vue'],names:[],mappings:'AAsBA,4BACE,uBAAgB,CAAhB,eAAgB,CAChB,UAAW,CACX,WAAY,CACZ,gCAAoC,CACpC,kBAAmB,CACnB,iBAAkB,CAClB,cAAe,CACf,mBACF,CAEA,mCACE,UAAW,CACX,iBAAkB,CAClB,UAAW,CACX,WAAY,CACZ,gBAAiB,CACjB,iBAAkB,CAClB,OAAQ,CACR,QAAS,CACT,mBACF,CAEA,oCACE,oCACF,CAEA,2CACE,SACF,CAEA,+BACE,UAAW,CACX,WACF,CAEA,sCACE,UAAW,CACX,WACF,CAEA,8CACE,SACF',sourcesContent:['<template>\\n  <input\\n    type=\"checkbox\"\\n    class=\"gc-switch\"\\n    :class=\"{ sm: size === \\'sm\\' }\"\\n    :checked=\"modelValue\"\\n    @change=\"$emit(\\'update:modelValue\\', ($event.target as HTMLInputElement).checked)\"\\n  />\\n</template>\\n\\n<script setup lang=\"ts\">\\ndefineProps<{\\n  modelValue: boolean;\\n  size?: \\'sm\\' | \\'md\\';\\n}>();\\n\\ndefineEmits<{\\n  (e: \\'update:modelValue\\', value: boolean): void;\\n}>();\\n<\\/script>\\n\\n<style scoped>\\n.gc-switch {\\n  appearance: none;\\n  width: 36px;\\n  height: 20px;\\n  background: rgba(255, 255, 255, 0.1);\\n  border-radius: 10px;\\n  position: relative;\\n  cursor: pointer;\\n  transition: all 0.2s;\\n}\\n\\n.gc-switch::after {\\n  content: \\'\\';\\n  position: absolute;\\n  width: 16px;\\n  height: 16px;\\n  background: white;\\n  border-radius: 50%;\\n  top: 2px;\\n  left: 2px;\\n  transition: all 0.2s;\\n}\\n\\n.gc-switch:checked {\\n  background: var(--gc-primary, #f472b6);\\n}\\n\\n.gc-switch:checked::after {\\n  left: 18px;\\n}\\n\\n.gc-switch.sm {\\n  width: 28px;\\n  height: 16px;\\n}\\n\\n.gc-switch.sm::after {\\n  width: 12px;\\n  height: 12px;\\n}\\n\\n.gc-switch.sm:checked::after {\\n  left: 14px;\\n}\\n</style>\\n'],sourceRoot:''}]);const s=o},275(e,n,a){a.r(n),a.d(n,{default:()=>s});var t=a(699),c=a.n(t),i=a(465),o=a.n(i)()(c());o.push([e.id,'.gc-char-list[data-v-142edb12]{display:flex;flex-direction:column;gap:0;max-height:600px;overflow-y:auto;padding-right:4px}.gc-empty[data-v-142edb12]{display:flex;flex-direction:column;align-items:center;gap:16px;color:var(--gc-text-muted,#94a3b8);padding:40px 24px;background:rgba(255,255,255,0.02);border-radius:16px;border:1px dashed var(--gc-border,rgba(255,255,255,0.08))}.gc-damage-section[data-v-142edb12]{background:rgba(249,115,22,0.05);border-radius:8px;padding:12px !important;border:1px solid rgba(249,115,22,0.15)}.gc-damage-section .gc-detail-section-title[data-v-142edb12]{color:#fb923c}.gc-damage-level-badge[data-v-142edb12]{font-size:0.8em;font-weight:500;padding:2px 8px;background:rgba(249,115,22,0.2);color:#fb923c;border-radius:4px;margin-left:auto}.gc-damage-grid[data-v-142edb12]{display:grid;grid-template-columns:repeat(2,1fr);gap:8px;margin-top:8px}.gc-damage-item[data-v-142edb12]{background:rgba(0,0,0,0.2);padding:8px 10px;border-radius:6px}.gc-damage-item-label[data-v-142edb12]{font-size:0.75em;color:var(--gc-text-muted,#94a3b8);margin-bottom:2px}.gc-damage-item-value[data-v-142edb12]{font-size:0.9em;font-weight:500;font-family:var(--gc-font-mono);color:var(--gc-text,#f8fafc)}.gc-damage-item-value.casualties[data-v-142edb12]{color:#f87171}.gc-damage-item-value.buildings[data-v-142edb12]{color:#fbbf24}.gc-macro-damage[data-v-142edb12]{margin-top:10px;padding-top:10px;border-top:1px dashed rgba(249,115,22,0.2)}.gc-macro-damage-title[data-v-142edb12]{font-size:0.8em;font-weight:600;color:#fb923c;display:flex;align-items:center;gap:6px;margin-bottom:6px}.gc-macro-damage-list[data-v-142edb12]{display:flex;flex-wrap:wrap;gap:6px}.gc-macro-damage-list span[data-v-142edb12]{font-size:0.8em;padding:3px 8px;background:rgba(249,115,22,0.15);color:var(--gc-text,#f8fafc);border-radius:4px}.gc-special-effects[data-v-142edb12]{margin-top:10px;padding-top:10px;border-top:1px dashed rgba(249,115,22,0.2)}.gc-special-effects-title[data-v-142edb12]{font-size:0.8em;font-weight:600;color:#60a5fa;display:flex;align-items:center;gap:6px;margin-bottom:6px}.gc-special-effects-list[data-v-142edb12]{display:flex;flex-wrap:wrap;gap:4px}.gc-effect-tag[data-v-142edb12]{font-size:0.75em;padding:2px 6px;background:rgba(96,165,250,0.15);color:#60a5fa;border-radius:4px}.gc-effect-more[data-v-142edb12]{font-size:0.75em;padding:2px 6px;background:rgba(255,255,255,0.1);color:var(--gc-text-muted,#94a3b8);border-radius:4px}.gc-actual-damage-section[data-v-142edb12]{background:rgba(239,68,68,0.05);border-radius:8px;padding:12px !important;border:1px solid rgba(239,68,68,0.2);margin-top:8px}.gc-actual-damage-section .gc-detail-section-title[data-v-142edb12]{color:#ef4444}.gc-actual-damage-badge[data-v-142edb12]{font-size:0.7em;font-weight:500;padding:2px 6px;background:rgba(239,68,68,0.2);color:#ef4444;border-radius:4px;margin-left:auto}.gc-actual-damage-grid[data-v-142edb12]{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-top:8px}.gc-actual-damage-item[data-v-142edb12]{background:rgba(0,0,0,0.2);padding:8px 10px;border-radius:6px;text-align:center}.gc-actual-damage-item-label[data-v-142edb12]{font-size:0.7em;color:var(--gc-text-muted,#94a3b8);margin-bottom:2px}.gc-actual-damage-item-value[data-v-142edb12]{font-size:0.95em;font-weight:600;font-family:var(--gc-font-mono)}.gc-actual-damage-item-value.casualties[data-v-142edb12]{color:#f87171}.gc-actual-damage-item-value.buildings[data-v-142edb12]{color:#fbbf24}.gc-actual-damage-item-value.cities[data-v-142edb12]{color:#c084fc}.gc-last-action[data-v-142edb12]{margin-top:10px;padding-top:10px;border-top:1px dashed rgba(239,68,68,0.2)}.gc-last-action-title[data-v-142edb12]{font-size:0.75em;font-weight:600;color:#f87171;display:flex;align-items:center;gap:6px;margin-bottom:4px}.gc-last-action-content[data-v-142edb12]{display:flex;justify-content:space-between;align-items:center;font-size:0.85em}.gc-last-action-desc[data-v-142edb12]{color:var(--gc-text,#f8fafc)}.gc-last-action-casualties[data-v-142edb12]{color:#f87171;font-family:var(--gc-font-mono)}.gc-major-events[data-v-142edb12]{margin-top:10px;padding-top:10px;border-top:1px dashed rgba(239,68,68,0.2)}.gc-major-events-title[data-v-142edb12]{font-size:0.75em;font-weight:600;color:#fbbf24;display:flex;align-items:center;gap:6px;margin-bottom:6px}.gc-major-events-list[data-v-142edb12]{display:flex;flex-direction:column;gap:4px}.gc-major-event-item[data-v-142edb12]{display:flex;justify-content:space-between;align-items:center;font-size:0.8em;padding:4px 8px;background:rgba(0,0,0,0.15);border-radius:4px}.gc-major-event-desc[data-v-142edb12]{color:var(--gc-text,#f8fafc);flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.gc-major-event-casualties[data-v-142edb12]{color:#f87171;font-family:var(--gc-font-mono);margin-left:8px;flex-shrink:0}.gc-actual-damage-note[data-v-142edb12]{margin-top:8px;font-size:0.8em;color:var(--gc-text-muted,#94a3b8);font-style:italic;display:flex;align-items:center;gap:6px}.gc-actual-damage-note i[data-v-142edb12]{color:#94a3b8}.gc-char-list[data-v-142edb12]::-webkit-scrollbar{width:4px}.gc-char-list[data-v-142edb12]::-webkit-scrollbar-track{background:transparent}.gc-char-list[data-v-142edb12]::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.1);border-radius:2px}.gc-char-list[data-v-142edb12]::-webkit-scrollbar-thumb:hover{background:rgba(255,255,255,0.2)}\\n','',{version:3,sources:['webpack://./src/ui/CharacterList.vue'],names:[],mappings:'AA+JA,+BACE,YAAa,CACb,qBAAsB,CACtB,KAAM,CACN,gBAAiB,CACjB,eAAgB,CAChB,iBACF,CAEA,2BACE,YAAa,CACb,qBAAsB,CACtB,kBAAmB,CACnB,QAAS,CACT,kCAAoC,CACpC,iBAAkB,CAClB,iCAAqC,CACrC,kBAAmB,CACnB,yDACF,CAEA,oCACE,gCAAoC,CACpC,iBAAkB,CAClB,uBAAwB,CACxB,sCACF,CAEA,6DACE,aACF,CAEA,wCACE,eAAgB,CAChB,eAAgB,CAChB,eAAgB,CAChB,+BAAmC,CACnC,aAAc,CACd,iBAAkB,CAClB,gBACF,CAEA,iCACE,YAAa,CACb,mCAAqC,CACrC,OAAQ,CACR,cACF,CAEA,iCACE,0BAA8B,CAC9B,gBAAiB,CACjB,iBACF,CAEA,uCACE,gBAAiB,CACjB,kCAAoC,CACpC,iBACF,CAEA,uCACE,eAAgB,CAChB,eAAgB,CAChB,+BAAgC,CAChC,4BACF,CAEA,kDACE,aACF,CAEA,iDACE,aACF,CAGA,kCACE,eAAgB,CAChB,gBAAiB,CACjB,0CACF,CAEA,wCACE,eAAgB,CAChB,eAAgB,CAChB,aAAc,CACd,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,iBACF,CAEA,uCACE,YAAa,CACb,cAAe,CACf,OACF,CAEA,4CACE,eAAgB,CAChB,eAAgB,CAChB,gCAAoC,CACpC,4BAA8B,CAC9B,iBACF,CAGA,qCACE,eAAgB,CAChB,gBAAiB,CACjB,0CACF,CAEA,2CACE,eAAgB,CAChB,eAAgB,CAChB,aAAc,CACd,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,iBACF,CAEA,0CACE,YAAa,CACb,cAAe,CACf,OACF,CAEA,gCACE,gBAAiB,CACjB,eAAgB,CAChB,gCAAoC,CACpC,aAAc,CACd,iBACF,CAEA,iCACE,gBAAiB,CACjB,eAAgB,CAChB,gCAAoC,CACpC,kCAAoC,CACpC,iBACF,CAGA,2CACE,+BAAmC,CACnC,iBAAkB,CAClB,uBAAwB,CACxB,oCAAwC,CACxC,cACF,CAEA,oEACE,aACF,CAEA,yCACE,eAAgB,CAChB,eAAgB,CAChB,eAAgB,CAChB,8BAAkC,CAClC,aAAc,CACd,iBAAkB,CAClB,gBACF,CAEA,wCACE,YAAa,CACb,mCAAqC,CACrC,OAAQ,CACR,cACF,CAEA,wCACE,0BAA8B,CAC9B,gBAAiB,CACjB,iBAAkB,CAClB,iBACF,CAEA,8CACE,eAAgB,CAChB,kCAAoC,CACpC,iBACF,CAEA,8CACE,gBAAiB,CACjB,eAAgB,CAChB,+BACF,CAEA,yDACE,aACF,CAEA,wDACE,aACF,CAEA,qDACE,aACF,CAGA,iCACE,eAAgB,CAChB,gBAAiB,CACjB,yCACF,CAEA,uCACE,gBAAiB,CACjB,eAAgB,CAChB,aAAc,CACd,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,iBACF,CAEA,yCACE,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,gBACF,CAEA,sCACE,4BACF,CAEA,4CACE,aAAc,CACd,+BACF,CAGA,kCACE,eAAgB,CAChB,gBAAiB,CACjB,yCACF,CAEA,wCACE,gBAAiB,CACjB,eAAgB,CAChB,aAAc,CACd,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,iBACF,CAEA,uCACE,YAAa,CACb,qBAAsB,CACtB,OACF,CAEA,sCACE,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,eAAgB,CAChB,eAAgB,CAChB,2BAA+B,CAC/B,iBACF,CAEA,sCACE,4BAA8B,CAC9B,MAAO,CACP,eAAgB,CAChB,sBAAuB,CACvB,kBACF,CAEA,4CACE,aAAc,CACd,+BAAgC,CAChC,eAAgB,CAChB,aACF,CAGA,wCACE,cAAe,CACf,eAAgB,CAChB,kCAAoC,CACpC,iBAAkB,CAClB,YAAa,CACb,kBAAmB,CACnB,OACF,CAEA,0CACE,aACF,CAGA,kDACE,SACF,CAEA,wDACE,sBACF,CAEA,wDACE,gCAAoC,CACpC,iBACF,CAEA,8DACE,gCACF',sourcesContent:['<template>\\n  <div class=\"gc-char-list\">\\n    <div v-if=\"characters.size === 0\" class=\"gc-empty\">\\n      <i class=\"fa-regular fa-folder-open\"></i>\\n      <span>暂无角色数据</span>\\n    </div>\\n    \\n    <CharacterCard\\n      v-for=\"[name, data] in characters\"\\n      :key=\"name\"\\n      :name=\"name\"\\n      :data=\"data\"\\n      :show-damage=\"showDamage\"\\n      :expanded=\"expandedChar === name\"\\n      @toggle=\"toggleExpand\"\\n    >\\n      \\x3c!-- 损害数据插槽 --\\x3e\\n      <template #damage=\"{ damageData }\">\\n        <div v-if=\"showDamage && damageData\" class=\"gc-detail-section full-width gc-damage-section\">\\n          <div class=\"gc-detail-section-title\">\\n            <i class=\"fa-solid fa-explosion\"></i> 破坏力数据\\n            <span class=\"gc-damage-level-badge\">{{ damageData.破坏力等级 }}</span>\\n          </div>\\n          <div class=\"gc-damage-grid\">\\n            <div class=\"gc-damage-item\">\\n              <div class=\"gc-damage-item-label\">足迹面积</div>\\n              <div class=\"gc-damage-item-value\">{{ damageData.足迹.足迹面积_格式化 }}</div>\\n            </div>\\n            <div class=\"gc-damage-item\">\\n              <div class=\"gc-damage-item-label\">单步伤亡</div>\\n              <div class=\"gc-damage-item-value casualties\">{{ damageData.单步损害.小人伤亡.格式化 }}</div>\\n            </div>\\n            <div class=\"gc-damage-item\">\\n              <div class=\"gc-damage-item-label\">建筑损毁</div>\\n              <div class=\"gc-damage-item-value buildings\">{{ damageData.单步损害.建筑损毁.格式化 }}</div>\\n            </div>\\n            <div v-if=\"damageData.单步损害.城区损毁.数量 > 0\" class=\"gc-damage-item\">\\n              <div class=\"gc-damage-item-label\">城区损毁</div>\\n              <div class=\"gc-damage-item-value\">{{ damageData.单步损害.城区损毁.格式化 }}</div>\\n            </div>\\n          </div>\\n          \\n          \\x3c!-- 宏观破坏 --\\x3e\\n          <div v-if=\"damageData.宏观破坏\" class=\"gc-macro-damage\">\\n            <div class=\"gc-macro-damage-title\">\\n              <i class=\"fa-solid fa-globe\"></i>\\n              宏观破坏力: {{ damageData.宏观破坏.等级名称 }}\\n            </div>\\n            <div class=\"gc-macro-damage-list\">\\n              <span v-if=\"damageData.宏观破坏.城市\">{{ damageData.宏观破坏.城市.格式化 }}</span>\\n              <span v-if=\"damageData.宏观破坏.国家\">{{ damageData.宏观破坏.国家.格式化 }}</span>\\n              <span v-if=\"damageData.宏观破坏.大陆\">{{ damageData.宏观破坏.大陆.格式化 }}</span>\\n              <span v-if=\"damageData.宏观破坏.行星\">{{ damageData.宏观破坏.行星.格式化 }}</span>\\n              <span v-if=\"damageData.宏观破坏.恒星\">{{ damageData.宏观破坏.恒星.格式化 }}</span>\\n              <span v-if=\"damageData.宏观破坏.星系\">{{ damageData.宏观破坏.星系.格式化 }}</span>\\n            </div>\\n          </div>\\n          \\n          \\x3c!-- 特殊效应 --\\x3e\\n          <div v-if=\"damageData.特殊效应.length > 0\" class=\"gc-special-effects\">\\n            <div class=\"gc-special-effects-title\">\\n              <i class=\"fa-solid fa-bolt\"></i> 物理效应\\n            </div>\\n            <div class=\"gc-special-effects-list\">\\n              <span v-for=\"(effect, i) in damageData.特殊效应.slice(0, 4)\" :key=\"i\" class=\"gc-effect-tag\">\\n                {{ effect }}\\n              </span>\\n              <span v-if=\"damageData.特殊效应.length > 4\" class=\"gc-effect-more\">\\n                +{{ damageData.特殊效应.length - 4 }}更多\\n              </span>\\n            </div>\\n          </div>\\n        </div>\\n      </template>\\n\\n      \\x3c!-- 实际损害插槽 --\\x3e\\n      <template #actual-damage=\"{ actualDamage }\">\\n        <div v-if=\"actualDamage\" class=\"gc-detail-section full-width gc-actual-damage-section\">\\n          <div class=\"gc-detail-section-title\">\\n            <i class=\"fa-solid fa-skull\"></i> 实际损害记录\\n            <span class=\"gc-actual-damage-badge\">剧情累计</span>\\n          </div>\\n          <div class=\"gc-actual-damage-grid\">\\n            <div v-if=\"actualDamage.总伤亡人数\" class=\"gc-actual-damage-item\">\\n              <div class=\"gc-actual-damage-item-label\">累计伤亡</div>\\n              <div class=\"gc-actual-damage-item-value casualties\">{{ formatLargeNumber(actualDamage.总伤亡人数) }}人</div>\\n            </div>\\n            <div v-if=\"actualDamage.总建筑损毁\" class=\"gc-actual-damage-item\">\\n              <div class=\"gc-actual-damage-item-label\">建筑损毁</div>\\n              <div class=\"gc-actual-damage-item-value buildings\">{{ actualDamage.总建筑损毁 }}栋</div>\\n            </div>\\n            <div v-if=\"actualDamage.总城市毁灭\" class=\"gc-actual-damage-item\">\\n              <div class=\"gc-actual-damage-item-label\">城市毁灭</div>\\n              <div class=\"gc-actual-damage-item-value cities\">{{ actualDamage.总城市毁灭 }}座</div>\\n            </div>\\n          </div>\\n          \\n          \\x3c!-- 最近行动 --\\x3e\\n          <div v-if=\"actualDamage.最近行动\" class=\"gc-last-action\">\\n            <div class=\"gc-last-action-title\">\\n              <i class=\"fa-solid fa-shoe-prints\"></i> 最近行动\\n            </div>\\n            <div class=\"gc-last-action-content\">\\n              <span class=\"gc-last-action-desc\">{{ actualDamage.最近行动.描述 }}</span>\\n              <span v-if=\"actualDamage.最近行动.伤亡人数\" class=\"gc-last-action-casualties\">\\n                伤亡: {{ formatLargeNumber(actualDamage.最近行动.伤亡人数) }}人\\n              </span>\\n            </div>\\n          </div>\\n          \\n          \\x3c!-- 重大事件 --\\x3e\\n          <div v-if=\"actualDamage.重大事件?.length\" class=\"gc-major-events\">\\n            <div class=\"gc-major-events-title\">\\n              <i class=\"fa-solid fa-star\"></i> 重大事件 ({{ actualDamage.重大事件.length }})\\n            </div>\\n            <div class=\"gc-major-events-list\">\\n              <div v-for=\"(event, i) in actualDamage.重大事件.slice(-3)\" :key=\"i\" class=\"gc-major-event-item\">\\n                <span class=\"gc-major-event-desc\">{{ event.描述 }}</span>\\n                <span v-if=\"event.伤亡人数\" class=\"gc-major-event-casualties\">{{ formatLargeNumber(event.伤亡人数) }}人</span>\\n              </div>\\n            </div>\\n          </div>\\n          \\n          \\x3c!-- 备注 --\\x3e\\n          <div v-if=\"actualDamage.备注\" class=\"gc-actual-damage-note\">\\n            <i class=\"fa-solid fa-comment\"></i> {{ actualDamage.备注 }}\\n          </div>\\n        </div>\\n      </template>\\n    </CharacterCard>\\n  </div>\\n</template>\\n\\n<script setup lang=\"ts\">\\nimport { ref } from \\'vue\\';\\nimport CharacterCard from \\'./features/CharacterCard.vue\\';\\nimport type { CharacterData } from \\'../characters\\';\\n\\ndefineProps<{\\n  characters: Map<string, CharacterData>;\\n  showDamage?: boolean;\\n}>();\\n\\nconst expandedChar = ref<string | null>(null);\\n\\nconst toggleExpand = (name: string) => {\\n  expandedChar.value = expandedChar.value === name ? null : name;\\n};\\n\\n// 格式化大数字\\nconst formatLargeNumber = (n: number): string => {\\n  if (n >= 1e8) return `${(n / 1e8).toFixed(1)}亿`;\\n  if (n >= 1e4) return `${(n / 1e4).toFixed(1)}万`;\\n  if (n >= 1000) return `${(n / 1000).toFixed(1)}千`;\\n  return Math.round(n).toString();\\n};\\n<\\/script>\\n\\n<style scoped>\\n.gc-char-list {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 0;\\n  max-height: 600px;\\n  overflow-y: auto;\\n  padding-right: 4px;\\n}\\n\\n.gc-empty {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  gap: 16px;\\n  color: var(--gc-text-muted, #94a3b8);\\n  padding: 40px 24px;\\n  background: rgba(255, 255, 255, 0.02);\\n  border-radius: 16px;\\n  border: 1px dashed var(--gc-border, rgba(255, 255, 255, 0.08));\\n}\\n\\n.gc-damage-section {\\n  background: rgba(249, 115, 22, 0.05);\\n  border-radius: 8px;\\n  padding: 12px !important;\\n  border: 1px solid rgba(249, 115, 22, 0.15);\\n}\\n\\n.gc-damage-section .gc-detail-section-title {\\n  color: #fb923c;\\n}\\n\\n.gc-damage-level-badge {\\n  font-size: 0.8em;\\n  font-weight: 500;\\n  padding: 2px 8px;\\n  background: rgba(249, 115, 22, 0.2);\\n  color: #fb923c;\\n  border-radius: 4px;\\n  margin-left: auto;\\n}\\n\\n.gc-damage-grid {\\n  display: grid;\\n  grid-template-columns: repeat(2, 1fr);\\n  gap: 8px;\\n  margin-top: 8px;\\n}\\n\\n.gc-damage-item {\\n  background: rgba(0, 0, 0, 0.2);\\n  padding: 8px 10px;\\n  border-radius: 6px;\\n}\\n\\n.gc-damage-item-label {\\n  font-size: 0.75em;\\n  color: var(--gc-text-muted, #94a3b8);\\n  margin-bottom: 2px;\\n}\\n\\n.gc-damage-item-value {\\n  font-size: 0.9em;\\n  font-weight: 500;\\n  font-family: var(--gc-font-mono);\\n  color: var(--gc-text, #f8fafc);\\n}\\n\\n.gc-damage-item-value.casualties {\\n  color: #f87171;\\n}\\n\\n.gc-damage-item-value.buildings {\\n  color: #fbbf24;\\n}\\n\\n/* 宏观破坏 */\\n.gc-macro-damage {\\n  margin-top: 10px;\\n  padding-top: 10px;\\n  border-top: 1px dashed rgba(249, 115, 22, 0.2);\\n}\\n\\n.gc-macro-damage-title {\\n  font-size: 0.8em;\\n  font-weight: 600;\\n  color: #fb923c;\\n  display: flex;\\n  align-items: center;\\n  gap: 6px;\\n  margin-bottom: 6px;\\n}\\n\\n.gc-macro-damage-list {\\n  display: flex;\\n  flex-wrap: wrap;\\n  gap: 6px;\\n}\\n\\n.gc-macro-damage-list span {\\n  font-size: 0.8em;\\n  padding: 3px 8px;\\n  background: rgba(249, 115, 22, 0.15);\\n  color: var(--gc-text, #f8fafc);\\n  border-radius: 4px;\\n}\\n\\n/* 特殊效应 */\\n.gc-special-effects {\\n  margin-top: 10px;\\n  padding-top: 10px;\\n  border-top: 1px dashed rgba(249, 115, 22, 0.2);\\n}\\n\\n.gc-special-effects-title {\\n  font-size: 0.8em;\\n  font-weight: 600;\\n  color: #60a5fa;\\n  display: flex;\\n  align-items: center;\\n  gap: 6px;\\n  margin-bottom: 6px;\\n}\\n\\n.gc-special-effects-list {\\n  display: flex;\\n  flex-wrap: wrap;\\n  gap: 4px;\\n}\\n\\n.gc-effect-tag {\\n  font-size: 0.75em;\\n  padding: 2px 6px;\\n  background: rgba(96, 165, 250, 0.15);\\n  color: #60a5fa;\\n  border-radius: 4px;\\n}\\n\\n.gc-effect-more {\\n  font-size: 0.75em;\\n  padding: 2px 6px;\\n  background: rgba(255, 255, 255, 0.1);\\n  color: var(--gc-text-muted, #94a3b8);\\n  border-radius: 4px;\\n}\\n\\n/* 实际损害记录区域 */\\n.gc-actual-damage-section {\\n  background: rgba(239, 68, 68, 0.05);\\n  border-radius: 8px;\\n  padding: 12px !important;\\n  border: 1px solid rgba(239, 68, 68, 0.2);\\n  margin-top: 8px;\\n}\\n\\n.gc-actual-damage-section .gc-detail-section-title {\\n  color: #ef4444;\\n}\\n\\n.gc-actual-damage-badge {\\n  font-size: 0.7em;\\n  font-weight: 500;\\n  padding: 2px 6px;\\n  background: rgba(239, 68, 68, 0.2);\\n  color: #ef4444;\\n  border-radius: 4px;\\n  margin-left: auto;\\n}\\n\\n.gc-actual-damage-grid {\\n  display: grid;\\n  grid-template-columns: repeat(3, 1fr);\\n  gap: 8px;\\n  margin-top: 8px;\\n}\\n\\n.gc-actual-damage-item {\\n  background: rgba(0, 0, 0, 0.2);\\n  padding: 8px 10px;\\n  border-radius: 6px;\\n  text-align: center;\\n}\\n\\n.gc-actual-damage-item-label {\\n  font-size: 0.7em;\\n  color: var(--gc-text-muted, #94a3b8);\\n  margin-bottom: 2px;\\n}\\n\\n.gc-actual-damage-item-value {\\n  font-size: 0.95em;\\n  font-weight: 600;\\n  font-family: var(--gc-font-mono);\\n}\\n\\n.gc-actual-damage-item-value.casualties {\\n  color: #f87171;\\n}\\n\\n.gc-actual-damage-item-value.buildings {\\n  color: #fbbf24;\\n}\\n\\n.gc-actual-damage-item-value.cities {\\n  color: #c084fc;\\n}\\n\\n/* 最近行动 */\\n.gc-last-action {\\n  margin-top: 10px;\\n  padding-top: 10px;\\n  border-top: 1px dashed rgba(239, 68, 68, 0.2);\\n}\\n\\n.gc-last-action-title {\\n  font-size: 0.75em;\\n  font-weight: 600;\\n  color: #f87171;\\n  display: flex;\\n  align-items: center;\\n  gap: 6px;\\n  margin-bottom: 4px;\\n}\\n\\n.gc-last-action-content {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  font-size: 0.85em;\\n}\\n\\n.gc-last-action-desc {\\n  color: var(--gc-text, #f8fafc);\\n}\\n\\n.gc-last-action-casualties {\\n  color: #f87171;\\n  font-family: var(--gc-font-mono);\\n}\\n\\n/* 重大事件 */\\n.gc-major-events {\\n  margin-top: 10px;\\n  padding-top: 10px;\\n  border-top: 1px dashed rgba(239, 68, 68, 0.2);\\n}\\n\\n.gc-major-events-title {\\n  font-size: 0.75em;\\n  font-weight: 600;\\n  color: #fbbf24;\\n  display: flex;\\n  align-items: center;\\n  gap: 6px;\\n  margin-bottom: 6px;\\n}\\n\\n.gc-major-events-list {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 4px;\\n}\\n\\n.gc-major-event-item {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  font-size: 0.8em;\\n  padding: 4px 8px;\\n  background: rgba(0, 0, 0, 0.15);\\n  border-radius: 4px;\\n}\\n\\n.gc-major-event-desc {\\n  color: var(--gc-text, #f8fafc);\\n  flex: 1;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n}\\n\\n.gc-major-event-casualties {\\n  color: #f87171;\\n  font-family: var(--gc-font-mono);\\n  margin-left: 8px;\\n  flex-shrink: 0;\\n}\\n\\n/* 备注 */\\n.gc-actual-damage-note {\\n  margin-top: 8px;\\n  font-size: 0.8em;\\n  color: var(--gc-text-muted, #94a3b8);\\n  font-style: italic;\\n  display: flex;\\n  align-items: center;\\n  gap: 6px;\\n}\\n\\n.gc-actual-damage-note i {\\n  color: #94a3b8;\\n}\\n\\n/* 滚动条 */\\n.gc-char-list::-webkit-scrollbar {\\n  width: 4px;\\n}\\n\\n.gc-char-list::-webkit-scrollbar-track {\\n  background: transparent;\\n}\\n\\n.gc-char-list::-webkit-scrollbar-thumb {\\n  background: rgba(255, 255, 255, 0.1);\\n  border-radius: 2px;\\n}\\n\\n.gc-char-list::-webkit-scrollbar-thumb:hover {\\n  background: rgba(255, 255, 255, 0.2);\\n}\\n</style>\\n'],sourceRoot:''}]);const s=o},339(e,n,a){var t=a(18);t.__esModule&&(t=t.default),'string'==typeof t&&(t=[[e.id,t,'']]),t.locals&&(e.exports=t.locals);(0,a(424).A)('1ea5b0d7',t,!1,{ssrId:!0})},345(e,n,a){a.r(n),a.d(n,{default:()=>s});var t=a(699),c=a.n(t),i=a(465),o=a.n(i)()(c());o.push([e.id,'.gc-debug-section[data-v-91dab098]{padding:12px;background:rgba(0,0,0,0.2);border-radius:8px;margin-bottom:12px}.gc-debug-section[data-v-91dab098]:last-child{margin-bottom:0}.gc-debug-section h3[data-v-91dab098]{display:flex;align-items:center;gap:8px;font-size:0.9em;font-weight:600;margin-bottom:10px;color:var(--gc-text,#f1f5f9)}.gc-debug-section h3 i[data-v-91dab098]{color:var(--gc-primary,#f472b6)}.gc-debug-status[data-v-91dab098]{display:flex;flex-direction:column;gap:6px}.gc-debug-row[data-v-91dab098]{display:flex;justify-content:space-between;align-items:center;font-size:0.85em;padding:4px 0}.gc-debug-row[data-v-91dab098]:not(:last-child){border-bottom:1px solid rgba(255,255,255,0.05)}.gc-debug-label[data-v-91dab098]{color:var(--gc-text-muted,#94a3b8)}.gc-debug-value[data-v-91dab098]{font-weight:500;text-align:right}.gc-debug-value.success[data-v-91dab098]{color:#34d399}.gc-debug-value.warn[data-v-91dab098]{color:#fbbf24}.gc-debug-value.error[data-v-91dab098]{color:#f87171}.gc-debug-value.muted[data-v-91dab098]{color:var(--gc-text-muted,#94a3b8)}.gc-debug-value.highlight[data-v-91dab098]{color:var(--gc-primary,#f472b6)}.gc-debug-value.mono[data-v-91dab098]{font-family:\\'Monaco\\',\\'Menlo\\',monospace}\\n','',{version:3,sources:['webpack://./src/ui/features/debug/DebugStatusSection.vue'],names:[],mappings:'AA+HA,mCACE,YAAa,CACb,0BAA8B,CAC9B,iBAAkB,CAClB,kBACF,CAEA,8CACE,eACF,CAEA,sCACE,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,eAAgB,CAChB,eAAgB,CAChB,kBAAmB,CACnB,4BACF,CAEA,wCACE,+BACF,CAEA,kCACE,YAAa,CACb,qBAAsB,CACtB,OACF,CAEA,+BACE,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,gBAAiB,CACjB,aACF,CAEA,gDACE,8CACF,CAEA,iCACE,kCACF,CAEA,iCACE,eAAgB,CAChB,gBACF,CAEA,yCACE,aACF,CAEA,sCACE,aACF,CAEA,uCACE,aACF,CAEA,uCACE,kCACF,CAEA,2CACE,+BACF,CAEA,sCACE,sCACF',sourcesContent:['<template>\\n  <div class=\"gc-debug-status-section\">\\n    \\x3c!-- MVU 状态 --\\x3e\\n    <div class=\"gc-debug-section\">\\n      <h3><i class=\"fa-solid fa-satellite-dish\"></i> MVU 连接</h3>\\n      <div class=\"gc-debug-status\">\\n        <div class=\"gc-debug-row\">\\n          <span class=\"gc-debug-label\">MVU 可用</span>\\n          <span class=\"gc-debug-value\" :class=\"mvuInfo.mvuAvailable ? \\'success\\' : \\'error\\'\">\\n            {{ mvuInfo.mvuAvailable ? \\'✅ 是\\' : \\'❌ 否\\' }}\\n          </span>\\n        </div>\\n        <div v-if=\"mvuInfo.mvuVersion\" class=\"gc-debug-row\">\\n          <span class=\"gc-debug-label\">MVU 版本</span>\\n          <span class=\"gc-debug-value\">{{ mvuInfo.mvuVersion }}</span>\\n        </div>\\n        <div class=\"gc-debug-row\">\\n          <span class=\"gc-debug-label\">变量前缀</span>\\n          <span class=\"gc-debug-value mono\">{{ mvuInfo.prefix }}</span>\\n        </div>\\n      </div>\\n    </div>\\n\\n    \\x3c!-- 数据状态 --\\x3e\\n    <div class=\"gc-debug-section\">\\n      <h3><i class=\"fa-solid fa-database\"></i> 数据状态</h3>\\n      <div class=\"gc-debug-status\">\\n        <div class=\"gc-debug-row\">\\n          <span class=\"gc-debug-label\">stat_data</span>\\n          <span class=\"gc-debug-value\" :class=\"mvuInfo.messageVariables?.hasStatData ? \\'success\\' : \\'warn\\'\">\\n            {{ mvuInfo.messageVariables?.hasStatData ? \\'✅ 有\\' : \\'⚠️ 无\\' }}\\n          </span>\\n        </div>\\n        <div class=\"gc-debug-row\">\\n          <span class=\"gc-debug-label\">巨大娘数据</span>\\n          <span class=\"gc-debug-value\" :class=\"mvuInfo.messageVariables?.hasGiantessData ? \\'success\\' : \\'warn\\'\">\\n            {{ mvuInfo.messageVariables?.hasGiantessData ? \\'✅ 有\\' : \\'⚠️ 无\\' }}\\n          </span>\\n        </div>\\n        <div class=\"gc-debug-row\">\\n          <span class=\"gc-debug-label\">场景数据</span>\\n          <span class=\"gc-debug-value\" :class=\"mvuInfo.messageVariables?.hasScenarioData ? \\'success\\' : \\'muted\\'\">\\n            {{ mvuInfo.messageVariables?.hasScenarioData ? \\'✅ 有\\' : \\'— 无\\' }}\\n          </span>\\n        </div>\\n        <div class=\"gc-debug-row\">\\n          <span class=\"gc-debug-label\">互动限制</span>\\n          <span class=\"gc-debug-value\" :class=\"mvuInfo.messageVariables?.hasInteractionData ? \\'success\\' : \\'muted\\'\">\\n            {{ mvuInfo.messageVariables?.hasInteractionData ? \\'✅ 有\\' : \\'— 无\\' }}\\n          </span>\\n        </div>\\n        <div class=\"gc-debug-row\">\\n          <span class=\"gc-debug-label\">角色数量</span>\\n          <span class=\"gc-debug-value\">\\n            {{ mvuInfo.messageVariables?.characterDetails?.length || 0 }}\\n          </span>\\n        </div>\\n      </div>\\n    </div>\\n\\n    \\x3c!-- 当前设置 --\\x3e\\n    <div class=\"gc-debug-section\">\\n      <h3><i class=\"fa-solid fa-sliders\"></i> 当前配置</h3>\\n      <div class=\"gc-debug-status\">\\n        <div class=\"gc-debug-row\">\\n          <span class=\"gc-debug-label\">脚本启用</span>\\n          <span class=\"gc-debug-value\" :class=\"mvuInfo.settings?.enabled ? \\'success\\' : \\'warn\\'\">\\n            {{ mvuInfo.settings?.enabled ? \\'✅ 是\\' : \\'⚠️ 否\\' }}\\n          </span>\\n        </div>\\n        <div class=\"gc-debug-row\">\\n          <span class=\"gc-debug-label\">自动注入</span>\\n          <span class=\"gc-debug-value\" :class=\"mvuInfo.settings?.autoInject ? \\'success\\' : \\'muted\\'\">\\n            {{ mvuInfo.settings?.autoInject ? \\'✅ 开\\' : \\'— 关\\' }}\\n          </span>\\n        </div>\\n        <div class=\"gc-debug-row\">\\n          <span class=\"gc-debug-label\">损害计算</span>\\n          <span class=\"gc-debug-value\" :class=\"mvuInfo.settings?.enableDamageCalculation ? \\'success\\' : \\'muted\\'\">\\n            {{ mvuInfo.settings?.enableDamageCalculation ? \\'✅ 开\\' : \\'— 关\\' }}\\n          </span>\\n        </div>\\n        <div class=\"gc-debug-row\">\\n          <span class=\"gc-debug-label\">世界观注入</span>\\n          <span class=\"gc-debug-value\" :class=\"mvuInfo.settings?.injectWorldviewPrompt ? \\'success\\' : \\'muted\\'\">\\n            {{ mvuInfo.settings?.injectWorldviewPrompt ? \\'✅ 开\\' : \\'— 关\\' }}\\n          </span>\\n        </div>\\n      </div>\\n    </div>\\n\\n    \\x3c!-- 场景与世界观 --\\x3e\\n    <div class=\"gc-debug-section\">\\n      <h3><i class=\"fa-solid fa-globe\"></i> 场景与世界观</h3>\\n      <div class=\"gc-debug-status\">\\n        <div class=\"gc-debug-row\">\\n          <span class=\"gc-debug-label\">当前场景</span>\\n          <span class=\"gc-debug-value\">{{ mvuInfo.scenario?.current }}</span>\\n        </div>\\n        <div class=\"gc-debug-row\">\\n          <span class=\"gc-debug-label\">场景来源</span>\\n          <span class=\"gc-debug-value\" :class=\"mvuInfo.scenario?.source === \\'MVU变量\\' ? \\'highlight\\' : \\'muted\\'\">\\n            {{ mvuInfo.scenario?.source }}\\n          </span>\\n        </div>\\n        <div v-if=\"mvuInfo.scenario?.reason\" class=\"gc-debug-row\">\\n          <span class=\"gc-debug-label\">场景原因</span>\\n          <span class=\"gc-debug-value\">{{ mvuInfo.scenario.reason }}</span>\\n        </div>\\n        <div class=\"gc-debug-row\">\\n          <span class=\"gc-debug-label\">当前世界观</span>\\n          <span class=\"gc-debug-value highlight\">{{ mvuInfo.worldview?.name }}</span>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\"ts\">\\nimport type { MvuDebugInfo } from \\'../../../services/debug\\';\\n\\ndefineProps<{\\n  mvuInfo: MvuDebugInfo;\\n}>();\\n<\\/script>\\n\\n<style scoped>\\n.gc-debug-section {\\n  padding: 12px;\\n  background: rgba(0, 0, 0, 0.2);\\n  border-radius: 8px;\\n  margin-bottom: 12px;\\n}\\n\\n.gc-debug-section:last-child {\\n  margin-bottom: 0;\\n}\\n\\n.gc-debug-section h3 {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  font-size: 0.9em;\\n  font-weight: 600;\\n  margin-bottom: 10px;\\n  color: var(--gc-text, #f1f5f9);\\n}\\n\\n.gc-debug-section h3 i {\\n  color: var(--gc-primary, #f472b6);\\n}\\n\\n.gc-debug-status {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 6px;\\n}\\n\\n.gc-debug-row {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  font-size: 0.85em;\\n  padding: 4px 0;\\n}\\n\\n.gc-debug-row:not(:last-child) {\\n  border-bottom: 1px solid rgba(255, 255, 255, 0.05);\\n}\\n\\n.gc-debug-label {\\n  color: var(--gc-text-muted, #94a3b8);\\n}\\n\\n.gc-debug-value {\\n  font-weight: 500;\\n  text-align: right;\\n}\\n\\n.gc-debug-value.success {\\n  color: #34d399;\\n}\\n\\n.gc-debug-value.warn {\\n  color: #fbbf24;\\n}\\n\\n.gc-debug-value.error {\\n  color: #f87171;\\n}\\n\\n.gc-debug-value.muted {\\n  color: var(--gc-text-muted, #94a3b8);\\n}\\n\\n.gc-debug-value.highlight {\\n  color: var(--gc-primary, #f472b6);\\n}\\n\\n.gc-debug-value.mono {\\n  font-family: \\'Monaco\\', \\'Menlo\\', monospace;\\n}\\n</style>\\n'],sourceRoot:''}]);const s=o},372(e,n,a){var t=a(721);t.__esModule&&(t=t.default),'string'==typeof t&&(t=[[e.id,t,'']]),t.locals&&(e.exports=t.locals);(0,a(424).A)('e7ff91e4',t,!1,{ssrId:!0})},374(e,n,a){var t=a(713);t.__esModule&&(t=t.default),'string'==typeof t&&(t=[[e.id,t,'']]),t.locals&&(e.exports=t.locals);(0,a(424).A)('2ddcb531',t,!1,{ssrId:!0})},424(e,n,a){function t(e,n){for(var a=[],t={},c=0;c<n.length;c++){var i=n[c],o=i[0],s={id:e+':'+c,css:i[1],media:i[2],sourceMap:i[3]};t[o]?t[o].parts.push(s):a.push(t[o]={id:o,parts:[s]})}return a}a.d(n,{A:()=>m});var c='undefined'!=typeof document;if('undefined'!=typeof DEBUG&&DEBUG&&!c)throw new Error('vue-style-loader cannot be used in a non-browser environment. Use { target: \\'node\\' } in your Webpack config to indicate a server-rendering environment.');var i={},o=c&&(document.head||document.getElementsByTagName('head')[0]),s=null,r=0,l=!1,d=function(){},g=null,A='data-vue-ssr-id',p='undefined'!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function m(e,n,a,c){l=a,g=c||{};var o=t(e,n);return C(o),function(n){for(var a=[],c=0;c<o.length;c++){var s=o[c];(r=i[s.id]).refs--,a.push(r)}n?C(o=t(e,n)):o=[];for(c=0;c<a.length;c++){var r;if(0===(r=a[c]).refs){for(var l=0;l<r.parts.length;l++)r.parts[l]();delete i[r.id]}}}}function C(e){for(var n=0;n<e.length;n++){var a=e[n],t=i[a.id];if(t){t.refs++;for(var c=0;c<t.parts.length;c++)t.parts[c](a.parts[c]);for(;c<a.parts.length;c++)t.parts.push(v(a.parts[c]));t.parts.length>a.parts.length&&(t.parts.length=a.parts.length)}else{var o=[];for(c=0;c<a.parts.length;c++)o.push(v(a.parts[c]));i[a.id]={id:a.id,refs:1,parts:o}}}}function u(){var e=document.createElement('style');return e.type='text/css',o.appendChild(e),e}function v(e){var n,a,t=document.querySelector('style['+A+'~=\"'+e.id+'\"]');if(t){if(l)return d;t.parentNode.removeChild(t)}if(p){var c=r++;t=s||(s=u()),n=h.bind(null,t,c,!1),a=h.bind(null,t,c,!0)}else t=u(),n=x.bind(null,t),a=function(){t.parentNode.removeChild(t)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else a()}}var b,f=(b=[],function(e,n){return b[e]=n,b.filter(Boolean).join('\\n')});function h(e,n,a,t){var c=a?'':t.css;if(e.styleSheet)e.styleSheet.cssText=f(n,c);else{var i=document.createTextNode(c),o=e.childNodes;o[n]&&e.removeChild(o[n]),o.length?e.insertBefore(i,o[n]):e.appendChild(i)}}function x(e,n){var a=n.css,t=n.media,c=n.sourceMap;if(t&&e.setAttribute('media',t),g.ssrId&&e.setAttribute(A,n.id),c&&(a+='\\n/*# sourceURL='+c.sources[0]+' */',a+='\\n/*# sourceMappingURL=data:application/json;base64,'+btoa(unescape(encodeURIComponent(JSON.stringify(c))))+' */'),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}},465(e){e.exports=function(e){var n=[];return n.toString=function(){return this.map(function(n){var a='',t=void 0!==n[5];return n[4]&&(a+='@supports ('.concat(n[4],') {')),n[2]&&(a+='@media '.concat(n[2],' {')),t&&(a+='@layer'.concat(n[5].length>0?' '.concat(n[5]):'',' {')),a+=e(n),t&&(a+='}'),n[2]&&(a+='}'),n[4]&&(a+='}'),a}).join('')},n.i=function(e,a,t,c,i){'string'==typeof e&&(e=[[null,e,void 0]]);var o={};if(t)for(var s=0;s<this.length;s++){var r=this[s][0];null!=r&&(o[r]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);t&&o[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]='@layer'.concat(d[5].length>0?' '.concat(d[5]):'',' {').concat(d[1],'}')),d[5]=i),a&&(d[2]?(d[1]='@media '.concat(d[2],' {').concat(d[1],'}'),d[2]=a):d[2]=a),c&&(d[4]?(d[1]='@supports ('.concat(d[4],') {').concat(d[1],'}'),d[4]=c):d[4]=''.concat(c)),n.push(d))}},n}},526(e,n,a){var t=a(139);t.__esModule&&(t=t.default),'string'==typeof t&&(t=[[e.id,t,'']]),t.locals&&(e.exports=t.locals);(0,a(424).A)('6dfc6f34',t,!1,{ssrId:!0})},534(e,n,a){var t=a(672);t.__esModule&&(t=t.default),'string'==typeof t&&(t=[[e.id,t,'']]),t.locals&&(e.exports=t.locals);(0,a(424).A)('39014354',t,!1,{ssrId:!0})},566(e,n,a){var t=a(65);t.__esModule&&(t=t.default),'string'==typeof t&&(t=[[e.id,t,'']]),t.locals&&(e.exports=t.locals);(0,a(424).A)('2fa8b60e',t,!1,{ssrId:!0})},585(e,n,a){a.r(n),a.d(n,{default:()=>s});var t=a(699),c=a.n(t),i=a(465),o=a.n(i)()(c());o.push([e.id,'.gc-overlay-panel[data-v-01d31954]{position:absolute;top:0;left:0;right:0;bottom:0;background:var(--gc-bg,#1e293b);z-index:10;display:flex;flex-direction:column;border-radius:var(--gc-radius,12px);animation:fadeIn-01d31954 0.2s ease}@keyframes fadeIn-01d31954{from{opacity:0}to{opacity:1}}.gc-overlay-header[data-v-01d31954]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-bottom:1px solid var(--gc-border,rgba(255,255,255,0.1))}.gc-overlay-header span[data-v-01d31954]{display:flex;align-items:center;gap:8px;font-weight:600}.gc-header-actions-inner[data-v-01d31954]{display:flex;align-items:center;gap:8px}.gc-close-btn[data-v-01d31954]{background:transparent;border:none;color:var(--gc-text-muted,#94a3b8);cursor:pointer;padding:4px}.gc-close-btn[data-v-01d31954]:hover{color:var(--gc-text,#f1f5f9)}.gc-overlay-content[data-v-01d31954]{flex:1;overflow-y:auto;padding:16px}\\n','',{version:3,sources:['webpack://./src/ui/components/GcOverlay.vue'],names:[],mappings:'AAkCA,mCACE,iBAAkB,CAClB,KAAM,CACN,MAAO,CACP,OAAQ,CACR,QAAS,CACT,+BAAiC,CACjC,UAAW,CACX,YAAa,CACb,qBAAsB,CACtB,mCAAqC,CACrC,mCACF,CAEA,2BACE,KAAO,SAAY,CACnB,GAAK,SAAY,CACnB,CAEA,oCACE,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,iBAAkB,CAClB,8DACF,CAEA,yCACE,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,eACF,CAEA,0CACE,YAAa,CACb,kBAAmB,CACnB,OACF,CAEA,+BACE,sBAAuB,CACvB,WAAY,CACZ,kCAAoC,CACpC,cAAe,CACf,WACF,CAEA,qCACE,4BACF,CAEA,qCACE,MAAO,CACP,eAAgB,CAChB,YACF',sourcesContent:['<template>\\n  <div v-if=\"visible\" class=\"gc-overlay-panel\" :class=\"panelClass\">\\n    <div class=\"gc-overlay-header\">\\n      <span>\\n        <i v-if=\"icon\" :class=\"icon\"></i>\\n        {{ title }}\\n      </span>\\n      <div class=\"gc-header-actions-inner\">\\n        <slot name=\"header-actions\"></slot>\\n        <button class=\"gc-close-btn\" @click=\"$emit(\\'close\\')\">\\n          <i class=\"fa-solid fa-xmark\"></i>\\n        </button>\\n      </div>\\n    </div>\\n    <div class=\"gc-overlay-content\">\\n      <slot></slot>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\"ts\">\\ndefineProps<{\\n  visible: boolean;\\n  title: string;\\n  icon?: string;\\n  panelClass?: string;\\n}>();\\n\\ndefineEmits<{\\n  (e: \\'close\\'): void;\\n}>();\\n<\\/script>\\n\\n<style scoped>\\n.gc-overlay-panel {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  background: var(--gc-bg, #1e293b);\\n  z-index: 10;\\n  display: flex;\\n  flex-direction: column;\\n  border-radius: var(--gc-radius, 12px);\\n  animation: fadeIn 0.2s ease;\\n}\\n\\n@keyframes fadeIn {\\n  from { opacity: 0; }\\n  to { opacity: 1; }\\n}\\n\\n.gc-overlay-header {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  padding: 12px 16px;\\n  border-bottom: 1px solid var(--gc-border, rgba(255, 255, 255, 0.1));\\n}\\n\\n.gc-overlay-header span {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  font-weight: 600;\\n}\\n\\n.gc-header-actions-inner {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n}\\n\\n.gc-close-btn {\\n  background: transparent;\\n  border: none;\\n  color: var(--gc-text-muted, #94a3b8);\\n  cursor: pointer;\\n  padding: 4px;\\n}\\n\\n.gc-close-btn:hover {\\n  color: var(--gc-text, #f1f5f9);\\n}\\n\\n.gc-overlay-content {\\n  flex: 1;\\n  overflow-y: auto;\\n  padding: 16px;\\n}\\n</style>\\n'],sourceRoot:''}]);const s=o},587(e,n,a){var t=a(42);t.__esModule&&(t=t.default),'string'==typeof t&&(t=[[e.id,t,'']]),t.locals&&(e.exports=t.locals);(0,a(424).A)('cf1e11c8',t,!1,{ssrId:!0})},590(e,n,a){a.r(n),a.d(n,{default:()=>s});var t=a(699),c=a.n(t),i=a(465),o=a.n(i)()(c());o.push([e.id,'.gc-prompts-content[data-v-16fdb386]{display:flex;flex-direction:column;gap:12px}.gc-prompts-hint[data-v-16fdb386]{display:flex;align-items:center;gap:8px;padding:10px 12px;background:rgba(59,130,246,0.1);border-radius:6px;font-size:0.8em;color:#60a5fa;margin-bottom:8px}.gc-prompts-hint i[data-v-16fdb386]{font-size:1.1em}.gc-prompts-list[data-v-16fdb386]{display:flex;flex-direction:column;gap:8px}.gc-prompt-item[data-v-16fdb386]{display:flex;align-items:flex-start;gap:10px;padding:10px 12px;background:rgba(0,0,0,0.2);border-radius:8px;transition:all 0.2s}.gc-prompt-item[data-v-16fdb386]:hover{background:rgba(0,0,0,0.3)}.gc-prompt-item.disabled[data-v-16fdb386]{opacity:0.6}.gc-prompt-toggle[data-v-16fdb386]{padding-top:2px}.gc-prompt-info[data-v-16fdb386]{flex:1;cursor:pointer;min-width:0}.gc-prompt-name[data-v-16fdb386]{display:flex;align-items:center;flex-wrap:wrap;gap:6px;margin-bottom:4px;font-weight:500;font-size:0.9em}.gc-prompt-type[data-v-16fdb386]{font-size:0.75em;color:var(--gc-text-muted,#94a3b8);padding:2px 6px;background:rgba(255,255,255,0.05);border-radius:4px}.gc-prompt-desc[data-v-16fdb386]{font-size:0.8em;color:var(--gc-text-muted,#94a3b8)}.gc-prompt-actions[data-v-16fdb386]{display:flex;align-items:center;gap:4px}.gc-prompt-order-btns[data-v-16fdb386]{display:flex;flex-direction:column;gap:2px}.gc-btn-icon-xs[data-v-16fdb386]{width:20px;height:16px;display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,0.05);border:none;border-radius:3px;color:var(--gc-text-muted,#94a3b8);cursor:pointer;font-size:0.7em}.gc-btn-icon-xs[data-v-16fdb386]:hover{background:rgba(255,255,255,0.1);color:var(--gc-text,#f1f5f9)}.gc-btn-icon-sm[data-v-16fdb386]{width:28px;height:28px;display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,0.05);border:none;border-radius:4px;color:var(--gc-text-muted,#94a3b8);cursor:pointer}.gc-btn-icon-sm[data-v-16fdb386]:hover{background:rgba(255,255,255,0.1);color:var(--gc-text,#f1f5f9)}.gc-btn-icon-sm.danger[data-v-16fdb386]:hover{background:rgba(239,68,68,0.2);color:#f87171}.gc-add-template-btn[data-v-16fdb386]{margin-top:8px}.gc-prompt-editor[data-v-16fdb386]{display:flex;flex-direction:column;gap:12px}.gc-editor-header[data-v-16fdb386]{display:flex;align-items:center;gap:12px}.gc-editor-title[data-v-16fdb386]{font-weight:600;font-size:0.95em}.gc-editor-form[data-v-16fdb386]{display:flex;flex-direction:column;gap:12px}.gc-setting-item[data-v-16fdb386]{display:flex;flex-direction:column;gap:6px}.gc-setting-item label[data-v-16fdb386]{font-size:0.85em;color:var(--gc-text-muted,#94a3b8);font-weight:500}.gc-input[data-v-16fdb386]{padding:8px 10px;background:rgba(0,0,0,0.2);border:1px solid var(--gc-border,rgba(255,255,255,0.1));border-radius:6px;color:var(--gc-text,#f1f5f9);font-size:0.9em}.gc-input[data-v-16fdb386]:focus{outline:none;border-color:var(--gc-primary,#f472b6)}.gc-textarea[data-v-16fdb386]{padding:8px 10px;background:rgba(0,0,0,0.2);border:1px solid var(--gc-border,rgba(255,255,255,0.1));border-radius:6px;color:var(--gc-text,#f1f5f9);font-size:0.9em;resize:vertical;font-family:inherit}.gc-textarea[data-v-16fdb386]:focus{outline:none;border-color:var(--gc-primary,#f472b6)}.gc-editor-textarea[data-v-16fdb386]{min-height:200px}.gc-editor-hint[data-v-16fdb386]{font-size:0.75em;color:var(--gc-text-muted,#94a3b8);padding:6px 10px;background:rgba(0,0,0,0.15);border-radius:4px;margin-bottom:6px}.gc-editor-hint code[data-v-16fdb386]{padding:1px 4px;background:rgba(255,255,255,0.1);border-radius:3px;font-family:monospace;font-size:0.95em}.gc-setting-toggle[data-v-16fdb386]{display:flex;justify-content:space-between;align-items:center;padding:8px 0}.gc-setting-toggle label[data-v-16fdb386]{display:flex;flex-direction:column;gap:2px}.gc-setting-toggle label span[data-v-16fdb386]{font-size:0.85em;font-weight:500}.gc-editor-actions[data-v-16fdb386]{display:flex;gap:8px;justify-content:flex-end;margin-top:8px}.gc-btn-link[data-v-16fdb386]{background:transparent;border:none;color:var(--gc-text-muted,#94a3b8);cursor:pointer;padding:4px 8px;font-size:0.9em;display:flex;align-items:center;gap:6px}.gc-btn-link[data-v-16fdb386]:hover{color:var(--gc-text,#f1f5f9)}\\n','',{version:3,sources:['webpack://./src/ui/panels/PromptsPanel.vue'],names:[],mappings:'AA8PA,qCACE,YAAa,CACb,qBAAsB,CACtB,QACF,CAEA,kCACE,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,iBAAkB,CAClB,+BAAmC,CACnC,iBAAkB,CAClB,eAAgB,CAChB,aAAc,CACd,iBACF,CAEA,oCACE,eACF,CAEA,kCACE,YAAa,CACb,qBAAsB,CACtB,OACF,CAEA,iCACE,YAAa,CACb,sBAAuB,CACvB,QAAS,CACT,iBAAkB,CAClB,0BAA8B,CAC9B,iBAAkB,CAClB,mBACF,CAEA,uCACE,0BACF,CAEA,0CACE,WACF,CAEA,mCACE,eACF,CAEA,iCACE,MAAO,CACP,cAAe,CACf,WACF,CAEA,iCACE,YAAa,CACb,kBAAmB,CACnB,cAAe,CACf,OAAQ,CACR,iBAAkB,CAClB,eAAgB,CAChB,eACF,CAEA,iCACE,gBAAiB,CACjB,kCAAoC,CACpC,eAAgB,CAChB,iCAAqC,CACrC,iBACF,CAEA,iCACE,eAAgB,CAChB,kCACF,CAEA,oCACE,YAAa,CACb,kBAAmB,CACnB,OACF,CAEA,uCACE,YAAa,CACb,qBAAsB,CACtB,OACF,CAEA,iCACE,UAAW,CACX,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,iCAAqC,CACrC,WAAY,CACZ,iBAAkB,CAClB,kCAAoC,CACpC,cAAe,CACf,eACF,CAEA,uCACE,gCAAoC,CACpC,4BACF,CAEA,iCACE,UAAW,CACX,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,iCAAqC,CACrC,WAAY,CACZ,iBAAkB,CAClB,kCAAoC,CACpC,cACF,CAEA,uCACE,gCAAoC,CACpC,4BACF,CAEA,8CACE,8BAAkC,CAClC,aACF,CAEA,sCACE,cACF,CAEA,mCACE,YAAa,CACb,qBAAsB,CACtB,QACF,CAEA,mCACE,YAAa,CACb,kBAAmB,CACnB,QACF,CAEA,kCACE,eAAgB,CAChB,gBACF,CAEA,iCACE,YAAa,CACb,qBAAsB,CACtB,QACF,CAEA,kCACE,YAAa,CACb,qBAAsB,CACtB,OACF,CAEA,wCACE,gBAAiB,CACjB,kCAAoC,CACpC,eACF,CAEA,2BACE,gBAAiB,CACjB,0BAA8B,CAC9B,uDAA4D,CAC5D,iBAAkB,CAClB,4BAA8B,CAC9B,eACF,CAEA,iCACE,YAAa,CACb,sCACF,CAEA,8BACE,gBAAiB,CACjB,0BAA8B,CAC9B,uDAA4D,CAC5D,iBAAkB,CAClB,4BAA8B,CAC9B,eAAgB,CAChB,eAAgB,CAChB,mBACF,CAEA,oCACE,YAAa,CACb,sCACF,CAEA,qCACE,gBACF,CAEA,iCACE,gBAAiB,CACjB,kCAAoC,CACpC,gBAAiB,CACjB,2BAA+B,CAC/B,iBAAkB,CAClB,iBACF,CAEA,sCACE,eAAgB,CAChB,gCAAoC,CACpC,iBAAkB,CAClB,qBAAsB,CACtB,gBACF,CAEA,oCACE,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,aACF,CAEA,0CACE,YAAa,CACb,qBAAsB,CACtB,OACF,CAEA,+CACE,gBAAiB,CACjB,eACF,CAEA,oCACE,YAAa,CACb,OAAQ,CACR,wBAAyB,CACzB,cACF,CAEA,8BACE,sBAAuB,CACvB,WAAY,CACZ,kCAAoC,CACpC,cAAe,CACf,eAAgB,CAChB,eAAgB,CAChB,YAAa,CACb,kBAAmB,CACnB,OACF,CAEA,oCACE,4BACF',sourcesContent:['<template>\\n  <GcOverlay\\n    :visible=\"visible\"\\n    title=\"提示词管理\"\\n    icon=\"fa-solid fa-file-lines\"\\n    panel-class=\"gc-prompts-panel\"\\n    @close=\"handleClose\"\\n  >\\n    <template #header-actions>\\n      <button class=\"gc-btn-link\" @click=\"$emit(\\'reset\\')\" title=\"重置为默认\">\\n        <i class=\"fa-solid fa-rotate-left\"></i>\\n      </button>\\n    </template>\\n\\n    <div class=\"gc-prompts-content\">\\n      \\x3c!-- 模板列表 --\\x3e\\n      <div v-if=\"!editingTemplate && !isCreating\" class=\"gc-prompts-list\">\\n        <div class=\"gc-prompts-hint\">\\n          <i class=\"fa-solid fa-info-circle\"></i>\\n          <span>启用/禁用模板来自定义注入的提示词内容，点击模板可编辑</span>\\n        </div>\\n        \\n        <div \\n          v-for=\"template in templates\" \\n          :key=\"template.id\" \\n          class=\"gc-prompt-item\"\\n          :class=\"{ disabled: !template.enabled, builtin: template.builtin }\"\\n        >\\n          <div class=\"gc-prompt-toggle\">\\n            <GcSwitch\\n              :model-value=\"template.enabled\"\\n              size=\"sm\"\\n              @update:model-value=\"$emit(\\'toggle\\', template.id)\"\\n            />\\n          </div>\\n          \\n          <div class=\"gc-prompt-info\" @click=\"startEdit(template)\">\\n            <div class=\"gc-prompt-name\">\\n              <span>{{ template.name }}</span>\\n              <GcBadge v-if=\"template.builtin\" size=\"sm\">内置</GcBadge>\\n              <GcBadge v-else variant=\"custom\" size=\"sm\">自定义</GcBadge>\\n              <span class=\"gc-prompt-type\">{{ template.type }}</span>\\n            </div>\\n            <div class=\"gc-prompt-desc\">{{ template.description }}</div>\\n          </div>\\n          \\n          <div class=\"gc-prompt-actions\">\\n            <div class=\"gc-prompt-order-btns\">\\n              <button class=\"gc-btn-icon-xs\" @click=\"$emit(\\'move\\', template.id, \\'up\\')\" title=\"上移\">\\n                <i class=\"fa-solid fa-chevron-up\"></i>\\n              </button>\\n              <button class=\"gc-btn-icon-xs\" @click=\"$emit(\\'move\\', template.id, \\'down\\')\" title=\"下移\">\\n                <i class=\"fa-solid fa-chevron-down\"></i>\\n              </button>\\n            </div>\\n            <button class=\"gc-btn-icon-sm\" @click=\"startEdit(template)\" title=\"编辑\">\\n              <i class=\"fa-solid fa-pen\"></i>\\n            </button>\\n            <button \\n              v-if=\"!template.builtin\" \\n              class=\"gc-btn-icon-sm danger\" \\n              @click=\"$emit(\\'delete\\', template.id, template.name)\" \\n              title=\"删除\"\\n            >\\n              <i class=\"fa-solid fa-trash\"></i>\\n            </button>\\n          </div>\\n        </div>\\n        \\n        <GcButton class=\"gc-add-template-btn\" @click=\"startCreate\">\\n          <i class=\"fa-solid fa-plus\"></i> 新建自定义模板\\n        </GcButton>\\n      </div>\\n\\n      \\x3c!-- 新建模板 --\\x3e\\n      <div v-else-if=\"isCreating\" class=\"gc-prompt-editor\">\\n        <div class=\"gc-editor-header\">\\n          <button class=\"gc-btn-link\" @click=\"cancelCreate\">\\n            <i class=\"fa-solid fa-arrow-left\"></i> 返回列表\\n          </button>\\n          <span class=\"gc-editor-title\">新建模板</span>\\n        </div>\\n        <div class=\"gc-editor-form\">\\n          <div class=\"gc-setting-item\">\\n            <label>模板名称 *</label>\\n            <input v-model=\"newTemplate.name\" type=\"text\" class=\"gc-input\" placeholder=\"输入模板名称\" />\\n          </div>\\n          <div class=\"gc-setting-item\">\\n            <label>描述</label>\\n            <input v-model=\"newTemplate.description\" type=\"text\" class=\"gc-input\" placeholder=\"简短描述模板用途\" />\\n          </div>\\n          <div class=\"gc-setting-item\">\\n            <label>模板类型</label>\\n            <select v-model=\"newTemplate.type\" class=\"gc-input\">\\n              <option value=\"header\">header - 头部说明</option>\\n              <option value=\"character\">character - 角色数据（为每个角色生成）</option>\\n              <option value=\"interaction\">interaction - 互动限制</option>\\n              <option value=\"rules\">rules - 规则说明</option>\\n              <option value=\"footer\">footer - 尾部补充</option>\\n            </select>\\n          </div>\\n          <div class=\"gc-setting-item\">\\n            <label>模板内容</label>\\n            <div class=\"gc-editor-hint\" v-pre>\\n              支持变量: <code>{{角色名}}</code> <code>{{当前身高_格式化}}</code> <code>{{倍率}}</code> <code>{{级别}}</code> <code>{{描述}}</code> <code>{{身体数据}}</code> <code>{{相对参照}}</code> <code>{{互动限制列表}}</code>\\n            </div>\\n            <textarea \\n              v-model=\"newTemplate.content\" \\n              class=\"gc-textarea gc-editor-textarea\"\\n              rows=\"10\"\\n              placeholder=\"输入模板内容...\"\\n            ></textarea>\\n          </div>\\n          <div class=\"gc-setting-toggle\">\\n            <label><span>默认启用</span></label>\\n            <GcSwitch v-model=\"newTemplate.enabled\" />\\n          </div>\\n          <div class=\"gc-editor-actions\">\\n            <GcButton @click=\"cancelCreate\">取消</GcButton>\\n            <GcButton variant=\"primary\" @click=\"createTemplate\">\\n              <i class=\"fa-solid fa-plus\"></i> 创建模板\\n            </GcButton>\\n          </div>\\n        </div>\\n      </div>\\n\\n      \\x3c!-- 模板编辑 --\\x3e\\n      <div v-else-if=\"editingTemplate\" class=\"gc-prompt-editor\">\\n        <div class=\"gc-editor-header\">\\n          <button class=\"gc-btn-link\" @click=\"cancelEdit\">\\n            <i class=\"fa-solid fa-arrow-left\"></i> 返回列表\\n          </button>\\n          <span class=\"gc-editor-title\">编辑: {{ editingTemplate.name }}</span>\\n        </div>\\n        <div class=\"gc-editor-form\">\\n          <div class=\"gc-setting-item\">\\n            <label>模板名称</label>\\n            <input v-model=\"editingTemplate.name\" type=\"text\" class=\"gc-input\" :disabled=\"editingTemplate.builtin\" />\\n          </div>\\n          <div class=\"gc-setting-item\">\\n            <label>描述</label>\\n            <input v-model=\"editingTemplate.description\" type=\"text\" class=\"gc-input\" />\\n          </div>\\n          <div class=\"gc-setting-item\">\\n            <label>模板内容</label>\\n            <div class=\"gc-editor-hint\" v-pre>\\n              支持变量: <code>{{角色名}}</code> <code>{{当前身高_格式化}}</code> <code>{{倍率}}</code> <code>{{级别}}</code> <code>{{描述}}</code> <code>{{身体数据}}</code> <code>{{相对参照}}</code> <code>{{互动限制列表}}</code>\\n            </div>\\n            <textarea \\n              v-model=\"editingTemplate.content\" \\n              class=\"gc-textarea gc-editor-textarea\"\\n              rows=\"12\"\\n            ></textarea>\\n          </div>\\n          <div class=\"gc-editor-actions\">\\n            <GcButton @click=\"cancelEdit\">取消</GcButton>\\n            <GcButton variant=\"primary\" @click=\"saveTemplate\">\\n              <i class=\"fa-solid fa-save\"></i> 保存\\n            </GcButton>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </GcOverlay>\\n</template>\\n\\n<script setup lang=\"ts\">\\nimport { ref } from \\'vue\\';\\nimport { GcOverlay, GcSwitch, GcButton, GcBadge } from \\'../components\\';\\nimport type { PromptTemplate, PromptTemplateType } from \\'../../types\\';\\n\\ndefineProps<{\\n  visible: boolean;\\n  templates: PromptTemplate[];\\n}>();\\n\\nconst emit = defineEmits<{\\n  (e: \\'close\\'): void;\\n  (e: \\'reset\\'): void;\\n  (e: \\'toggle\\', id: string): void;\\n  (e: \\'move\\', id: string, direction: \\'up\\' | \\'down\\'): void;\\n  (e: \\'delete\\', id: string, name: string): void;\\n  (e: \\'create\\', template: Omit<PromptTemplate, \\'id\\' | \\'order\\' | \\'builtin\\'>): void;\\n  (e: \\'save\\', template: PromptTemplate): void;\\n}>();\\n\\n// 内部状态\\nconst isCreating = ref(false);\\nconst editingTemplate = ref<PromptTemplate | null>(null);\\nconst newTemplate = ref({\\n  name: \\'\\',\\n  description: \\'\\',\\n  content: \\'\\',\\n  type: \\'footer\\' as PromptTemplateType,\\n  enabled: true,\\n});\\n\\nconst startCreate = () => {\\n  newTemplate.value = {\\n    name: \\'\\',\\n    description: \\'\\',\\n    content: \\'\\',\\n    type: \\'footer\\',\\n    enabled: true,\\n  };\\n  isCreating.value = true;\\n};\\n\\nconst cancelCreate = () => {\\n  isCreating.value = false;\\n};\\n\\nconst createTemplate = () => {\\n  if (!newTemplate.value.name.trim()) {\\n    toastr.warning(\\'请输入模板名称\\');\\n    return;\\n  }\\n  emit(\\'create\\', {\\n    name: newTemplate.value.name.trim(),\\n    description: newTemplate.value.description.trim(),\\n    content: newTemplate.value.content,\\n    type: newTemplate.value.type,\\n    enabled: newTemplate.value.enabled,\\n  });\\n  isCreating.value = false;\\n};\\n\\nconst startEdit = (template: PromptTemplate) => {\\n  editingTemplate.value = { ...template };\\n};\\n\\nconst cancelEdit = () => {\\n  editingTemplate.value = null;\\n};\\n\\nconst saveTemplate = () => {\\n  if (editingTemplate.value) {\\n    emit(\\'save\\', editingTemplate.value);\\n    editingTemplate.value = null;\\n  }\\n};\\n\\nconst handleClose = () => {\\n  if (isCreating.value) {\\n    isCreating.value = false;\\n  }\\n  if (editingTemplate.value) {\\n    editingTemplate.value = null;\\n  }\\n  emit(\\'close\\');\\n};\\n<\\/script>\\n\\n<style scoped>\\n.gc-prompts-content {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 12px;\\n}\\n\\n.gc-prompts-hint {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  padding: 10px 12px;\\n  background: rgba(59, 130, 246, 0.1);\\n  border-radius: 6px;\\n  font-size: 0.8em;\\n  color: #60a5fa;\\n  margin-bottom: 8px;\\n}\\n\\n.gc-prompts-hint i {\\n  font-size: 1.1em;\\n}\\n\\n.gc-prompts-list {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 8px;\\n}\\n\\n.gc-prompt-item {\\n  display: flex;\\n  align-items: flex-start;\\n  gap: 10px;\\n  padding: 10px 12px;\\n  background: rgba(0, 0, 0, 0.2);\\n  border-radius: 8px;\\n  transition: all 0.2s;\\n}\\n\\n.gc-prompt-item:hover {\\n  background: rgba(0, 0, 0, 0.3);\\n}\\n\\n.gc-prompt-item.disabled {\\n  opacity: 0.6;\\n}\\n\\n.gc-prompt-toggle {\\n  padding-top: 2px;\\n}\\n\\n.gc-prompt-info {\\n  flex: 1;\\n  cursor: pointer;\\n  min-width: 0;\\n}\\n\\n.gc-prompt-name {\\n  display: flex;\\n  align-items: center;\\n  flex-wrap: wrap;\\n  gap: 6px;\\n  margin-bottom: 4px;\\n  font-weight: 500;\\n  font-size: 0.9em;\\n}\\n\\n.gc-prompt-type {\\n  font-size: 0.75em;\\n  color: var(--gc-text-muted, #94a3b8);\\n  padding: 2px 6px;\\n  background: rgba(255, 255, 255, 0.05);\\n  border-radius: 4px;\\n}\\n\\n.gc-prompt-desc {\\n  font-size: 0.8em;\\n  color: var(--gc-text-muted, #94a3b8);\\n}\\n\\n.gc-prompt-actions {\\n  display: flex;\\n  align-items: center;\\n  gap: 4px;\\n}\\n\\n.gc-prompt-order-btns {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 2px;\\n}\\n\\n.gc-btn-icon-xs {\\n  width: 20px;\\n  height: 16px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  background: rgba(255, 255, 255, 0.05);\\n  border: none;\\n  border-radius: 3px;\\n  color: var(--gc-text-muted, #94a3b8);\\n  cursor: pointer;\\n  font-size: 0.7em;\\n}\\n\\n.gc-btn-icon-xs:hover {\\n  background: rgba(255, 255, 255, 0.1);\\n  color: var(--gc-text, #f1f5f9);\\n}\\n\\n.gc-btn-icon-sm {\\n  width: 28px;\\n  height: 28px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  background: rgba(255, 255, 255, 0.05);\\n  border: none;\\n  border-radius: 4px;\\n  color: var(--gc-text-muted, #94a3b8);\\n  cursor: pointer;\\n}\\n\\n.gc-btn-icon-sm:hover {\\n  background: rgba(255, 255, 255, 0.1);\\n  color: var(--gc-text, #f1f5f9);\\n}\\n\\n.gc-btn-icon-sm.danger:hover {\\n  background: rgba(239, 68, 68, 0.2);\\n  color: #f87171;\\n}\\n\\n.gc-add-template-btn {\\n  margin-top: 8px;\\n}\\n\\n.gc-prompt-editor {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 12px;\\n}\\n\\n.gc-editor-header {\\n  display: flex;\\n  align-items: center;\\n  gap: 12px;\\n}\\n\\n.gc-editor-title {\\n  font-weight: 600;\\n  font-size: 0.95em;\\n}\\n\\n.gc-editor-form {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 12px;\\n}\\n\\n.gc-setting-item {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 6px;\\n}\\n\\n.gc-setting-item label {\\n  font-size: 0.85em;\\n  color: var(--gc-text-muted, #94a3b8);\\n  font-weight: 500;\\n}\\n\\n.gc-input {\\n  padding: 8px 10px;\\n  background: rgba(0, 0, 0, 0.2);\\n  border: 1px solid var(--gc-border, rgba(255, 255, 255, 0.1));\\n  border-radius: 6px;\\n  color: var(--gc-text, #f1f5f9);\\n  font-size: 0.9em;\\n}\\n\\n.gc-input:focus {\\n  outline: none;\\n  border-color: var(--gc-primary, #f472b6);\\n}\\n\\n.gc-textarea {\\n  padding: 8px 10px;\\n  background: rgba(0, 0, 0, 0.2);\\n  border: 1px solid var(--gc-border, rgba(255, 255, 255, 0.1));\\n  border-radius: 6px;\\n  color: var(--gc-text, #f1f5f9);\\n  font-size: 0.9em;\\n  resize: vertical;\\n  font-family: inherit;\\n}\\n\\n.gc-textarea:focus {\\n  outline: none;\\n  border-color: var(--gc-primary, #f472b6);\\n}\\n\\n.gc-editor-textarea {\\n  min-height: 200px;\\n}\\n\\n.gc-editor-hint {\\n  font-size: 0.75em;\\n  color: var(--gc-text-muted, #94a3b8);\\n  padding: 6px 10px;\\n  background: rgba(0, 0, 0, 0.15);\\n  border-radius: 4px;\\n  margin-bottom: 6px;\\n}\\n\\n.gc-editor-hint code {\\n  padding: 1px 4px;\\n  background: rgba(255, 255, 255, 0.1);\\n  border-radius: 3px;\\n  font-family: monospace;\\n  font-size: 0.95em;\\n}\\n\\n.gc-setting-toggle {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  padding: 8px 0;\\n}\\n\\n.gc-setting-toggle label {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 2px;\\n}\\n\\n.gc-setting-toggle label span {\\n  font-size: 0.85em;\\n  font-weight: 500;\\n}\\n\\n.gc-editor-actions {\\n  display: flex;\\n  gap: 8px;\\n  justify-content: flex-end;\\n  margin-top: 8px;\\n}\\n\\n.gc-btn-link {\\n  background: transparent;\\n  border: none;\\n  color: var(--gc-text-muted, #94a3b8);\\n  cursor: pointer;\\n  padding: 4px 8px;\\n  font-size: 0.9em;\\n  display: flex;\\n  align-items: center;\\n  gap: 6px;\\n}\\n\\n.gc-btn-link:hover {\\n  color: var(--gc-text, #f1f5f9);\\n}\\n</style>\\n'],sourceRoot:''}]);const s=o},601(e,n,a){var t=a(206);t.__esModule&&(t=t.default),'string'==typeof t&&(t=[[e.id,t,'']]),t.locals&&(e.exports=t.locals);(0,a(424).A)('762a302c',t,!1,{ssrId:!0})},672(e,n,a){a.r(n),a.d(n,{default:()=>s});var t=a(699),c=a.n(t),i=a(465),o=a.n(i)()(c());o.push([e.id,'.gc-debug-section[data-v-22b96ac2]{padding:12px;background:rgba(0,0,0,0.2);border-radius:8px;margin-bottom:12px}.gc-debug-section[data-v-22b96ac2]:last-child{margin-bottom:0}.gc-debug-section h3[data-v-22b96ac2]{display:flex;align-items:center;gap:8px;font-size:0.9em;font-weight:600;margin-bottom:10px;color:var(--gc-text,#f1f5f9)}.gc-debug-section h3 i[data-v-22b96ac2]{color:var(--gc-primary,#f472b6)}.gc-debug-json[data-v-22b96ac2]{background:rgba(0,0,0,0.3);border-radius:6px;padding:12px;font-family:\\'Monaco\\',\\'Menlo\\',monospace;font-size:0.75em;overflow-x:auto;max-height:300px;color:#a5f3fc;white-space:pre-wrap;word-break:break-all}\\n','',{version:3,sources:['webpack://./src/ui/features/debug/DebugRawSection.vue'],names:[],mappings:'AAyBA,mCACE,YAAa,CACb,0BAA8B,CAC9B,iBAAkB,CAClB,kBACF,CAEA,8CACE,eACF,CAEA,sCACE,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,eAAgB,CAChB,eAAgB,CAChB,kBAAmB,CACnB,4BACF,CAEA,wCACE,+BACF,CAEA,gCACE,0BAA8B,CAC9B,iBAAkB,CAClB,YAAa,CACb,sCAAyC,CACzC,gBAAiB,CACjB,eAAgB,CAChB,gBAAiB,CACjB,aAAc,CACd,oBAAqB,CACrB,oBACF',sourcesContent:['<template>\\n  <div class=\"gc-debug-raw-section\">\\n    <div class=\"gc-debug-section\">\\n      <h3><i class=\"fa-solid fa-database\"></i> MVU 原始数据</h3>\\n      <pre class=\"gc-debug-json\">{{ JSON.stringify(mvuInfo.messageVariables, null, 2) }}</pre>\\n    </div>\\n    \\n    <div class=\"gc-debug-section\">\\n      <h3><i class=\"fa-solid fa-cog\"></i> 当前设置</h3>\\n      <pre class=\"gc-debug-json\">{{ JSON.stringify(settings, null, 2) }}</pre>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\"ts\">\\nimport type { MvuDebugInfo } from \\'../../../services/debug\\';\\nimport type { Settings } from \\'../../../types\\';\\n\\ndefineProps<{\\n  mvuInfo: MvuDebugInfo;\\n  settings: Settings;\\n}>();\\n<\\/script>\\n\\n<style scoped>\\n.gc-debug-section {\\n  padding: 12px;\\n  background: rgba(0, 0, 0, 0.2);\\n  border-radius: 8px;\\n  margin-bottom: 12px;\\n}\\n\\n.gc-debug-section:last-child {\\n  margin-bottom: 0;\\n}\\n\\n.gc-debug-section h3 {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  font-size: 0.9em;\\n  font-weight: 600;\\n  margin-bottom: 10px;\\n  color: var(--gc-text, #f1f5f9);\\n}\\n\\n.gc-debug-section h3 i {\\n  color: var(--gc-primary, #f472b6);\\n}\\n\\n.gc-debug-json {\\n  background: rgba(0, 0, 0, 0.3);\\n  border-radius: 6px;\\n  padding: 12px;\\n  font-family: \\'Monaco\\', \\'Menlo\\', monospace;\\n  font-size: 0.75em;\\n  overflow-x: auto;\\n  max-height: 300px;\\n  color: #a5f3fc;\\n  white-space: pre-wrap;\\n  word-break: break-all;\\n}\\n</style>\\n'],sourceRoot:''}]);const s=o},681(e,n,a){var t=a(590);t.__esModule&&(t=t.default),'string'==typeof t&&(t=[[e.id,t,'']]),t.locals&&(e.exports=t.locals);(0,a(424).A)('aef8a866',t,!1,{ssrId:!0})},690(e,n,a){var t=a(801);t.__esModule&&(t=t.default),'string'==typeof t&&(t=[[e.id,t,'']]),t.locals&&(e.exports=t.locals);(0,a(424).A)('205eba9a',t,!1,{ssrId:!0})},699(e){e.exports=function(e){var n=e[1],a=e[3];if(!a)return n;if('function'==typeof btoa){var t=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c='sourceMappingURL=data:application/json;charset=utf-8;base64,'.concat(t),i='/*# '.concat(c,' */');return[n].concat([i]).join('\\n')}return[n].join('\\n')}},713(e,n,a){a.r(n),a.d(n,{default:()=>s});var t=a(699),c=a.n(t),i=a(465),o=a.n(i)()(c());o.push([e.id,'.gc-panel[data-v-2fd76fdc]{--gc-primary:#ec4899;--gc-bg:#0f172a;--gc-text:#f8fafc;--gc-text-muted:#94a3b8;--gc-border:rgba(255,255,255,0.08);--gc-radius:16px;font-family:-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,sans-serif;background:var(--gc-bg);border:1px solid var(--gc-border);border-radius:var(--gc-radius);margin-bottom:24px;color:var(--gc-text);box-shadow:0 4px 20px -5px rgba(0,0,0,0.3);position:relative;overflow:hidden;transition:all 0.3s cubic-bezier(0.4,0,0.2,1);backdrop-filter:blur(10px)}.gc-panel.collapsed[data-v-2fd76fdc]{border-color:rgba(255,255,255,0.05);background:rgba(15,23,42,0.6)}.gc-header[data-v-2fd76fdc]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;cursor:pointer;background:linear-gradient(to right,rgba(255,255,255,0.03),transparent);border-bottom:1px solid transparent;transition:all 0.2s}.gc-panel:not(.collapsed) .gc-header[data-v-2fd76fdc]{border-bottom-color:var(--gc-border)}.gc-header[data-v-2fd76fdc]:hover{background:rgba(255,255,255,0.06)}.gc-header-title[data-v-2fd76fdc]{display:flex;align-items:center;gap:12px;font-weight:600;font-size:1.05em;color:var(--gc-text)}.gc-logo-wrapper[data-v-2fd76fdc]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:rgba(236,72,153,0.15);border-radius:8px;box-shadow:0 0 10px rgba(236,72,153,0.2)}.gc-logo-icon[data-v-2fd76fdc]{color:var(--gc-primary);font-size:1.1em}.gc-header-actions[data-v-2fd76fdc]{display:flex;align-items:center;gap:14px}.gc-toggle-icon[data-v-2fd76fdc]{color:var(--gc-text-muted);font-size:0.9em;transition:transform 0.2s}.gc-status-badge[data-v-2fd76fdc]{font-size:0.75em;padding:4px 10px;border-radius:6px;font-weight:500}.gc-status-badge.disabled[data-v-2fd76fdc]{background:rgba(239,68,68,0.15);color:#ef4444;border:1px solid rgba(239,68,68,0.2)}.gc-content[data-v-2fd76fdc]{padding:20px;position:relative;min-height:200px}.gc-content.has-overlay[data-v-2fd76fdc]{overflow:hidden}.gc-control-bar[data-v-2fd76fdc]{margin-bottom:16px}.gc-master-btn[data-v-2fd76fdc]{width:100%;padding:12px 16px;background:rgba(0,0,0,0.3);border:1px solid var(--gc-border);border-radius:12px;color:var(--gc-text-muted);cursor:pointer;display:flex;align-items:center;justify-content:space-between;gap:12px;font-size:1em;transition:all 0.3s cubic-bezier(0.4,0,0.2,1);position:relative;overflow:hidden}.gc-master-btn[data-v-2fd76fdc]:hover{background:rgba(255,255,255,0.05);border-color:rgba(255,255,255,0.15)}.gc-master-btn.active[data-v-2fd76fdc]{background:linear-gradient(135deg,rgba(236,72,153,0.2) 0%,rgba(168,85,247,0.2) 100%);border-color:rgba(236,72,153,0.4);color:white;box-shadow:0 0 20px rgba(236,72,153,0.1)}.gc-master-btn.active[data-v-2fd76fdc]:hover{background:linear-gradient(135deg,rgba(236,72,153,0.25) 0%,rgba(168,85,247,0.25) 100%);border-color:rgba(236,72,153,0.5)}.gc-master-icon[data-v-2fd76fdc]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:8px;background:rgba(0,0,0,0.2);transition:all 0.3s}.gc-master-btn.active .gc-master-icon[data-v-2fd76fdc]{background:rgba(236,72,153,0.8);color:white;box-shadow:0 0 10px rgba(236,72,153,0.4)}.gc-master-status-dot[data-v-2fd76fdc]{width:8px;height:8px;border-radius:50%;background:#64748b;box-shadow:0 0 0 2px rgba(100,116,139,0.2);transition:all 0.3s}.gc-master-btn.active .gc-master-status-dot[data-v-2fd76fdc]{background:#10b981;box-shadow:0 0 0 2px rgba(16,185,129,0.3),0 0 10px rgba(16,185,129,0.5)}.gc-action-bar[data-v-2fd76fdc]{display:flex;gap:8px;margin-bottom:24px;justify-content:flex-end;align-items:center;padding:6px;background:rgba(0,0,0,0.2);border-radius:14px;border:1px solid rgba(255,255,255,0.05)}.gc-divider[data-v-2fd76fdc]{width:1px;height:20px;background:rgba(255,255,255,0.1);margin:0 4px}.gc-icon-btn[data-v-2fd76fdc]{width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:10px;border:none;background:transparent;color:var(--gc-text-muted,#94a3b8);cursor:pointer;transition:all 0.2s ease;padding:0;margin:0;box-shadow:none}.gc-icon-btn[data-v-2fd76fdc]:hover{background:rgba(255,255,255,0.08);color:var(--gc-text,#f8fafc)}.gc-icon-btn.active[data-v-2fd76fdc]{background:rgba(236,72,153,0.15);color:var(--gc-primary,#ec4899)}.gc-icon-btn.debug[data-v-2fd76fdc]{color:#fbbf24}.gc-icon-btn.debug[data-v-2fd76fdc]:hover{background:rgba(251,191,36,0.15)}.gc-icon-btn.debug.active[data-v-2fd76fdc]{background:rgba(251,191,36,0.2)}.gc-icon-btn.prompt[data-v-2fd76fdc]{color:#a78bfa}.gc-icon-btn.prompt[data-v-2fd76fdc]:hover{background:rgba(167,139,250,0.15)}.gc-icon-btn.prompt.active[data-v-2fd76fdc]{background:rgba(167,139,250,0.2)}.gc-icon-btn.worldview[data-v-2fd76fdc]{color:#c084fc}.gc-icon-btn.worldview[data-v-2fd76fdc]:hover{background:rgba(192,132,252,0.15)}.gc-icon-btn.worldview.active[data-v-2fd76fdc]{background:rgba(192,132,252,0.2)}.gc-main-area[data-v-2fd76fdc]{transition:opacity 0.2s}.gc-main-area.disabled[data-v-2fd76fdc]{opacity:0.5;pointer-events:none;filter:grayscale(1)}.gc-section[data-v-2fd76fdc]{margin-bottom:24px}.gc-section-header[data-v-2fd76fdc]{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px;font-size:0.9em;font-weight:600;color:var(--gc-text-muted);text-transform:uppercase;letter-spacing:0.05em}.gc-section-header i[data-v-2fd76fdc]{color:var(--gc-primary);margin-right:8px}.gc-badge-count[data-v-2fd76fdc]{padding:2px 10px;background:rgba(255,255,255,0.08);border-radius:12px;font-size:0.85em;color:var(--gc-text);font-weight:500}\\n','',{version:3,sources:['webpack://./src/ui/Panel.vue'],names:[],mappings:'AA+WA,2BACE,oBAAqB,CACrB,eAAgB,CAChB,iBAAkB,CAClB,uBAAwB,CACxB,kCAAsC,CACtC,gBAAiB,CAEjB,yEAA8E,CAC9E,uBAAwB,CACxB,iCAAkC,CAClC,8BAA+B,CAC/B,kBAAmB,CACnB,oBAAqB,CACrB,0CAA8C,CAC9C,iBAAkB,CAClB,eAAgB,CAChB,6CAAiD,CACjD,0BACF,CAEA,qCACE,mCAAuC,CACvC,6BACF,CAGA,4BACE,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,iBAAkB,CAClB,cAAe,CACf,uEAA6E,CAC7E,mCAAoC,CACpC,mBACF,CAEA,sDACE,oCACF,CAEA,kCACE,iCACF,CAEA,kCACE,YAAa,CACb,kBAAmB,CACnB,QAAS,CACT,eAAgB,CAChB,gBAAiB,CACjB,oBACF,CAEA,kCACE,UAAW,CACX,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,gCAAoC,CACpC,iBAAkB,CAClB,wCACF,CAEA,+BACE,uBAAwB,CACxB,eACF,CAEA,oCACE,YAAa,CACb,kBAAmB,CACnB,QACF,CAEA,iCACE,0BAA2B,CAC3B,eAAgB,CAChB,yBACF,CAEA,kCACE,gBAAiB,CACjB,gBAAiB,CACjB,iBAAkB,CAClB,eACF,CAEA,2CACE,+BAAmC,CACnC,aAAc,CACd,oCACF,CAGA,6BACE,YAAa,CACb,iBAAkB,CAClB,gBACF,CAEA,yCACE,eACF,CAGA,iCACE,kBACF,CAEA,gCACE,UAAW,CACX,iBAAkB,CAClB,0BAA8B,CAC9B,iCAAkC,CAClC,kBAAmB,CACnB,0BAA2B,CAC3B,cAAe,CACf,YAAa,CACb,kBAAmB,CACnB,6BAA8B,CAC9B,QAAS,CACT,aAAc,CACd,6CAAiD,CACjD,iBAAkB,CAClB,eACF,CAEA,sCACE,iCAAqC,CACrC,mCACF,CAEA,uCACE,oFAA6F,CAC7F,iCAAqC,CACrC,WAAY,CACZ,wCACF,CAEA,6CACE,sFAA+F,CAC/F,iCACF,CAEA,iCACE,UAAW,CACX,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,iBAAkB,CAClB,0BAA8B,CAC9B,mBACF,CAEA,uDACE,+BAAmC,CACnC,WAAY,CACZ,wCACF,CAEA,uCACE,SAAU,CACV,UAAW,CACX,iBAAkB,CAClB,kBAAmB,CACnB,0CAA8C,CAC9C,mBACF,CAEA,6DACE,kBAAmB,CACnB,uEACF,CAGA,gCACE,YAAa,CACb,OAAQ,CACR,kBAAmB,CACnB,wBAAyB,CACzB,kBAAmB,CACnB,WAAY,CACZ,0BAA8B,CAC9B,kBAAmB,CACnB,uCACF,CAEA,6BACE,SAAU,CACV,WAAY,CACZ,gCAAoC,CACpC,YACF,CAEA,8BACE,UAAW,CACX,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,kBAAmB,CACnB,WAAY,CACZ,sBAAuB,CACvB,kCAAoC,CACpC,cAAe,CACf,wBAAyB,CACzB,SAAU,CACV,QAAS,CACT,eACF,CAEA,oCACE,iCAAqC,CACrC,4BACF,CAEA,qCACE,gCAAoC,CACpC,+BACF,CAEA,oCAAqB,aAAgB,CACrC,0CAA2B,gCAAsC,CACjE,2CAA4B,+BAAqC,CAEjE,qCAAsB,aAAgB,CACtC,2CAA4B,iCAAuC,CACnE,4CAA6B,gCAAsC,CAEnE,wCAAyB,aAAgB,CACzC,8CAA+B,iCAAuC,CACtE,+CAAgC,gCAAsC,CAGtE,+BACE,uBACF,CAEA,wCACE,WAAY,CACZ,mBAAoB,CACpB,mBACF,CAGA,6BACE,kBACF,CAEA,oCACE,YAAa,CACb,kBAAmB,CACnB,6BAA8B,CAC9B,kBAAmB,CACnB,eAAgB,CAChB,eAAgB,CAChB,0BAA2B,CAC3B,wBAAyB,CACzB,qBACF,CAEA,sCACE,uBAAwB,CACxB,gBACF,CAEA,iCACE,gBAAiB,CACjB,iCAAqC,CACrC,kBAAmB,CACnB,gBAAiB,CACjB,oBAAqB,CACrB,eACF',sourcesContent:['<template>\\n  <div class=\"gc-panel\" :class=\"{ collapsed: isCollapsed }\">\\n    \\x3c!-- 面板头部 --\\x3e\\n    <div class=\"gc-header\" @click=\"togglePanel\">\\n      <div class=\"gc-header-title\">\\n        <div class=\"gc-logo-wrapper\">\\n          <i class=\"fa-solid fa-person-rays gc-logo-icon\"></i>\\n        </div>\\n        <span>巨大娘计算器</span>\\n      </div>\\n      <div class=\"gc-header-actions\">\\n        <span v-if=\"!settings.enabled && !isCollapsed\" class=\"gc-status-badge disabled\">已禁用</span>\\n        <i \\n          class=\"fa-solid gc-toggle-icon\"\\n          :class=\"isCollapsed ? \\'fa-chevron-right\\' : \\'fa-chevron-down\\'\"\\n        ></i>\\n      </div>\\n    </div>\\n\\n    \\x3c!-- 面板内容 --\\x3e\\n    <div v-show=\"!isCollapsed\" class=\"gc-content\" :class=\"{ \\'has-overlay\\': hasOverlay }\">\\n      \\x3c!-- 总开关 --\\x3e\\n      <div class=\"gc-control-bar\">\\n        <button\\n          class=\"gc-btn gc-master-btn\"\\n          :class=\"settings.enabled ? \\'active\\' : \\'\\'\"\\n          @click=\"toggleEnabled\"\\n        >\\n          <div class=\"gc-master-icon\">\\n            <i class=\"fa-solid\" :class=\"settings.enabled ? \\'fa-bolt\\' : \\'fa-power-off\\'\"></i>\\n          </div>\\n          <span>{{ settings.enabled ? \\'脚本已启用\\' : \\'脚本已禁用\\' }}</span>\\n          <div class=\"gc-master-status-dot\"></div>\\n        </button>\\n      </div>\\n      \\n      \\x3c!-- 功能按钮栏 --\\x3e\\n      <div class=\"gc-action-bar\">\\n        <button class=\"gc-icon-btn\" @click=\"refreshCharacters\" title=\"刷新数据\">\\n          <i class=\"fa-solid fa-rotate\"></i>\\n        </button>\\n        <div class=\"gc-divider\"></div>\\n        <button \\n          v-if=\"settings.debug\" \\n          class=\"gc-icon-btn debug\" \\n          @click=\"showDebug = !showDebug\" \\n          :class=\"{ active: showDebug }\" \\n          title=\"调试面板\"\\n        >\\n          <i class=\"fa-solid fa-bug\"></i>\\n        </button>\\n        <button class=\"gc-icon-btn prompt\" @click=\"showPrompts = !showPrompts\" :class=\"{ active: showPrompts }\" title=\"提示词管理\">\\n          <i class=\"fa-solid fa-file-lines\"></i>\\n        </button>\\n        <button class=\"gc-icon-btn worldview\" @click=\"showWorldview = !showWorldview\" :class=\"{ active: showWorldview }\" title=\"世界观设定\">\\n          <i :class=\"currentWorldview?.icon || \\'fa-solid fa-globe\\'\"></i>\\n        </button>\\n        <div class=\"gc-divider\"></div>\\n        <button class=\"gc-icon-btn\" @click=\"showSettings = !showSettings\" :class=\"{ active: showSettings }\" title=\"设置\">\\n          <i class=\"fa-solid fa-gear\"></i>\\n        </button>\\n        <button class=\"gc-icon-btn\" @click=\"showHelp = !showHelp\" :class=\"{ active: showHelp }\" title=\"帮助\">\\n          <i class=\"fa-regular fa-circle-question\"></i>\\n        </button>\\n      </div>\\n\\n      \\x3c!-- 设置面板 --\\x3e\\n      <SettingsPanel\\n        :visible=\"showSettings\"\\n        :settings=\"settings\"\\n        @close=\"showSettings = false\"\\n        @update:setting=\"updateSetting\"\\n      />\\n\\n      \\x3c!-- 帮助面板 --\\x3e\\n      <HelpPanel\\n        :visible=\"showHelp\"\\n        :version=\"VERSION\"\\n        :changelog=\"CHANGELOG\"\\n        @close=\"showHelp = false\"\\n      />\\n\\n      \\x3c!-- 世界观面板 --\\x3e\\n      <WorldviewPanel\\n        :visible=\"showWorldview\"\\n        :worldviews=\"worldviews\"\\n        :current-worldview=\"currentWorldview\"\\n        :current-worldview-id=\"currentWorldviewId\"\\n        :settings=\"settings\"\\n        @close=\"showWorldview = false\"\\n        @select=\"setCurrentWorldview\"\\n        @reset=\"resetWorldviews\"\\n        @update:setting=\"updateSetting\"\\n        @create=\"addWorldview\"\\n        @update=\"updateWorldview\"\\n        @delete=\"handleDeleteWorldview\"\\n      />\\n\\n      \\x3c!-- 提示词面板 --\\x3e\\n      <PromptsPanel\\n        :visible=\"showPrompts\"\\n        :templates=\"templates\"\\n        @close=\"showPrompts = false\"\\n        @toggle=\"toggleTemplate\"\\n        @move=\"moveTemplate\"\\n        @delete=\"handleDeleteTemplate\"\\n        @create=\"handleCreateTemplate\"\\n        @save=\"handleSaveTemplate\"\\n        @reset=\"resetPrompts\"\\n      />\\n\\n      \\x3c!-- 调试面板 --\\x3e\\n      <DebugPanel\\n        v-if=\"settings.debug\"\\n        :visible=\"showDebug\"\\n        :mvu-info=\"mvuInfo\"\\n        :logs=\"debugLogs\"\\n        :settings=\"settings\"\\n        :characters=\"charactersArray\"\\n        :test-name=\"testName\"\\n        :test-height=\"testHeight\"\\n        :test-original=\"testOriginal\"\\n        @close=\"showDebug = false\"\\n        @refresh=\"refreshMvuInfo\"\\n        @clear-logs=\"clearDebugLogs\"\\n        @update:testName=\"testName = $event\"\\n        @update:testHeight=\"testHeight = $event\"\\n        @update:testOriginal=\"testOriginal = $event\"\\n        @inject-test=\"doInjectTest\"\\n        @clear-test=\"doClearTest\"\\n        @quick-test=\"doQuickTest\"\\n        @save-damage=\"doSaveActualDamage\"\\n        @clear-damage=\"doClearActualDamage\"\\n      />\\n\\n      \\x3c!-- 主要内容区 --\\x3e\\n      <div class=\"gc-main-area\" :class=\"{ disabled: !settings.enabled }\">\\n        \\n        \\x3c!-- 快速计算器 --\\x3e\\n        <QuickCalc />\\n\\n        \\x3c!-- 角色列表 --\\x3e\\n        <div class=\"gc-section\">\\n          <div class=\"gc-section-header\">\\n            <span><i class=\"fa-solid fa-users\"></i> 角色列表</span>\\n            <span class=\"gc-badge-count\">{{ characters.size }}</span>\\n          </div>\\n          <CharacterList :characters=\"characters\" :show-damage=\"settings.enableDamageCalculation\" />\\n        </div>\\n\\n        \\x3c!-- 扩展计算系统 --\\x3e\\n        <ExtensionsPanel\\n          :settings=\"settings\"\\n          :damage-summary=\"damageSummary\"\\n          :damage-scenarios=\"damageScenariosList\"\\n          @toggle-damage=\"onDamageToggle\"\\n          @update:setting=\"updateSetting\"\\n        />\\n      </div>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\"ts\">\\nimport { ref, computed, watch } from \\'vue\\';\\nimport { storeToRefs } from \\'pinia\\';\\nimport { useSettingsStore, DAMAGE_SCENARIOS } from \\'../settings\\';\\nimport { useCharactersStore } from \\'../characters\\';\\nimport { usePromptsStore, type PromptTemplate } from \\'../prompts\\';\\nimport { useWorldviewsStore, type Worldview } from \\'../worldviews\\';\\nimport { getMvuDebugInfo, injectTestData, clearTestData, type MvuDebugInfo } from \\'../mvu集成\\';\\nimport { VERSION, CHANGELOG } from \\'../version\\';\\n\\n// 面板组件\\nimport { SettingsPanel, HelpPanel, WorldviewPanel, PromptsPanel, DebugPanel, ExtensionsPanel } from \\'./panels\\';\\nimport QuickCalc from \\'./features/QuickCalc.vue\\';\\nimport CharacterList from \\'./CharacterList.vue\\';\\n\\nimport type { Settings } from \\'../types\\';\\n\\n// ========== Stores ==========\\nconst settingsStore = useSettingsStore();\\nconst { settings, debugLogs } = storeToRefs(settingsStore);\\nconst { toggle: toggleEnabled, clearDebugLogs } = settingsStore;\\n\\nconst charactersStore = useCharactersStore();\\nconst { characters } = storeToRefs(charactersStore);\\nconst { refresh: refreshCharacters, recalculateDamage, getDamageSummary } = charactersStore;\\n\\nconst promptsStore = usePromptsStore();\\nconst { templates } = storeToRefs(promptsStore);\\nconst { toggleTemplate, updateTemplate, addTemplate, removeTemplate, moveTemplate, resetToDefaults: resetPrompts } = promptsStore;\\n\\nconst worldviewsStore = useWorldviewsStore();\\nconst { worldviews, currentWorldviewId } = storeToRefs(worldviewsStore);\\nconst { setCurrentWorldview, addWorldview, updateWorldview, removeWorldview, resetToDefaults: resetWorldviews } = worldviewsStore;\\nconst currentWorldview = computed(() => worldviewsStore.currentWorldview);\\n\\n// ========== UI 状态 ==========\\nconst isCollapsed = ref(false);\\nconst showSettings = ref(false);\\nconst showHelp = ref(false);\\nconst showDebug = ref(false);\\nconst showPrompts = ref(false);\\nconst showWorldview = ref(false);\\n\\nconst hasOverlay = computed(() => \\n  showSettings.value || showHelp.value || showDebug.value || showPrompts.value || showWorldview.value\\n);\\n\\nconst togglePanel = (e: MouseEvent) => {\\n  if ((e.target as HTMLElement).closest(\\'.gc-header-actions\\')) return;\\n  isCollapsed.value = !isCollapsed.value;\\n};\\n\\n// ========== 设置处理 ==========\\n// 接受 unknown 类型，与子组件 emit 类型兼容\\nconst updateSetting = (key: keyof Settings, value: unknown) => {\\n  (settings.value as Record<keyof Settings, unknown>)[key] = value;\\n};\\n\\n// ========== 损害计算 ==========\\nconst damageSummary = computed(() => getDamageSummary());\\n\\nconst damageScenariosList = computed(() => \\n  DAMAGE_SCENARIOS.map(id => ({\\n    id,\\n    name: id,\\n    density: getDensityForScenario(id),\\n  }))\\n);\\n\\nfunction getDensityForScenario(id: string): number {\\n  const densities: Record<string, number> = {\\n    \\'荒野\\': 1,\\n    \\'乡村\\': 50,\\n    \\'郊区\\': 500,\\n    \\'小城市\\': 2000,\\n    \\'中等城市\\': 5000,\\n    \\'大城市\\': 10000,\\n    \\'超大城市中心\\': 25000,\\n    \\'东京市中心\\': 15000,\\n    \\'香港\\': 26000,\\n    \\'马尼拉\\': 43000,\\n  };\\n  return densities[id] || 5000;\\n}\\n\\nconst onDamageToggle = (enabled: boolean) => {\\n  settings.value.enableDamageCalculation = enabled;\\n  if (enabled) {\\n    recalculateDamage();\\n    toastr.success(\\'损害计算已启用\\');\\n  } else {\\n    toastr.info(\\'损害计算已禁用\\');\\n  }\\n};\\n\\n// ========== 提示词处理 ==========\\nconst handleSaveTemplate = (template: PromptTemplate) => {\\n  updateTemplate(template.id, template);\\n  toastr.success(`模板 \"${template.name}\" 已保存`);\\n};\\n\\nconst handleCreateTemplate = (template: Omit<PromptTemplate, \\'id\\' | \\'order\\' | \\'builtin\\'>) => {\\n  addTemplate(template);\\n  toastr.success(`模板 \"${template.name}\" 已创建`);\\n};\\n\\nconst handleDeleteTemplate = (id: string, name: string) => {\\n  if (confirm(`确定要删除模板 \"${name}\" 吗？`)) {\\n    removeTemplate(id);\\n    toastr.success(`模板 \"${name}\" 已删除`);\\n  }\\n};\\n\\n// ========== 世界观处理 ==========\\nconst handleDeleteWorldview = (id: string | undefined, name: string | undefined) => {\\n  if (id && name && confirm(`确定要删除世界观 \"${name}\" 吗？`)) {\\n    removeWorldview(id);\\n    toastr.success(`世界观 \"${name}\" 已删除`);\\n  }\\n};\\n\\n// ========== 调试功能 ==========\\nconst mvuInfo = ref<MvuDebugInfo>(getMvuDebugInfo());\\nconst testName = ref(\\'测试角色\\');\\nconst testHeight = ref(100);\\nconst testOriginal = ref(1.65);\\n\\nconst refreshMvuInfo = () => {\\n  mvuInfo.value = getMvuDebugInfo();\\n  settingsStore.debugLog(\\'🔄 已刷新 MVU 状态\\');\\n};\\n\\n// 直接使用 values()，因为 CharacterData 已经包含 name 属性\\nconst charactersArray = computed(() => \\n  Array.from(characters.value.values())\\n);\\n\\nconst doInjectTest = () => {\\n  if (!testName.value) {\\n    toastr.warning(\\'请输入角色名\\');\\n    return;\\n  }\\n  const result = injectTestData(testName.value, testHeight.value, testOriginal.value);\\n  if (result.success) {\\n    toastr.success(`已注入测试数据: ${testName.value}`);\\n    setTimeout(() => { refreshMvuInfo(); refreshCharacters(); }, 500);\\n  } else {\\n    toastr.error(`注入失败: ${result.error}`);\\n  }\\n};\\n\\nconst doQuickTest = (params: { name: string; height: number; original: number }) => {\\n  const result = injectTestData(params.name, params.height, params.original);\\n  if (result.success) {\\n    toastr.success(`已注入测试数据: ${params.name}`);\\n    setTimeout(() => { refreshMvuInfo(); refreshCharacters(); }, 500);\\n  } else {\\n    toastr.error(`注入失败: ${result.error}`);\\n  }\\n};\\n\\nconst doClearTest = (name?: string) => {\\n  const result = clearTestData(name);\\n  if (result.success) {\\n    toastr.success(name ? `已清除角色: ${name}` : \\'已清除所有测试数据\\');\\n    setTimeout(() => { refreshMvuInfo(); refreshCharacters(); }, 300);\\n  } else {\\n    toastr.error(`清除失败: ${result.error}`);\\n  }\\n};\\n\\nconst doSaveActualDamage = (params: { name: string; data: unknown }) => {\\n  // 保存实际损害数据\\n  try {\\n    const prefix = settings.value.variablePrefix;\\n    const variables = getVariables({ type: \\'message\\', message_id: \\'latest\\' });\\n    _.set(variables, `stat_data.${prefix}.${params.name}._实际损害`, params.data);\\n    insertOrAssignVariables(variables, { type: \\'message\\', message_id: \\'latest\\' });\\n    toastr.success(`已保存 ${params.name} 的实际损害数据`);\\n    setTimeout(() => { refreshMvuInfo(); refreshCharacters(); }, 300);\\n  } catch (e) {\\n    toastr.error(`保存失败: ${e}`);\\n  }\\n};\\n\\nconst doClearActualDamage = (name: string) => {\\n  try {\\n    const prefix = settings.value.variablePrefix;\\n    deleteVariable(`stat_data.${prefix}.${name}._实际损害`, { type: \\'message\\', message_id: \\'latest\\' });\\n    toastr.success(`已清除 ${name} 的实际损害数据`);\\n    setTimeout(() => { refreshMvuInfo(); refreshCharacters(); }, 300);\\n  } catch (e) {\\n    toastr.error(`清除失败: ${e}`);\\n  }\\n};\\n\\n// 打开调试面板时自动刷新\\nwatch(showDebug, (val) => {\\n  if (val) refreshMvuInfo();\\n});\\n<\\/script>\\n\\n<style scoped>\\n/* ========== CSS 变量 ========== */\\n.gc-panel {\\n  --gc-primary: #ec4899;\\n  --gc-bg: #0f172a;\\n  --gc-text: #f8fafc;\\n  --gc-text-muted: #94a3b8;\\n  --gc-border: rgba(255, 255, 255, 0.08);\\n  --gc-radius: 16px;\\n  \\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif;\\n  background: var(--gc-bg);\\n  border: 1px solid var(--gc-border);\\n  border-radius: var(--gc-radius);\\n  margin-bottom: 24px;\\n  color: var(--gc-text);\\n  box-shadow: 0 4px 20px -5px rgba(0, 0, 0, 0.3);\\n  position: relative;\\n  overflow: hidden;\\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\\n  backdrop-filter: blur(10px);\\n}\\n\\n.gc-panel.collapsed {\\n  border-color: rgba(255, 255, 255, 0.05);\\n  background: rgba(15, 23, 42, 0.6);\\n}\\n\\n/* ========== 头部 ========== */\\n.gc-header {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  padding: 16px 20px;\\n  cursor: pointer;\\n  background: linear-gradient(to right, rgba(255, 255, 255, 0.03), transparent);\\n  border-bottom: 1px solid transparent;\\n  transition: all 0.2s;\\n}\\n\\n.gc-panel:not(.collapsed) .gc-header {\\n  border-bottom-color: var(--gc-border);\\n}\\n\\n.gc-header:hover {\\n  background: rgba(255, 255, 255, 0.06);\\n}\\n\\n.gc-header-title {\\n  display: flex;\\n  align-items: center;\\n  gap: 12px;\\n  font-weight: 600;\\n  font-size: 1.05em;\\n  color: var(--gc-text);\\n}\\n\\n.gc-logo-wrapper {\\n  width: 32px;\\n  height: 32px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  background: rgba(236, 72, 153, 0.15);\\n  border-radius: 8px;\\n  box-shadow: 0 0 10px rgba(236, 72, 153, 0.2);\\n}\\n\\n.gc-logo-icon {\\n  color: var(--gc-primary);\\n  font-size: 1.1em;\\n}\\n\\n.gc-header-actions {\\n  display: flex;\\n  align-items: center;\\n  gap: 14px;\\n}\\n\\n.gc-toggle-icon {\\n  color: var(--gc-text-muted);\\n  font-size: 0.9em;\\n  transition: transform 0.2s;\\n}\\n\\n.gc-status-badge {\\n  font-size: 0.75em;\\n  padding: 4px 10px;\\n  border-radius: 6px;\\n  font-weight: 500;\\n}\\n\\n.gc-status-badge.disabled {\\n  background: rgba(239, 68, 68, 0.15);\\n  color: #ef4444;\\n  border: 1px solid rgba(239, 68, 68, 0.2);\\n}\\n\\n/* ========== 内容区 ========== */\\n.gc-content {\\n  padding: 20px;\\n  position: relative;\\n  min-height: 200px;\\n}\\n\\n.gc-content.has-overlay {\\n  overflow: hidden;\\n}\\n\\n/* ========== 控制栏 ========== */\\n.gc-control-bar {\\n  margin-bottom: 16px;\\n}\\n\\n.gc-master-btn {\\n  width: 100%;\\n  padding: 12px 16px;\\n  background: rgba(0, 0, 0, 0.3);\\n  border: 1px solid var(--gc-border);\\n  border-radius: 12px;\\n  color: var(--gc-text-muted);\\n  cursor: pointer;\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  gap: 12px;\\n  font-size: 1em;\\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\\n  position: relative;\\n  overflow: hidden;\\n}\\n\\n.gc-master-btn:hover {\\n  background: rgba(255, 255, 255, 0.05);\\n  border-color: rgba(255, 255, 255, 0.15);\\n}\\n\\n.gc-master-btn.active {\\n  background: linear-gradient(135deg, rgba(236, 72, 153, 0.2) 0%, rgba(168, 85, 247, 0.2) 100%);\\n  border-color: rgba(236, 72, 153, 0.4);\\n  color: white;\\n  box-shadow: 0 0 20px rgba(236, 72, 153, 0.1);\\n}\\n\\n.gc-master-btn.active:hover {\\n  background: linear-gradient(135deg, rgba(236, 72, 153, 0.25) 0%, rgba(168, 85, 247, 0.25) 100%);\\n  border-color: rgba(236, 72, 153, 0.5);\\n}\\n\\n.gc-master-icon {\\n  width: 32px;\\n  height: 32px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  border-radius: 8px;\\n  background: rgba(0, 0, 0, 0.2);\\n  transition: all 0.3s;\\n}\\n\\n.gc-master-btn.active .gc-master-icon {\\n  background: rgba(236, 72, 153, 0.8);\\n  color: white;\\n  box-shadow: 0 0 10px rgba(236, 72, 153, 0.4);\\n}\\n\\n.gc-master-status-dot {\\n  width: 8px;\\n  height: 8px;\\n  border-radius: 50%;\\n  background: #64748b;\\n  box-shadow: 0 0 0 2px rgba(100, 116, 139, 0.2);\\n  transition: all 0.3s;\\n}\\n\\n.gc-master-btn.active .gc-master-status-dot {\\n  background: #10b981;\\n  box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.3), 0 0 10px rgba(16, 185, 129, 0.5);\\n}\\n\\n/* ========== 按钮栏 ========== */\\n.gc-action-bar {\\n  display: flex;\\n  gap: 8px;\\n  margin-bottom: 24px;\\n  justify-content: flex-end;\\n  align-items: center;\\n  padding: 6px;\\n  background: rgba(0, 0, 0, 0.2);\\n  border-radius: 14px;\\n  border: 1px solid rgba(255, 255, 255, 0.05);\\n}\\n\\n.gc-divider {\\n  width: 1px;\\n  height: 20px;\\n  background: rgba(255, 255, 255, 0.1);\\n  margin: 0 4px;\\n}\\n\\n.gc-icon-btn {\\n  width: 36px;\\n  height: 36px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  border-radius: 10px;\\n  border: none;\\n  background: transparent;\\n  color: var(--gc-text-muted, #94a3b8);\\n  cursor: pointer;\\n  transition: all 0.2s ease;\\n  padding: 0;\\n  margin: 0;\\n  box-shadow: none;\\n}\\n\\n.gc-icon-btn:hover {\\n  background: rgba(255, 255, 255, 0.08);\\n  color: var(--gc-text, #f8fafc);\\n}\\n\\n.gc-icon-btn.active {\\n  background: rgba(236, 72, 153, 0.15);\\n  color: var(--gc-primary, #ec4899);\\n}\\n\\n.gc-icon-btn.debug { color: #fbbf24; }\\n.gc-icon-btn.debug:hover { background: rgba(251, 191, 36, 0.15); }\\n.gc-icon-btn.debug.active { background: rgba(251, 191, 36, 0.2); }\\n\\n.gc-icon-btn.prompt { color: #a78bfa; }\\n.gc-icon-btn.prompt:hover { background: rgba(167, 139, 250, 0.15); }\\n.gc-icon-btn.prompt.active { background: rgba(167, 139, 250, 0.2); }\\n\\n.gc-icon-btn.worldview { color: #c084fc; }\\n.gc-icon-btn.worldview:hover { background: rgba(192, 132, 252, 0.15); }\\n.gc-icon-btn.worldview.active { background: rgba(192, 132, 252, 0.2); }\\n\\n/* ========== 主区域 ========== */\\n.gc-main-area {\\n  transition: opacity 0.2s;\\n}\\n\\n.gc-main-area.disabled {\\n  opacity: 0.5;\\n  pointer-events: none;\\n  filter: grayscale(1);\\n}\\n\\n/* ========== 区块 ========== */\\n.gc-section {\\n  margin-bottom: 24px;\\n}\\n\\n.gc-section-header {\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  margin-bottom: 12px;\\n  font-size: 0.9em;\\n  font-weight: 600;\\n  color: var(--gc-text-muted);\\n  text-transform: uppercase;\\n  letter-spacing: 0.05em;\\n}\\n\\n.gc-section-header i {\\n  color: var(--gc-primary);\\n  margin-right: 8px;\\n}\\n\\n.gc-badge-count {\\n  padding: 2px 10px;\\n  background: rgba(255, 255, 255, 0.08);\\n  border-radius: 12px;\\n  font-size: 0.85em;\\n  color: var(--gc-text);\\n  font-weight: 500;\\n}\\n</style>\\n'],sourceRoot:''}]);const s=o},721(e,n,a){a.r(n),a.d(n,{default:()=>s});var t=a(699),c=a.n(t),i=a(465),o=a.n(i)()(c());o.push([e.id,'.gc-char-item[data-v-f94d7aac]{background:rgba(255,255,255,0.03);border:1px solid var(--gc-border,rgba(255,255,255,0.08));border-radius:12px;overflow:hidden;cursor:pointer;transition:all 0.2s cubic-bezier(0.4,0,0.2,1);margin-bottom:12px}.gc-char-item[data-v-f94d7aac]:hover{background:rgba(255,255,255,0.06);border-color:rgba(255,255,255,0.15);transform:translateY(-1px)}.gc-char-item.expanded[data-v-f94d7aac]{background:rgba(15,23,42,0.6);border-color:var(--gc-primary-border,rgba(236,72,153,0.4));box-shadow:0 10px 30px -10px rgba(0,0,0,0.3);transform:translateY(-2px)}.gc-char-item.has-damage[data-v-f94d7aac]{border-left:3px solid rgba(249,115,22,0.4)}.gc-char-item.has-damage.expanded[data-v-f94d7aac]{border-left-color:#f97316}.gc-char-header[data-v-f94d7aac]{padding:14px;display:flex;align-items:center;gap:16px}.gc-char-avatar[data-v-f94d7aac]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.4em;flex-shrink:0;background:rgba(255,255,255,0.05);color:#94a3b8;transition:all 0.3s}.gc-char-avatar.giant[data-v-f94d7aac]{background:linear-gradient(135deg,rgba(249,115,22,0.2),rgba(239,68,68,0.2));color:#f97316;box-shadow:0 0 15px rgba(249,115,22,0.1)}.gc-char-avatar.tiny[data-v-f94d7aac]{background:linear-gradient(135deg,rgba(59,130,246,0.2),rgba(99,102,241,0.2));color:#60a5fa;box-shadow:0 0 15px rgba(59,130,246,0.1)}.gc-char-info[data-v-f94d7aac]{flex:1;min-width:0}.gc-char-name[data-v-f94d7aac]{font-weight:600;font-size:1.05em;color:#f1f5f9;display:flex;justify-content:space-between;align-items:center;margin-bottom:4px}.gc-char-expand-icon[data-v-f94d7aac]{font-size:0.8em;color:#94a3b8;transition:transform 0.3s cubic-bezier(0.4,0,0.2,1);opacity:0.5}.gc-char-item:hover .gc-char-expand-icon[data-v-f94d7aac]{opacity:1}.gc-char-item.expanded .gc-char-expand-icon[data-v-f94d7aac]{transform:rotate(90deg);color:var(--gc-primary,#ec4899)}.gc-char-stats[data-v-f94d7aac]{display:flex;align-items:center;gap:10px;font-size:0.9em}.gc-stat-height[data-v-f94d7aac]{color:#e2e8f0;font-weight:500}.gc-stat-unknown[data-v-f94d7aac]{color:#64748b;font-style:italic}.gc-stat-multiplier[data-v-f94d7aac]{color:#94a3b8;font-family:var(--gc-font-mono);background:rgba(255,255,255,0.05);padding:1px 6px;border-radius:4px;font-size:0.85em}.gc-level-badge[data-v-f94d7aac]{padding:4px 10px;border-radius:8px;font-size:0.75em;font-weight:700;text-transform:uppercase;background:rgba(255,255,255,0.05);color:#94a3b8;letter-spacing:0.05em}.gc-level-badge.giant[data-v-f94d7aac]{background:rgba(249,115,22,0.15);color:#f97316}.gc-level-badge.tiny[data-v-f94d7aac]{background:rgba(59,130,246,0.15);color:#60a5fa}.gc-damage-indicator[data-v-f94d7aac]{display:inline-flex;align-items:center;gap:4px;font-size:0.8em;padding:2px 8px;background:rgba(249,115,22,0.1);color:#fb923c;border-radius:6px;border:1px solid rgba(249,115,22,0.2)}.gc-char-details[data-v-f94d7aac]{border-top:1px solid rgba(255,255,255,0.05);background:rgba(0,0,0,0.15);padding:20px;animation:slideDown-f94d7aac 0.3s cubic-bezier(0.4,0,0.2,1);max-height:450px;overflow-y:auto}.gc-char-details[data-v-f94d7aac]::-webkit-scrollbar{width:4px}.gc-char-details[data-v-f94d7aac]::-webkit-scrollbar-track{background:transparent}.gc-char-details[data-v-f94d7aac]::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.1);border-radius:2px}.gc-char-details[data-v-f94d7aac]::-webkit-scrollbar-thumb:hover{background:rgba(255,255,255,0.2)}@keyframes slideDown-f94d7aac{from{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}.gc-char-details-grid[data-v-f94d7aac]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:20px}.gc-detail-section[data-v-f94d7aac]{background:rgba(255,255,255,0.02);border-radius:8px;padding:12px;border:1px solid transparent}.gc-detail-section[data-v-f94d7aac]:hover{background:rgba(255,255,255,0.04);border-color:rgba(255,255,255,0.05)}.gc-detail-section.full-width[data-v-f94d7aac]{grid-column:1/-1}.gc-detail-section-title[data-v-f94d7aac]{font-size:0.8em;font-weight:700;color:#94a3b8;margin-bottom:12px;text-transform:uppercase;letter-spacing:0.05em;display:flex;align-items:center;gap:8px}.gc-detail-section-title i[data-v-f94d7aac]{color:var(--gc-primary,#ec4899)}.gc-detail-row[data-v-f94d7aac]{display:flex;justify-content:space-between;align-items:baseline;font-size:0.9em;padding:6px 0;border-bottom:1px dashed rgba(255,255,255,0.05)}.gc-detail-row[data-v-f94d7aac]:last-child{border-bottom:none}.gc-detail-label[data-v-f94d7aac]{color:#64748b}.gc-detail-value[data-v-f94d7aac]{color:#e2e8f0;font-family:var(--gc-font-mono);font-weight:500}.gc-history-list[data-v-f94d7aac]{display:flex;flex-direction:column;gap:8px}.gc-history-item[data-v-f94d7aac]{display:flex;gap:12px;font-size:0.9em;padding:8px 12px;background:rgba(0,0,0,0.2);border-radius:6px;align-items:center}.gc-history-time[data-v-f94d7aac]{color:#64748b;font-family:var(--gc-font-mono);font-size:0.85em}.gc-history-content[data-v-f94d7aac]{flex:1;display:flex;gap:10px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;align-items:center}.gc-history-height[data-v-f94d7aac]{color:#f1f5f9;font-weight:600}.gc-history-reason[data-v-f94d7aac]{color:#94a3b8;font-size:0.9em;opacity:0.8}\\n','',{version:3,sources:['webpack://./src/ui/features/CharacterCard.vue'],names:[],mappings:'AA8LA,+BACE,iCAAqC,CACrC,wDAA6D,CAC7D,kBAAmB,CACnB,eAAgB,CAChB,cAAe,CACf,6CAAiD,CACjD,kBACF,CAEA,qCACE,iCAAqC,CACrC,mCAAuC,CACvC,0BACF,CAEA,wCACE,6BAAiC,CACjC,0DAA+D,CAC/D,4CAAgD,CAChD,0BACF,CAEA,0CACE,0CACF,CAEA,mDACE,yBACF,CAEA,iCACE,YAAa,CACb,YAAa,CACb,kBAAmB,CACnB,QACF,CAEA,iCACE,UAAW,CACX,WAAY,CACZ,kBAAmB,CACnB,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,eAAgB,CAChB,aAAc,CACd,iCAAqC,CACrC,aAAc,CACd,mBACF,CAEA,uCACE,2EAAoF,CACpF,aAAc,CACd,wCACF,CAEA,sCACE,4EAAqF,CACrF,aAAc,CACd,wCACF,CAEA,+BACE,MAAO,CACP,WACF,CAEA,+BACE,eAAgB,CAChB,gBAAiB,CACjB,aAAc,CACd,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,iBACF,CAEA,sCACE,eAAgB,CAChB,aAAc,CACd,mDAAuD,CACvD,WACF,CAEA,0DACE,SACF,CAEA,6DACE,uBAAwB,CACxB,+BACF,CAEA,gCACE,YAAa,CACb,kBAAmB,CACnB,QAAS,CACT,eACF,CAEA,iCACE,aAAc,CACd,eACF,CAEA,kCACE,aAAc,CACd,iBACF,CAEA,qCACE,aAAc,CACd,+BAAgC,CAChC,iCAAqC,CACrC,eAAgB,CAChB,iBAAkB,CAClB,gBACF,CAEA,iCACE,gBAAiB,CACjB,iBAAkB,CAClB,gBAAiB,CACjB,eAAgB,CAChB,wBAAyB,CACzB,iCAAqC,CACrC,aAAc,CACd,qBACF,CAEA,uCACE,gCAAoC,CACpC,aACF,CAEA,sCACE,gCAAoC,CACpC,aACF,CAGA,sCACE,mBAAoB,CACpB,kBAAmB,CACnB,OAAQ,CACR,eAAgB,CAChB,eAAgB,CAChB,+BAAmC,CACnC,aAAc,CACd,iBAAkB,CAClB,qCACF,CAGA,kCACE,2CAA+C,CAC/C,2BAA+B,CAC/B,YAAa,CACb,2DAAsD,CACtD,gBAAiB,CACjB,eACF,CAEA,qDACE,SACF,CAEA,2DACE,sBACF,CAEA,2DACE,gCAAoC,CACpC,iBACF,CAEA,iEACE,gCACF,CAEA,8BACE,KACE,SAAU,CACV,0BACF,CACA,GACE,SAAU,CACV,uBACF,CACF,CAEA,uCACE,YAAa,CACb,wDAA2D,CAC3D,QACF,CAEA,oCACE,iCAAqC,CACrC,iBAAkB,CAClB,YAAa,CACb,4BACF,CAEA,0CACE,iCAAqC,CACrC,mCACF,CAEA,+CACE,gBACF,CAEA,0CACE,eAAgB,CAChB,eAAgB,CAChB,aAAc,CACd,kBAAmB,CACnB,wBAAyB,CACzB,qBAAsB,CACtB,YAAa,CACb,kBAAmB,CACnB,OACF,CAEA,4CACE,+BACF,CAEA,gCACE,YAAa,CACb,6BAA8B,CAC9B,oBAAqB,CACrB,eAAgB,CAChB,aAAc,CACd,+CACF,CAEA,2CACE,kBACF,CAEA,kCACE,aACF,CAEA,kCACE,aAAc,CACd,+BAAgC,CAChC,eACF,CAGA,kCACE,YAAa,CACb,qBAAsB,CACtB,OACF,CAEA,kCACE,YAAa,CACb,QAAS,CACT,eAAgB,CAChB,gBAAiB,CACjB,0BAA8B,CAC9B,iBAAkB,CAClB,kBACF,CAEA,kCACE,aAAc,CACd,+BAAgC,CAChC,gBACF,CAEA,qCACE,MAAO,CACP,YAAa,CACb,QAAS,CACT,eAAgB,CAChB,sBAAuB,CACvB,kBAAmB,CACnB,kBACF,CAEA,oCACE,aAAc,CACd,eACF,CAEA,oCACE,aAAc,CACd,eAAgB,CAChB,WACF',sourcesContent:['<template>\\n  <div\\n    class=\"gc-char-item\"\\n    :class=\"{ expanded: isExpanded, \\'has-damage\\': showDamage && data.damageData }\"\\n    @click=\"toggleExpand\"\\n  >\\n    <div class=\"gc-char-header\">\\n      <div class=\"gc-char-avatar\" :class=\"avatarClass\">\\n        <i :class=\"avatarIcon\"></i>\\n      </div>\\n      \\n      <div class=\"gc-char-info\">\\n        <div class=\"gc-char-name\">\\n          {{ name }}\\n          <i class=\"fa-solid fa-chevron-right gc-char-expand-icon\"></i>\\n        </div>\\n        <div class=\"gc-char-stats\">\\n          <span v-if=\"data.calcData\" class=\"gc-stat-height\">\\n            {{ data.calcData.当前身高_格式化 }}\\n          </span>\\n          <span v-else class=\"gc-stat-unknown\">未设置</span>\\n          \\n          <span v-if=\"data.calcData\" class=\"gc-stat-multiplier\">\\n            ×{{ data.calcData.倍率 }}\\n          </span>\\n          \\n          \\x3c!-- 损害等级指示器 --\\x3e\\n          <span \\n            v-if=\"showDamage && data.damageData\" \\n            class=\"gc-damage-indicator\"\\n            :title=\"`破坏力: ${data.damageData.破坏力等级}`\"\\n          >\\n            <i class=\"fa-solid fa-explosion\"></i>\\n            {{ data.damageData.破坏力等级 }}\\n          </span>\\n        </div>\\n      </div>\\n      \\n      <span v-if=\"data.calcData\" class=\"gc-level-badge\" :class=\"levelBadgeClass\">\\n        {{ data.calcData.级别 }}\\n      </span>\\n    </div>\\n\\n    \\x3c!-- 展开详情 --\\x3e\\n    <div v-if=\"isExpanded && data.calcData\" class=\"gc-char-details\">\\n      <div class=\"gc-char-details-grid\">\\n        \\x3c!-- 基础数据 --\\x3e\\n        <div class=\"gc-detail-section\">\\n          <div class=\"gc-detail-section-title\">\\n            <i class=\"fa-solid fa-ruler-combined\"></i> 基础数据\\n          </div>\\n          <div class=\"gc-detail-row\">\\n            <span class=\"gc-detail-label\">原身高</span>\\n            <span class=\"gc-detail-value\">{{ data.calcData.原身高 }}m</span>\\n          </div>\\n          <div class=\"gc-detail-row\">\\n            <span class=\"gc-detail-label\">当前身高</span>\\n            <span class=\"gc-detail-value\">{{ data.calcData.当前身高_格式化 }}</span>\\n          </div>\\n          <div class=\"gc-detail-row\">\\n            <span class=\"gc-detail-label\">倍率</span>\\n            <span class=\"gc-detail-value\">×{{ data.calcData.倍率 }}</span>\\n          </div>\\n          <div class=\"gc-detail-row\">\\n            <span class=\"gc-detail-label\">级别</span>\\n            <span class=\"gc-detail-value\">{{ data.calcData.级别 }}</span>\\n          </div>\\n        </div>\\n\\n        \\x3c!-- 身体部位（巨大娘） --\\x3e\\n        <template v-if=\"\\'身体部位_格式化\\' in data.calcData\">\\n          <div class=\"gc-detail-section\">\\n            <div class=\"gc-detail-section-title\">\\n              <i class=\"fa-solid fa-person\"></i> 关键部位\\n            </div>\\n            <template v-for=\"part in keyBodyParts\" :key=\"part\">\\n              <div v-if=\"(data.calcData as any).身体部位_格式化[part]\" class=\"gc-detail-row\">\\n                <span class=\"gc-detail-label\">{{ part }}</span>\\n                <span class=\"gc-detail-value\">{{ (data.calcData as any).身体部位_格式化[part] }}</span>\\n              </div>\\n            </template>\\n          </div>\\n        </template>\\n\\n        \\x3c!-- 眼中的世界（巨大娘） --\\x3e\\n        <template v-if=\"\\'眼中的世界_格式化\\' in data.calcData\">\\n          <div class=\"gc-detail-section\">\\n            <div class=\"gc-detail-section-title\">\\n              <i class=\"fa-solid fa-eye\"></i> 她眼中的世界\\n            </div>\\n            <template v-for=\"obj in keyObjects\" :key=\"obj\">\\n              <div v-if=\"(data.calcData as any).眼中的世界_格式化[obj]\" class=\"gc-detail-row\">\\n                <span class=\"gc-detail-label\">{{ obj }}</span>\\n                <span class=\"gc-detail-value\">{{ (data.calcData as any).眼中的世界_格式化[obj] }}</span>\\n              </div>\\n            </template>\\n          </div>\\n        </template>\\n\\n        \\x3c!-- 眼中的巨大娘（小人） --\\x3e\\n        <template v-if=\"\\'眼中的巨大娘_格式化\\' in data.calcData\">\\n          <div class=\"gc-detail-section\">\\n            <div class=\"gc-detail-section-title\">\\n              <i class=\"fa-solid fa-eye\"></i> 眼中的巨大娘\\n            </div>\\n            <template v-for=\"part in keyGiantessParts\" :key=\"part\">\\n              <div v-if=\"(data.calcData as any).眼中的巨大娘_格式化[part]\" class=\"gc-detail-row\">\\n                <span class=\"gc-detail-label\">{{ part }}</span>\\n                <span class=\"gc-detail-value\">{{ (data.calcData as any).眼中的巨大娘_格式化[part] }}</span>\\n              </div>\\n            </template>\\n          </div>\\n        </template>\\n\\n        \\x3c!-- 损害数据插槽 --\\x3e\\n        <slot name=\"damage\" :damage-data=\"data.damageData\"></slot>\\n        \\n        \\x3c!-- 实际损害插槽 --\\x3e\\n        <slot name=\"actual-damage\" :actual-damage=\"data.actualDamage\"></slot>\\n\\n        \\x3c!-- 身高历史 --\\x3e\\n        <template v-if=\"data.history && data.history.length > 0\">\\n          <div class=\"gc-detail-section full-width\">\\n            <div class=\"gc-detail-section-title\">\\n              <i class=\"fa-solid fa-clock-rotate-left\"></i> 最近变化\\n            </div>\\n            <div class=\"gc-history-list\">\\n              <div v-for=\"(record, idx) in data.history.slice(-3).reverse()\" :key=\"idx\" class=\"gc-history-item\">\\n                <div class=\"gc-history-time\">{{ formatTime(record.time) }}</div>\\n                <div class=\"gc-history-content\">\\n                  <span class=\"gc-history-height\">{{ record.heightFormatted }}</span>\\n                  <span v-if=\"record.reason\" class=\"gc-history-reason\">{{ record.reason }}</span>\\n                </div>\\n              </div>\\n            </div>\\n          </div>\\n        </template>\\n      </div>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\"ts\">\\nimport { computed } from \\'vue\\';\\nimport type { CharacterData } from \\'../../characters\\';\\n\\nconst props = defineProps<{\\n  name: string;\\n  data: CharacterData;\\n  showDamage?: boolean;\\n  expanded?: boolean;\\n}>();\\n\\nconst emit = defineEmits<{\\n  (e: \\'toggle\\', name: string): void;\\n}>();\\n\\nconst isExpanded = computed(() => props.expanded);\\n\\nconst toggleExpand = () => {\\n  emit(\\'toggle\\', props.name);\\n};\\n\\nconst avatarClass = computed(() => {\\n  if (!props.data.calcData) return \\'\\';\\n  return props.data.calcData.倍率 >= 1 ? \\'giant\\' : \\'tiny\\';\\n});\\n\\nconst avatarIcon = computed(() => {\\n  if (!props.data.calcData) return \\'fa-solid fa-user\\';\\n  return props.data.calcData.倍率 >= 1 ? \\'fa-solid fa-shoe-prints\\' : \\'fa-solid fa-bug\\';\\n});\\n\\nconst levelBadgeClass = computed(() => {\\n  if (!props.data.calcData) return \\'\\';\\n  return props.data.calcData.倍率 >= 1 ? \\'giant\\' : \\'tiny\\';\\n});\\n\\nconst formatTime = (time?: string) => {\\n  if (!time) return \\'\\';\\n  if (time.includes(\\' \\')) return time.split(\\' \\')[1];\\n  return time;\\n};\\n\\nconst keyBodyParts = [\\'眼睛高度\\', \\'足长\\', \\'手掌长\\', \\'乳房高度\\'];\\nconst keyObjects = [\\'普通成年人\\', \\'轿车长度\\', \\'十层楼房\\'];\\nconst keyGiantessParts = [\\'身高\\', \\'足长\\', \\'手掌长\\'];\\n<\\/script>\\n\\n<style scoped>\\n.gc-char-item {\\n  background: rgba(255, 255, 255, 0.03);\\n  border: 1px solid var(--gc-border, rgba(255, 255, 255, 0.08));\\n  border-radius: 12px;\\n  overflow: hidden;\\n  cursor: pointer;\\n  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\\n  margin-bottom: 12px;\\n}\\n\\n.gc-char-item:hover {\\n  background: rgba(255, 255, 255, 0.06);\\n  border-color: rgba(255, 255, 255, 0.15);\\n  transform: translateY(-1px);\\n}\\n\\n.gc-char-item.expanded {\\n  background: rgba(15, 23, 42, 0.6);\\n  border-color: var(--gc-primary-border, rgba(236, 72, 153, 0.4));\\n  box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.3);\\n  transform: translateY(-2px);\\n}\\n\\n.gc-char-item.has-damage {\\n  border-left: 3px solid rgba(249, 115, 22, 0.4);\\n}\\n\\n.gc-char-item.has-damage.expanded {\\n  border-left-color: #f97316;\\n}\\n\\n.gc-char-header {\\n  padding: 14px;\\n  display: flex;\\n  align-items: center;\\n  gap: 16px;\\n}\\n\\n.gc-char-avatar {\\n  width: 48px;\\n  height: 48px;\\n  border-radius: 12px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  font-size: 1.4em;\\n  flex-shrink: 0;\\n  background: rgba(255, 255, 255, 0.05);\\n  color: #94a3b8;\\n  transition: all 0.3s;\\n}\\n\\n.gc-char-avatar.giant {\\n  background: linear-gradient(135deg, rgba(249, 115, 22, 0.2), rgba(239, 68, 68, 0.2));\\n  color: #f97316;\\n  box-shadow: 0 0 15px rgba(249, 115, 22, 0.1);\\n}\\n\\n.gc-char-avatar.tiny {\\n  background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(99, 102, 241, 0.2));\\n  color: #60a5fa;\\n  box-shadow: 0 0 15px rgba(59, 130, 246, 0.1);\\n}\\n\\n.gc-char-info {\\n  flex: 1;\\n  min-width: 0;\\n}\\n\\n.gc-char-name {\\n  font-weight: 600;\\n  font-size: 1.05em;\\n  color: #f1f5f9;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  margin-bottom: 4px;\\n}\\n\\n.gc-char-expand-icon {\\n  font-size: 0.8em;\\n  color: #94a3b8;\\n  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\\n  opacity: 0.5;\\n}\\n\\n.gc-char-item:hover .gc-char-expand-icon {\\n  opacity: 1;\\n}\\n\\n.gc-char-item.expanded .gc-char-expand-icon {\\n  transform: rotate(90deg);\\n  color: var(--gc-primary, #ec4899);\\n}\\n\\n.gc-char-stats {\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n  font-size: 0.9em;\\n}\\n\\n.gc-stat-height {\\n  color: #e2e8f0;\\n  font-weight: 500;\\n}\\n\\n.gc-stat-unknown {\\n  color: #64748b;\\n  font-style: italic;\\n}\\n\\n.gc-stat-multiplier {\\n  color: #94a3b8;\\n  font-family: var(--gc-font-mono);\\n  background: rgba(255, 255, 255, 0.05);\\n  padding: 1px 6px;\\n  border-radius: 4px;\\n  font-size: 0.85em;\\n}\\n\\n.gc-level-badge {\\n  padding: 4px 10px;\\n  border-radius: 8px;\\n  font-size: 0.75em;\\n  font-weight: 700;\\n  text-transform: uppercase;\\n  background: rgba(255, 255, 255, 0.05);\\n  color: #94a3b8;\\n  letter-spacing: 0.05em;\\n}\\n\\n.gc-level-badge.giant {\\n  background: rgba(249, 115, 22, 0.15);\\n  color: #f97316;\\n}\\n\\n.gc-level-badge.tiny {\\n  background: rgba(59, 130, 246, 0.15);\\n  color: #60a5fa;\\n}\\n\\n/* 损害指示器 */\\n.gc-damage-indicator {\\n  display: inline-flex;\\n  align-items: center;\\n  gap: 4px;\\n  font-size: 0.8em;\\n  padding: 2px 8px;\\n  background: rgba(249, 115, 22, 0.1);\\n  color: #fb923c;\\n  border-radius: 6px;\\n  border: 1px solid rgba(249, 115, 22, 0.2);\\n}\\n\\n/* 详情区域 */\\n.gc-char-details {\\n  border-top: 1px solid rgba(255, 255, 255, 0.05);\\n  background: rgba(0, 0, 0, 0.15);\\n  padding: 20px;\\n  animation: slideDown 0.3s cubic-bezier(0.4, 0, 0.2, 1);\\n  max-height: 450px;\\n  overflow-y: auto;\\n}\\n\\n.gc-char-details::-webkit-scrollbar {\\n  width: 4px;\\n}\\n\\n.gc-char-details::-webkit-scrollbar-track {\\n  background: transparent;\\n}\\n\\n.gc-char-details::-webkit-scrollbar-thumb {\\n  background: rgba(255, 255, 255, 0.1);\\n  border-radius: 2px;\\n}\\n\\n.gc-char-details::-webkit-scrollbar-thumb:hover {\\n  background: rgba(255, 255, 255, 0.2);\\n}\\n\\n@keyframes slideDown {\\n  from {\\n    opacity: 0;\\n    transform: translateY(-5px);\\n  }\\n  to {\\n    opacity: 1;\\n    transform: translateY(0);\\n  }\\n}\\n\\n.gc-char-details-grid {\\n  display: grid;\\n  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));\\n  gap: 20px;\\n}\\n\\n.gc-detail-section {\\n  background: rgba(255, 255, 255, 0.02);\\n  border-radius: 8px;\\n  padding: 12px;\\n  border: 1px solid transparent;\\n}\\n\\n.gc-detail-section:hover {\\n  background: rgba(255, 255, 255, 0.04);\\n  border-color: rgba(255, 255, 255, 0.05);\\n}\\n\\n.gc-detail-section.full-width {\\n  grid-column: 1 / -1;\\n}\\n\\n.gc-detail-section-title {\\n  font-size: 0.8em;\\n  font-weight: 700;\\n  color: #94a3b8;\\n  margin-bottom: 12px;\\n  text-transform: uppercase;\\n  letter-spacing: 0.05em;\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n}\\n\\n.gc-detail-section-title i {\\n  color: var(--gc-primary, #ec4899);\\n}\\n\\n.gc-detail-row {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: baseline;\\n  font-size: 0.9em;\\n  padding: 6px 0;\\n  border-bottom: 1px dashed rgba(255, 255, 255, 0.05);\\n}\\n\\n.gc-detail-row:last-child {\\n  border-bottom: none;\\n}\\n\\n.gc-detail-label {\\n  color: #64748b;\\n}\\n\\n.gc-detail-value {\\n  color: #e2e8f0;\\n  font-family: var(--gc-font-mono);\\n  font-weight: 500;\\n}\\n\\n/* 历史记录 */\\n.gc-history-list {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 8px;\\n}\\n\\n.gc-history-item {\\n  display: flex;\\n  gap: 12px;\\n  font-size: 0.9em;\\n  padding: 8px 12px;\\n  background: rgba(0, 0, 0, 0.2);\\n  border-radius: 6px;\\n  align-items: center;\\n}\\n\\n.gc-history-time {\\n  color: #64748b;\\n  font-family: var(--gc-font-mono);\\n  font-size: 0.85em;\\n}\\n\\n.gc-history-content {\\n  flex: 1;\\n  display: flex;\\n  gap: 10px;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n  align-items: center;\\n}\\n\\n.gc-history-height {\\n  color: #f1f5f9;\\n  font-weight: 600;\\n}\\n\\n.gc-history-reason {\\n  color: #94a3b8;\\n  font-size: 0.9em;\\n  opacity: 0.8;\\n}\\n</style>\\n'],sourceRoot:''}]);const s=o},766(e,n,a){var t=a(795);t.__esModule&&(t=t.default),'string'==typeof t&&(t=[[e.id,t,'']]),t.locals&&(e.exports=t.locals);(0,a(424).A)('010e51b8',t,!1,{ssrId:!0})},795(e,n,a){a.r(n),a.d(n,{default:()=>s});var t=a(699),c=a.n(t),i=a(465),o=a.n(i)()(c());o.push([e.id,'.gc-help-content[data-v-2ca1928e]{display:flex;flex-direction:column;gap:20px}.gc-help-section[data-v-2ca1928e]{margin-bottom:8px}.gc-help-section h3[data-v-2ca1928e]{display:flex;align-items:center;gap:8px;font-size:0.95em;font-weight:600;margin-bottom:10px;color:var(--gc-text,#f1f5f9)}.gc-help-section h3 i[data-v-2ca1928e]{color:var(--gc-primary,#f472b6)}.gc-help-section p[data-v-2ca1928e]{font-size:0.85em;color:var(--gc-text-muted,#94a3b8);margin-bottom:8px}.gc-code-block[data-v-2ca1928e]{background:rgba(0,0,0,0.3);border-radius:6px;padding:10px 12px;font-family:\\'Monaco\\',\\'Menlo\\',monospace;font-size:0.8em;color:#a5f3fc;overflow-x:auto}.gc-changelog[data-v-2ca1928e]{max-height:200px;overflow-y:auto}.gc-ver-item[data-v-2ca1928e]{padding:8px 0;border-bottom:1px solid var(--gc-border,rgba(255,255,255,0.1))}.gc-ver-item[data-v-2ca1928e]:last-child{border-bottom:none}.gc-ver-item strong[data-v-2ca1928e]{color:var(--gc-primary,#f472b6)}.gc-ver-item ul[data-v-2ca1928e]{margin:6px 0 0 16px;font-size:0.8em;color:var(--gc-text-muted,#94a3b8)}.gc-help-links[data-v-2ca1928e]{margin:0 0 0 16px;font-size:0.85em;color:var(--gc-text-muted,#94a3b8)}.gc-help-links li[data-v-2ca1928e]{margin-bottom:4px}\\n','',{version:3,sources:['webpack://./src/ui/panels/HelpPanel.vue'],names:[],mappings:'AA+DA,kCACE,YAAa,CACb,qBAAsB,CACtB,QACF,CAEA,kCACE,iBACF,CAEA,qCACE,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,gBAAiB,CACjB,eAAgB,CAChB,kBAAmB,CACnB,4BACF,CAEA,uCACE,+BACF,CAEA,oCACE,gBAAiB,CACjB,kCAAoC,CACpC,iBACF,CAEA,gCACE,0BAA8B,CAC9B,iBAAkB,CAClB,iBAAkB,CAClB,sCAAyC,CACzC,eAAgB,CAChB,aAAc,CACd,eACF,CAEA,+BACE,gBAAiB,CACjB,eACF,CAEA,8BACE,aAAc,CACd,8DACF,CAEA,yCACE,kBACF,CAEA,qCACE,+BACF,CAEA,iCACE,mBAAoB,CACpB,eAAgB,CAChB,kCACF,CAEA,gCACE,iBAAkB,CAClB,gBAAiB,CACjB,kCACF,CAEA,mCACE,iBACF',sourcesContent:['<template>\\n  <GcOverlay\\n    :visible=\"visible\"\\n    title=\"帮助\"\\n    icon=\"fa-regular fa-circle-question\"\\n    @close=\"$emit(\\'close\\')\"\\n  >\\n    <div class=\"gc-help-content\">\\n      <div class=\"gc-help-section\">\\n        <h3><i class=\"fa-solid fa-rocket\"></i> 快速开始</h3>\\n        <p>在世界书或提示词中使用 MVU 命令：</p>\\n        <div class=\"gc-code-block\">\\n          _.set(\\'巨大娘.络络.当前身高\\', 170)<br>\\n          _.set(\\'巨大娘.络络.原身高\\', 1.65)\\n        </div>\\n      </div>\\n      \\n      <div class=\"gc-help-section\">\\n        <h3><i class=\"fa-solid fa-code-branch\"></i> 版本信息</h3>\\n        <p>当前版本: v{{ version }}</p>\\n        <div class=\"gc-changelog\">\\n          <div v-for=\"ver in changelog.slice(0, 3)\" :key=\"ver.version\" class=\"gc-ver-item\">\\n            <strong>v{{ ver.version }}</strong> - {{ ver.date }}\\n            <ul>\\n              <li v-for=\"(c, i) in ver.changes\" :key=\"i\">{{ c }}</li>\\n            </ul>\\n          </div>\\n        </div>\\n      </div>\\n      \\n      <div class=\"gc-help-section\">\\n        <h3><i class=\"fa-solid fa-book\"></i> 更多帮助</h3>\\n        <p>查看项目文档了解更多用法：</p>\\n        <ul class=\"gc-help-links\">\\n          <li>MVU 变量结构</li>\\n          <li>提示词模板系统</li>\\n          <li>世界观模板系统</li>\\n          <li>损害计算功能</li>\\n        </ul>\\n      </div>\\n    </div>\\n  </GcOverlay>\\n</template>\\n\\n<script setup lang=\"ts\">\\nimport { GcOverlay } from \\'../components\\';\\n\\ndefineProps<{\\n  visible: boolean;\\n  version: string;\\n  changelog: Array<{\\n    version: string;\\n    date: string;\\n    changes: string[];\\n  }>;\\n}>();\\n\\ndefineEmits<{\\n  (e: \\'close\\'): void;\\n}>();\\n<\\/script>\\n\\n<style scoped>\\n.gc-help-content {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 20px;\\n}\\n\\n.gc-help-section {\\n  margin-bottom: 8px;\\n}\\n\\n.gc-help-section h3 {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  font-size: 0.95em;\\n  font-weight: 600;\\n  margin-bottom: 10px;\\n  color: var(--gc-text, #f1f5f9);\\n}\\n\\n.gc-help-section h3 i {\\n  color: var(--gc-primary, #f472b6);\\n}\\n\\n.gc-help-section p {\\n  font-size: 0.85em;\\n  color: var(--gc-text-muted, #94a3b8);\\n  margin-bottom: 8px;\\n}\\n\\n.gc-code-block {\\n  background: rgba(0, 0, 0, 0.3);\\n  border-radius: 6px;\\n  padding: 10px 12px;\\n  font-family: \\'Monaco\\', \\'Menlo\\', monospace;\\n  font-size: 0.8em;\\n  color: #a5f3fc;\\n  overflow-x: auto;\\n}\\n\\n.gc-changelog {\\n  max-height: 200px;\\n  overflow-y: auto;\\n}\\n\\n.gc-ver-item {\\n  padding: 8px 0;\\n  border-bottom: 1px solid var(--gc-border, rgba(255, 255, 255, 0.1));\\n}\\n\\n.gc-ver-item:last-child {\\n  border-bottom: none;\\n}\\n\\n.gc-ver-item strong {\\n  color: var(--gc-primary, #f472b6);\\n}\\n\\n.gc-ver-item ul {\\n  margin: 6px 0 0 16px;\\n  font-size: 0.8em;\\n  color: var(--gc-text-muted, #94a3b8);\\n}\\n\\n.gc-help-links {\\n  margin: 0 0 0 16px;\\n  font-size: 0.85em;\\n  color: var(--gc-text-muted, #94a3b8);\\n}\\n\\n.gc-help-links li {\\n  margin-bottom: 4px;\\n}\\n</style>\\n'],sourceRoot:''}]);const s=o},799(e,n,a){var t=a(840);t.__esModule&&(t=t.default),'string'==typeof t&&(t=[[e.id,t,'']]),t.locals&&(e.exports=t.locals);(0,a(424).A)('16dfe5c4',t,!1,{ssrId:!0})},801(e,n,a){a.r(n),a.d(n,{default:()=>s});var t=a(699),c=a.n(t),i=a(465),o=a.n(i)()(c());o.push([e.id,'.gc-card[data-v-98035bae]{background:rgba(0,0,0,0.2);border:1px solid var(--gc-border,rgba(255,255,255,0.1));border-radius:10px;overflow:hidden}.gc-card-header[data-v-98035bae]{display:flex;align-items:center;gap:8px;padding:10px 14px;background:rgba(255,255,255,0.02);border-bottom:1px solid var(--gc-border,rgba(255,255,255,0.1));font-weight:500;font-size:0.9em}.gc-card-header i[data-v-98035bae]{color:var(--gc-primary,#f472b6)}.gc-card-body[data-v-98035bae]{padding:14px}\\n','',{version:3,sources:['webpack://./src/ui/components/GcCard.vue'],names:[],mappings:'AAsBA,0BACE,0BAA8B,CAC9B,uDAA4D,CAC5D,kBAAmB,CACnB,eACF,CAEA,iCACE,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,iBAAkB,CAClB,iCAAqC,CACrC,8DAAmE,CACnE,eAAgB,CAChB,eACF,CAEA,mCACE,+BACF,CAEA,+BACE,YACF',sourcesContent:['<template>\\n  <div class=\"gc-card\" :class=\"cardClass\">\\n    <div v-if=\"title\" class=\"gc-card-header\">\\n      <i v-if=\"icon\" :class=\"icon\"></i>\\n      <span>{{ title }}</span>\\n      <slot name=\"header-actions\"></slot>\\n    </div>\\n    <div class=\"gc-card-body\">\\n      <slot></slot>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\"ts\">\\ndefineProps<{\\n  title?: string;\\n  icon?: string;\\n  cardClass?: string;\\n}>();\\n<\\/script>\\n\\n<style scoped>\\n.gc-card {\\n  background: rgba(0, 0, 0, 0.2);\\n  border: 1px solid var(--gc-border, rgba(255, 255, 255, 0.1));\\n  border-radius: 10px;\\n  overflow: hidden;\\n}\\n\\n.gc-card-header {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  padding: 10px 14px;\\n  background: rgba(255, 255, 255, 0.02);\\n  border-bottom: 1px solid var(--gc-border, rgba(255, 255, 255, 0.1));\\n  font-weight: 500;\\n  font-size: 0.9em;\\n}\\n\\n.gc-card-header i {\\n  color: var(--gc-primary, #f472b6);\\n}\\n\\n.gc-card-body {\\n  padding: 14px;\\n}\\n</style>\\n'],sourceRoot:''}]);const s=o},821(e,n,a){var t=a(934);t.__esModule&&(t=t.default),'string'==typeof t&&(t=[[e.id,t,'']]),t.locals&&(e.exports=t.locals);(0,a(424).A)('74ede9b3',t,!1,{ssrId:!0})},840(e,n,a){a.r(n),a.d(n,{default:()=>s});var t=a(699),c=a.n(t),i=a(465),o=a.n(i)()(c());o.push([e.id,'.gc-debug-section[data-v-075ee580]{padding:12px;background:rgba(0,0,0,0.2);border-radius:8px;margin-bottom:12px}.gc-debug-section[data-v-075ee580]:last-child{margin-bottom:0}.gc-debug-section h3[data-v-075ee580]{display:flex;align-items:center;gap:8px;font-size:0.9em;font-weight:600;margin-bottom:10px;color:var(--gc-text,#f1f5f9)}.gc-debug-section h3 i[data-v-075ee580]{color:var(--gc-primary,#f472b6)}.gc-debug-form[data-v-075ee580]{display:flex;flex-direction:column;gap:10px}.gc-debug-input-row[data-v-075ee580]{display:flex;gap:6px;align-items:center}.gc-debug-input-row .gc-input[data-v-075ee580]{flex:1}.gc-input[data-v-075ee580]{width:100%;padding:6px 10px;background:rgba(0,0,0,0.2);border:1px solid var(--gc-border,rgba(255,255,255,0.1));border-radius:6px;color:var(--gc-text,#f1f5f9);font-size:0.85em}.gc-input.sm[data-v-075ee580]{padding:4px 8px;font-size:0.8em}.gc-debug-hint[data-v-075ee580]{display:flex;align-items:flex-start;gap:6px;padding:8px 10px;background:rgba(59,130,246,0.1);border-radius:6px;font-size:0.8em;color:#60a5fa}.gc-debug-hint i[data-v-075ee580]{margin-top:2px}.gc-debug-hint strong.tiny[data-v-075ee580]{color:#60a5fa}.gc-debug-hint strong.giant[data-v-075ee580]{color:var(--gc-primary,#f472b6)}.gc-debug-hint.damage[data-v-075ee580]{background:rgba(239,68,68,0.1);color:#f87171}.gc-debug-hint.muted[data-v-075ee580]{background:rgba(148,163,184,0.1);color:var(--gc-text-muted,#94a3b8)}.gc-debug-btn-row[data-v-075ee580]{display:flex;gap:6px;flex-wrap:wrap}.gc-btn[data-v-075ee580]{display:inline-flex;align-items:center;justify-content:center;gap:6px;padding:8px 14px;background:rgba(255,255,255,0.05);border:1px solid var(--gc-border,rgba(255,255,255,0.1));border-radius:8px;color:var(--gc-text,#f1f5f9);font-weight:500;font-size:0.85em;cursor:pointer;transition:all 0.2s}.gc-btn[data-v-075ee580]:hover{background:rgba(255,255,255,0.1)}.gc-btn-sm[data-v-075ee580]{padding:6px 10px;font-size:0.8em}.gc-btn.primary[data-v-075ee580]{background:var(--gc-primary,#f472b6);border-color:var(--gc-primary,#f472b6);color:white}.gc-btn.primary[data-v-075ee580]:hover{background:var(--gc-primary-hover,#ec4899)}.gc-btn.danger[data-v-075ee580]{background:rgba(239,68,68,0.1);border-color:rgba(239,68,68,0.3);color:#f87171}.gc-btn.danger[data-v-075ee580]:hover{background:rgba(239,68,68,0.2)}.gc-btn[data-v-075ee580]:disabled{opacity:0.5;cursor:not-allowed}.gc-debug-quick-tests[data-v-075ee580]{display:flex;flex-wrap:wrap;gap:6px}.gc-debug-quick-tests .gc-btn.tiny[data-v-075ee580]{background:rgba(96,165,250,0.1);border-color:rgba(96,165,250,0.3);color:#60a5fa}.gc-debug-quick-tests .gc-btn.tiny[data-v-075ee580]:hover{background:rgba(96,165,250,0.2)}.gc-setting-item[data-v-075ee580]{display:flex;flex-direction:column;gap:6px}.gc-setting-item label[data-v-075ee580]{font-size:0.85em;color:var(--gc-text-muted,#94a3b8)}.gc-actual-damage-form[data-v-075ee580]{display:flex;flex-direction:column;gap:10px;padding:10px;background:rgba(239,68,68,0.05);border-radius:6px;border:1px solid rgba(239,68,68,0.1)}.gc-debug-input-group[data-v-075ee580]{display:flex;flex-direction:column;gap:4px}.gc-debug-input-group label[data-v-075ee580]{font-size:0.8em;color:var(--gc-text-muted,#94a3b8)}.gc-input-suffix[data-v-075ee580]{color:var(--gc-text-muted,#94a3b8);font-size:0.85em;white-space:nowrap}\\n','',{version:3,sources:['webpack://./src/ui/features/debug/DebugTestSection.vue'],names:[],mappings:'AA6OA,mCACE,YAAa,CACb,0BAA8B,CAC9B,iBAAkB,CAClB,kBACF,CAEA,8CACE,eACF,CAEA,sCACE,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,eAAgB,CAChB,eAAgB,CAChB,kBAAmB,CACnB,4BACF,CAEA,wCACE,+BACF,CAEA,gCACE,YAAa,CACb,qBAAsB,CACtB,QACF,CAEA,qCACE,YAAa,CACb,OAAQ,CACR,kBACF,CAEA,+CACE,MACF,CAEA,2BACE,UAAW,CACX,gBAAiB,CACjB,0BAA8B,CAC9B,uDAA4D,CAC5D,iBAAkB,CAClB,4BAA8B,CAC9B,gBACF,CAEA,8BACE,eAAgB,CAChB,eACF,CAEA,gCACE,YAAa,CACb,sBAAuB,CACvB,OAAQ,CACR,gBAAiB,CACjB,+BAAmC,CACnC,iBAAkB,CAClB,eAAgB,CAChB,aACF,CAEA,kCACE,cACF,CAEA,4CACE,aACF,CAEA,6CACE,+BACF,CAEA,uCACE,8BAAkC,CAClC,aACF,CAEA,sCACE,gCAAoC,CACpC,kCACF,CAEA,mCACE,YAAa,CACb,OAAQ,CACR,cACF,CAEA,yBACE,mBAAoB,CACpB,kBAAmB,CACnB,sBAAuB,CACvB,OAAQ,CACR,gBAAiB,CACjB,iCAAqC,CACrC,uDAA4D,CAC5D,iBAAkB,CAClB,4BAA8B,CAC9B,eAAgB,CAChB,gBAAiB,CACjB,cAAe,CACf,mBACF,CAEA,+BACE,gCACF,CAEA,4BACE,gBAAiB,CACjB,eACF,CAEA,iCACE,oCAAsC,CACtC,sCAAwC,CACxC,WACF,CAEA,uCACE,0CACF,CAEA,gCACE,8BAAkC,CAClC,gCAAoC,CACpC,aACF,CAEA,sCACE,8BACF,CAEA,kCACE,WAAY,CACZ,kBACF,CAEA,uCACE,YAAa,CACb,cAAe,CACf,OACF,CAEA,oDACE,+BAAmC,CACnC,iCAAqC,CACrC,aACF,CAEA,0DACE,+BACF,CAEA,kCACE,YAAa,CACb,qBAAsB,CACtB,OACF,CAEA,wCACE,gBAAiB,CACjB,kCACF,CAEA,wCACE,YAAa,CACb,qBAAsB,CACtB,QAAS,CACT,YAAa,CACb,+BAAmC,CACnC,iBAAkB,CAClB,oCACF,CAEA,uCACE,YAAa,CACb,qBAAsB,CACtB,OACF,CAEA,6CACE,eAAgB,CAChB,kCACF,CAEA,kCACE,kCAAoC,CACpC,gBAAiB,CACjB,kBACF',sourcesContent:['<template>\\n  <div class=\"gc-debug-test-section\">\\n    \\x3c!-- 测试数据注入 --\\x3e\\n    <div class=\"gc-debug-section\">\\n      <h3><i class=\"fa-solid fa-flask\"></i> 测试数据注入</h3>\\n      <div class=\"gc-debug-form\">\\n        <div class=\"gc-debug-input-row\">\\n          <input \\n            :value=\"testName\" \\n            @input=\"$emit(\\'update:test-name\\', ($event.target as HTMLInputElement).value)\" \\n            type=\"text\" \\n            placeholder=\"角色名\" \\n            class=\"gc-input sm\" \\n          />\\n          <input \\n            :value=\"testHeight\" \\n            @input=\"$emit(\\'update:test-height\\', parseFloat(($event.target as HTMLInputElement).value) || 0)\" \\n            type=\"number\" \\n            placeholder=\"身高(m)\" \\n            class=\"gc-input sm\" \\n          />\\n          <input \\n            :value=\"testOriginal\" \\n            @input=\"$emit(\\'update:test-original\\', parseFloat(($event.target as HTMLInputElement).value) || 0)\" \\n            type=\"number\" \\n            placeholder=\"原高(m)\" \\n            class=\"gc-input sm\" \\n          />\\n        </div>\\n        <div class=\"gc-debug-hint\">\\n          <i class=\"fa-solid fa-info-circle\"></i>\\n          <span v-if=\"testHeight && testOriginal && testHeight < testOriginal\">\\n            将创建<strong class=\"tiny\">小人</strong>（{{ (testHeight / testOriginal).toFixed(4) }}倍）\\n          </span>\\n          <span v-else-if=\"testHeight && testOriginal\">\\n            将创建<strong class=\"giant\">巨大娘</strong>（{{ (testHeight / testOriginal).toFixed(1) }}倍）\\n          </span>\\n          <span v-else>输入身高和原高自动判断类型</span>\\n        </div>\\n        <div class=\"gc-debug-btn-row\">\\n          <button class=\"gc-btn gc-btn-sm primary\" @click=\"$emit(\\'inject\\')\">\\n            <i class=\"fa-solid fa-syringe\"></i> 注入测试\\n          </button>\\n          <button class=\"gc-btn gc-btn-sm\" @click=\"$emit(\\'clear\\', testName)\" :disabled=\"!testName\">\\n            <i class=\"fa-solid fa-eraser\"></i> 清除此角色\\n          </button>\\n          <button class=\"gc-btn gc-btn-sm danger\" @click=\"$emit(\\'clear\\')\">\\n            <i class=\"fa-solid fa-trash\"></i> 清除全部\\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n\\n    \\x3c!-- 快捷测试 --\\x3e\\n    <div class=\"gc-debug-section\">\\n      <h3><i class=\"fa-solid fa-lightbulb\"></i> 快捷测试</h3>\\n      <div class=\"gc-debug-quick-tests\">\\n        <button class=\"gc-btn gc-btn-sm\" @click=\"$emit(\\'quick-test\\', { name: \\'巨人\\', height: 100, original: 1.65 })\">\\n          巨大娘 100m\\n        </button>\\n        <button class=\"gc-btn gc-btn-sm\" @click=\"$emit(\\'quick-test\\', { name: \\'千米级\\', height: 1000, original: 1.65 })\">\\n          千米级 1km\\n        </button>\\n        <button class=\"gc-btn gc-btn-sm\" @click=\"$emit(\\'quick-test\\', { name: \\'行星级\\', height: 10000000, original: 1.65 })\">\\n          行星级 10Mm\\n        </button>\\n        <button class=\"gc-btn gc-btn-sm tiny\" @click=\"$emit(\\'quick-test\\', { name: \\'小人\\', height: 0.01, original: 1.65 })\">\\n          小人 1cm\\n        </button>\\n        <button class=\"gc-btn gc-btn-sm tiny\" @click=\"$emit(\\'quick-test\\', { name: \\'微型\\', height: 0.001, original: 1.65 })\">\\n          微型 1mm\\n        </button>\\n      </div>\\n    </div>\\n\\n    \\x3c!-- 实际损害录入 --\\x3e\\n    <div class=\"gc-debug-section\">\\n      <h3><i class=\"fa-solid fa-skull\"></i> 实际损害录入</h3>\\n      <div class=\"gc-debug-form\">\\n        <div class=\"gc-debug-hint damage\">\\n          <i class=\"fa-solid fa-info-circle\"></i>\\n          <span>记录角色在剧情中造成的实际损害</span>\\n        </div>\\n        \\n        <div class=\"gc-setting-item\">\\n          <label>选择角色</label>\\n          <select v-model=\"damageTarget\" class=\"gc-input\">\\n            <option value=\"\">-- 选择角色 --</option>\\n            <option \\n              v-for=\"char in giantCharacters\" \\n              :key=\"char.name\" \\n              :value=\"char.name\"\\n            >\\n              {{ char.name }}\\n            </option>\\n          </select>\\n        </div>\\n        \\n        <div v-if=\"damageTarget\" class=\"gc-actual-damage-form\">\\n          <div class=\"gc-debug-input-group\">\\n            <label>累计伤亡</label>\\n            <div class=\"gc-debug-input-row\">\\n              <input \\n                v-model.number=\"damageForm.totalCasualties\" \\n                type=\"number\" \\n                class=\"gc-input sm\" \\n                placeholder=\"0\" \\n              />\\n              <span class=\"gc-input-suffix\">人</span>\\n            </div>\\n          </div>\\n          \\n          <div class=\"gc-debug-input-group\">\\n            <label>累计建筑损毁</label>\\n            <div class=\"gc-debug-input-row\">\\n              <input \\n                v-model.number=\"damageForm.totalBuildings\" \\n                type=\"number\" \\n                class=\"gc-input sm\" \\n                placeholder=\"0\" \\n              />\\n              <span class=\"gc-input-suffix\">栋</span>\\n            </div>\\n          </div>\\n          \\n          <div class=\"gc-debug-input-group\">\\n            <label>最近行动描述</label>\\n            <input \\n              v-model=\"damageForm.lastAction\" \\n              type=\"text\" \\n              class=\"gc-input\" \\n              placeholder=\"如：踩下一脚\" \\n            />\\n          </div>\\n          \\n          <div class=\"gc-debug-input-group\">\\n            <label>最近行动伤亡</label>\\n            <div class=\"gc-debug-input-row\">\\n              <input \\n                v-model.number=\"damageForm.lastActionCasualties\" \\n                type=\"number\" \\n                class=\"gc-input sm\" \\n                placeholder=\"0\" \\n              />\\n              <span class=\"gc-input-suffix\">人</span>\\n            </div>\\n          </div>\\n          \\n          <div class=\"gc-debug-input-group\">\\n            <label>备注</label>\\n            <input \\n              v-model=\"damageForm.note\" \\n              type=\"text\" \\n              class=\"gc-input\" \\n              placeholder=\"可选备注\" \\n            />\\n          </div>\\n          \\n          <div class=\"gc-debug-btn-row\">\\n            <button class=\"gc-btn gc-btn-sm primary\" @click=\"saveDamage\">\\n              <i class=\"fa-solid fa-save\"></i> 保存\\n            </button>\\n            <button class=\"gc-btn gc-btn-sm danger\" @click=\"clearDamage\">\\n              <i class=\"fa-solid fa-trash\"></i> 清除\\n            </button>\\n          </div>\\n        </div>\\n        \\n        <div v-else class=\"gc-debug-hint muted\">\\n          <i class=\"fa-solid fa-exclamation-circle\"></i>\\n          <span>请先选择一个巨大娘角色</span>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\"ts\">\\nimport { ref, computed } from \\'vue\\';\\nimport type { CharacterData } from \\'../../../types\\';\\n\\nconst props = defineProps<{\\n  testName: string;\\n  testHeight: number;\\n  testOriginal: number;\\n  characters: CharacterData[];\\n}>();\\n\\nconst emit = defineEmits<{\\n  (e: \\'update:test-name\\', value: string): void;\\n  (e: \\'update:test-height\\', value: number): void;\\n  (e: \\'update:test-original\\', value: number): void;\\n  (e: \\'inject\\'): void;\\n  (e: \\'clear\\', name?: string): void;\\n  (e: \\'quick-test\\', params: { name: string; height: number; original: number }): void;\\n  (e: \\'save-damage\\', params: { name: string; data: typeof damageForm.value }): void;\\n  (e: \\'clear-damage\\', name: string): void;\\n}>();\\n\\nconst damageTarget = ref(\\'\\');\\nconst damageForm = ref({\\n  totalCasualties: 0,\\n  totalBuildings: 0,\\n  lastAction: \\'\\',\\n  lastActionCasualties: 0,\\n  note: \\'\\',\\n});\\n\\nconst giantCharacters = computed(() => \\n  props.characters.filter(c => {\\n    const scale = c.currentHeight / c.originalHeight;\\n    return scale >= 1;\\n  })\\n);\\n\\nconst saveDamage = () => {\\n  if (!damageTarget.value) return;\\n  emit(\\'save-damage\\', {\\n    name: damageTarget.value,\\n    data: { ...damageForm.value },\\n  });\\n};\\n\\nconst clearDamage = () => {\\n  if (!damageTarget.value) return;\\n  emit(\\'clear-damage\\', damageTarget.value);\\n  damageForm.value = {\\n    totalCasualties: 0,\\n    totalBuildings: 0,\\n    lastAction: \\'\\',\\n    lastActionCasualties: 0,\\n    note: \\'\\',\\n  };\\n};\\n<\\/script>\\n\\n<style scoped>\\n.gc-debug-section {\\n  padding: 12px;\\n  background: rgba(0, 0, 0, 0.2);\\n  border-radius: 8px;\\n  margin-bottom: 12px;\\n}\\n\\n.gc-debug-section:last-child {\\n  margin-bottom: 0;\\n}\\n\\n.gc-debug-section h3 {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  font-size: 0.9em;\\n  font-weight: 600;\\n  margin-bottom: 10px;\\n  color: var(--gc-text, #f1f5f9);\\n}\\n\\n.gc-debug-section h3 i {\\n  color: var(--gc-primary, #f472b6);\\n}\\n\\n.gc-debug-form {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 10px;\\n}\\n\\n.gc-debug-input-row {\\n  display: flex;\\n  gap: 6px;\\n  align-items: center;\\n}\\n\\n.gc-debug-input-row .gc-input {\\n  flex: 1;\\n}\\n\\n.gc-input {\\n  width: 100%;\\n  padding: 6px 10px;\\n  background: rgba(0, 0, 0, 0.2);\\n  border: 1px solid var(--gc-border, rgba(255, 255, 255, 0.1));\\n  border-radius: 6px;\\n  color: var(--gc-text, #f1f5f9);\\n  font-size: 0.85em;\\n}\\n\\n.gc-input.sm {\\n  padding: 4px 8px;\\n  font-size: 0.8em;\\n}\\n\\n.gc-debug-hint {\\n  display: flex;\\n  align-items: flex-start;\\n  gap: 6px;\\n  padding: 8px 10px;\\n  background: rgba(59, 130, 246, 0.1);\\n  border-radius: 6px;\\n  font-size: 0.8em;\\n  color: #60a5fa;\\n}\\n\\n.gc-debug-hint i {\\n  margin-top: 2px;\\n}\\n\\n.gc-debug-hint strong.tiny {\\n  color: #60a5fa;\\n}\\n\\n.gc-debug-hint strong.giant {\\n  color: var(--gc-primary, #f472b6);\\n}\\n\\n.gc-debug-hint.damage {\\n  background: rgba(239, 68, 68, 0.1);\\n  color: #f87171;\\n}\\n\\n.gc-debug-hint.muted {\\n  background: rgba(148, 163, 184, 0.1);\\n  color: var(--gc-text-muted, #94a3b8);\\n}\\n\\n.gc-debug-btn-row {\\n  display: flex;\\n  gap: 6px;\\n  flex-wrap: wrap;\\n}\\n\\n.gc-btn {\\n  display: inline-flex;\\n  align-items: center;\\n  justify-content: center;\\n  gap: 6px;\\n  padding: 8px 14px;\\n  background: rgba(255, 255, 255, 0.05);\\n  border: 1px solid var(--gc-border, rgba(255, 255, 255, 0.1));\\n  border-radius: 8px;\\n  color: var(--gc-text, #f1f5f9);\\n  font-weight: 500;\\n  font-size: 0.85em;\\n  cursor: pointer;\\n  transition: all 0.2s;\\n}\\n\\n.gc-btn:hover {\\n  background: rgba(255, 255, 255, 0.1);\\n}\\n\\n.gc-btn-sm {\\n  padding: 6px 10px;\\n  font-size: 0.8em;\\n}\\n\\n.gc-btn.primary {\\n  background: var(--gc-primary, #f472b6);\\n  border-color: var(--gc-primary, #f472b6);\\n  color: white;\\n}\\n\\n.gc-btn.primary:hover {\\n  background: var(--gc-primary-hover, #ec4899);\\n}\\n\\n.gc-btn.danger {\\n  background: rgba(239, 68, 68, 0.1);\\n  border-color: rgba(239, 68, 68, 0.3);\\n  color: #f87171;\\n}\\n\\n.gc-btn.danger:hover {\\n  background: rgba(239, 68, 68, 0.2);\\n}\\n\\n.gc-btn:disabled {\\n  opacity: 0.5;\\n  cursor: not-allowed;\\n}\\n\\n.gc-debug-quick-tests {\\n  display: flex;\\n  flex-wrap: wrap;\\n  gap: 6px;\\n}\\n\\n.gc-debug-quick-tests .gc-btn.tiny {\\n  background: rgba(96, 165, 250, 0.1);\\n  border-color: rgba(96, 165, 250, 0.3);\\n  color: #60a5fa;\\n}\\n\\n.gc-debug-quick-tests .gc-btn.tiny:hover {\\n  background: rgba(96, 165, 250, 0.2);\\n}\\n\\n.gc-setting-item {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 6px;\\n}\\n\\n.gc-setting-item label {\\n  font-size: 0.85em;\\n  color: var(--gc-text-muted, #94a3b8);\\n}\\n\\n.gc-actual-damage-form {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 10px;\\n  padding: 10px;\\n  background: rgba(239, 68, 68, 0.05);\\n  border-radius: 6px;\\n  border: 1px solid rgba(239, 68, 68, 0.1);\\n}\\n\\n.gc-debug-input-group {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 4px;\\n}\\n\\n.gc-debug-input-group label {\\n  font-size: 0.8em;\\n  color: var(--gc-text-muted, #94a3b8);\\n}\\n\\n.gc-input-suffix {\\n  color: var(--gc-text-muted, #94a3b8);\\n  font-size: 0.85em;\\n  white-space: nowrap;\\n}\\n</style>\\n'],sourceRoot:''}]);const s=o},844(e,n,a){var t=a(585);t.__esModule&&(t=t.default),'string'==typeof t&&(t=[[e.id,t,'']]),t.locals&&(e.exports=t.locals);(0,a(424).A)('9b712da2',t,!1,{ssrId:!0})},894(e,n,a){var t=a(345);t.__esModule&&(t=t.default),'string'==typeof t&&(t=[[e.id,t,'']]),t.locals&&(e.exports=t.locals);(0,a(424).A)('85fd753e',t,!1,{ssrId:!0})},901(e,n,a){a.r(n),a.d(n,{default:()=>s});var t=a(699),c=a.n(t),i=a(465),o=a.n(i)()(c());o.push([e.id,'.gc-debug-empty[data-v-3eacdf91]{display:flex;flex-direction:column;align-items:center;padding:40px 20px;text-align:center}.gc-debug-empty i[data-v-3eacdf91]{font-size:2.5em;color:var(--gc-text-muted,#94a3b8);margin-bottom:12px}.gc-debug-empty p[data-v-3eacdf91]{font-size:0.95em;margin-bottom:6px}.gc-debug-empty small[data-v-3eacdf91]{font-size:0.8em;color:var(--gc-text-muted,#94a3b8)}.gc-debug-characters[data-v-3eacdf91]{display:flex;flex-direction:column;gap:12px}.gc-debug-char-card[data-v-3eacdf91]{background:rgba(0,0,0,0.2);border-radius:8px;padding:12px;border-left:3px solid transparent}.gc-debug-char-card[data-v-3eacdf91]:hover{background:rgba(0,0,0,0.3)}.gc-debug-char-card.giant[data-v-3eacdf91]{border-left-color:var(--gc-primary,#f472b6)}.gc-debug-char-card.tiny[data-v-3eacdf91]{border-left-color:#60a5fa}.gc-debug-char-header[data-v-3eacdf91]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;padding-bottom:8px;border-bottom:1px solid rgba(255,255,255,0.1)}.gc-debug-char-name[data-v-3eacdf91]{font-weight:600;font-size:0.95em}.gc-debug-char-type[data-v-3eacdf91]{font-size:0.75em;padding:2px 8px;border-radius:4px;background:rgba(255,255,255,0.1)}.gc-debug-char-type.giant[data-v-3eacdf91]{background:rgba(244,114,182,0.2);color:#f472b6}.gc-debug-char-type.tiny[data-v-3eacdf91]{background:rgba(96,165,250,0.2);color:#60a5fa}.gc-debug-char-body[data-v-3eacdf91]{margin-bottom:8px}.gc-debug-char-row[data-v-3eacdf91]{display:flex;justify-content:space-between;align-items:center;font-size:0.8em;padding:3px 0}.gc-debug-char-row span[data-v-3eacdf91]:last-child{text-align:right}.gc-debug-char-row .mono[data-v-3eacdf91]{font-family:\\'Monaco\\',\\'Menlo\\',monospace}.gc-debug-char-row .success[data-v-3eacdf91]{color:#34d399}.gc-debug-char-row .warn[data-v-3eacdf91]{color:#fbbf24}.gc-debug-char-row .muted[data-v-3eacdf91]{color:var(--gc-text-muted,#94a3b8)}.gc-debug-char-row .highlight[data-v-3eacdf91]{color:var(--gc-primary,#f472b6)}.gc-debug-char-row .damage[data-v-3eacdf91]{color:#f87171}.gc-debug-char-row .actual-damage[data-v-3eacdf91]{color:#f87171;font-weight:600}.gc-debug-char-row .action[data-v-3eacdf91]{max-width:150px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:var(--gc-text-muted,#94a3b8)}.gc-debug-char-custom[data-v-3eacdf91],.gc-debug-char-damage[data-v-3eacdf91]{margin-top:8px;padding-top:8px;border-top:1px solid rgba(255,255,255,0.1)}.gc-debug-char-custom-title[data-v-3eacdf91],.gc-debug-char-damage-title[data-v-3eacdf91]{display:flex;align-items:center;gap:6px;font-size:0.8em;font-weight:600;margin-bottom:6px}.gc-debug-char-custom-title[data-v-3eacdf91]{color:#fbbf24}.gc-debug-char-damage-title[data-v-3eacdf91]{color:#f87171}.gc-debug-char-damage.estimate .gc-debug-char-damage-title[data-v-3eacdf91]{color:#60a5fa}.gc-debug-char-damage.actual .gc-debug-char-damage-title[data-v-3eacdf91]{color:#f87171}.gc-debug-char-damage-badge[data-v-3eacdf91]{font-size:0.85em;padding:1px 6px;background:rgba(96,165,250,0.2);color:#60a5fa;border-radius:3px;font-weight:normal}.gc-debug-char-damage-badge.actual[data-v-3eacdf91]{background:rgba(239,68,68,0.2);color:#f87171}.gc-debug-char-no-damage[data-v-3eacdf91]{margin-top:8px;padding:8px 10px;background:rgba(255,255,255,0.05);border-radius:6px;font-size:0.8em;color:var(--gc-text-muted,#94a3b8);display:flex;align-items:center;gap:6px}.gc-debug-char-no-damage i[data-v-3eacdf91]{color:#60a5fa}\\n','',{version:3,sources:['webpack://./src/ui/features/debug/DebugCharactersSection.vue'],names:[],mappings:'AA+HA,iCACE,YAAa,CACb,qBAAsB,CACtB,kBAAmB,CACnB,iBAAkB,CAClB,iBACF,CAEA,mCACE,eAAgB,CAChB,kCAAoC,CACpC,kBACF,CAEA,mCACE,gBAAiB,CACjB,iBACF,CAEA,uCACE,eAAgB,CAChB,kCACF,CAEA,sCACE,YAAa,CACb,qBAAsB,CACtB,QACF,CAEA,qCACE,0BAA8B,CAC9B,iBAAkB,CAClB,YAAa,CACb,iCACF,CAEA,2CACE,0BACF,CAEA,2CACE,2CACF,CAEA,0CACE,yBACF,CAEA,uCACE,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,kBAAmB,CACnB,kBAAmB,CACnB,6CACF,CAEA,qCACE,eAAgB,CAChB,gBACF,CAEA,qCACE,gBAAiB,CACjB,eAAgB,CAChB,iBAAkB,CAClB,gCACF,CAEA,2CACE,gCAAoC,CACpC,aACF,CAEA,0CACE,+BAAmC,CACnC,aACF,CAEA,qCACE,iBACF,CAEA,oCACE,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,eAAgB,CAChB,aACF,CAEA,oDACE,gBACF,CAEA,0CACE,sCACF,CAEA,6CACE,aACF,CAEA,0CACE,aACF,CAEA,2CACE,kCACF,CAEA,+CACE,+BACF,CAEA,4CACE,aACF,CAEA,mDACE,aAAc,CACd,eACF,CAEA,4CACE,eAAgB,CAChB,eAAgB,CAChB,sBAAuB,CACvB,kBAAmB,CACnB,kCACF,CAEA,8EAEE,cAAe,CACf,eAAgB,CAChB,0CACF,CAEA,0FAEE,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,eAAgB,CAChB,eAAgB,CAChB,iBACF,CAEA,6CACE,aACF,CAEA,6CACE,aACF,CAEA,4EACE,aACF,CAEA,0EACE,aACF,CAEA,6CACE,gBAAiB,CACjB,eAAgB,CAChB,+BAAmC,CACnC,aAAc,CACd,iBAAkB,CAClB,kBACF,CAEA,oDACE,8BAAkC,CAClC,aACF,CAEA,0CACE,cAAe,CACf,gBAAiB,CACjB,iCAAqC,CACrC,iBAAkB,CAClB,eAAgB,CAChB,kCAAoC,CACpC,YAAa,CACb,kBAAmB,CACnB,OACF,CAEA,4CACE,aACF',sourcesContent:['<template>\\n  <div class=\"gc-debug-characters-section\">\\n    <div v-if=\"!characters.length\" class=\"gc-debug-empty\">\\n      <i class=\"fa-solid fa-users-slash\"></i>\\n      <p>暂无角色数据</p>\\n      <small>在世界书或提示词中设置角色身高后，这里会显示详细信息</small>\\n    </div>\\n    \\n    <div v-else class=\"gc-debug-characters\">\\n      <div \\n        v-for=\"char in characters\" \\n        :key=\"char.name\" \\n        class=\"gc-debug-char-card\"\\n        :class=\"{ giant: char.类型 === \\'巨大娘\\', tiny: char.类型 === \\'小人\\' }\"\\n      >\\n        <div class=\"gc-debug-char-header\">\\n          <span class=\"gc-debug-char-name\">{{ char.name }}</span>\\n          <span class=\"gc-debug-char-type\" :class=\"char.类型 === \\'巨大娘\\' ? \\'giant\\' : \\'tiny\\'\">\\n            {{ char.类型 }}\\n          </span>\\n        </div>\\n        \\n        <div class=\"gc-debug-char-body\">\\n          <div class=\"gc-debug-char-row\">\\n            <span>身高</span>\\n            <span class=\"mono\">{{ char.当前身高_格式化 || `${char.当前身高}m` }}</span>\\n          </div>\\n          <div class=\"gc-debug-char-row\">\\n            <span>原身高</span>\\n            <span class=\"mono\">{{ char.原身高 }}m</span>\\n          </div>\\n          <div class=\"gc-debug-char-row\">\\n            <span>倍率</span>\\n            <span class=\"mono\">{{ char.倍率?.toFixed(2) }}x</span>\\n          </div>\\n          <div v-if=\"char.级别\" class=\"gc-debug-char-row\">\\n            <span>级别</span>\\n            <span class=\"highlight\">{{ char.级别 }}</span>\\n          </div>\\n          <div class=\"gc-debug-char-row\">\\n            <span>计算数据</span>\\n            <span :class=\"char.有计算数据 ? \\'success\\' : \\'warn\\'\">{{ char.有计算数据 ? \\'✅\\' : \\'❌\\' }}</span>\\n          </div>\\n          <div class=\"gc-debug-char-row\">\\n            <span>损害数据</span>\\n            <span :class=\"char.有损害数据 ? \\'success\\' : \\'muted\\'\">{{ char.有损害数据 ? \\'✅\\' : \\'—\\' }}</span>\\n          </div>\\n          <div class=\"gc-debug-char-row\">\\n            <span>历史记录</span>\\n            <span>{{ char.有身高历史 ? `${char.历史记录数}条` : \\'—\\' }}</span>\\n          </div>\\n        </div>\\n        \\n        \\x3c!-- 自定义部位 --\\x3e\\n        <div v-if=\"char.自定义部位 && Object.keys(char.自定义部位).length\" class=\"gc-debug-char-custom\">\\n          <div class=\"gc-debug-char-custom-title\">\\n            <i class=\"fa-solid fa-bolt\"></i> 自定义部位\\n          </div>\\n          <div v-for=\"(val, key) in char.自定义部位\" :key=\"key\" class=\"gc-debug-char-row\">\\n            <span>{{ key }}</span>\\n            <span class=\"mono\">{{ val }}m</span>\\n          </div>\\n        </div>\\n        \\n        \\x3c!-- 预估损害 --\\x3e\\n        <div v-if=\"char.预估损害\" class=\"gc-debug-char-damage estimate\">\\n          <div class=\"gc-debug-char-damage-title\">\\n            <i class=\"fa-solid fa-calculator\"></i> 预估损害\\n            <span class=\"gc-debug-char-damage-badge\">自动计算</span>\\n          </div>\\n          <div class=\"gc-debug-char-row\">\\n            <span>破坏力等级</span>\\n            <span class=\"damage\">{{ char.预估损害.破坏力等级 }}</span>\\n          </div>\\n          <div class=\"gc-debug-char-row\">\\n            <span>单步伤亡</span>\\n            <span class=\"damage\">{{ char.预估损害.单步伤亡 }}</span>\\n          </div>\\n          <div class=\"gc-debug-char-row\">\\n            <span>场景</span>\\n            <span>{{ char.预估损害.场景 }}</span>\\n          </div>\\n        </div>\\n        \\n        \\x3c!-- 实际损害 --\\x3e\\n        <div v-if=\"char.实际损害\" class=\"gc-debug-char-damage actual\">\\n          <div class=\"gc-debug-char-damage-title\">\\n            <i class=\"fa-solid fa-skull\"></i> 实际损害\\n            <span class=\"gc-debug-char-damage-badge actual\">剧情记录</span>\\n          </div>\\n          <div v-if=\"char.实际损害.总伤亡人数_格式化\" class=\"gc-debug-char-row\">\\n            <span>累计伤亡</span>\\n            <span class=\"actual-damage\">{{ char.实际损害.总伤亡人数_格式化 }}</span>\\n          </div>\\n          <div v-if=\"char.实际损害.总建筑损毁\" class=\"gc-debug-char-row\">\\n            <span>累计建筑损毁</span>\\n            <span class=\"actual-damage\">{{ char.实际损害.总建筑损毁 }}栋</span>\\n          </div>\\n          <div v-if=\"char.实际损害.最近行动\" class=\"gc-debug-char-row\">\\n            <span>最近行动</span>\\n            <span class=\"action\">{{ char.实际损害.最近行动 }}</span>\\n          </div>\\n          <div v-if=\"char.实际损害.重大事件数\" class=\"gc-debug-char-row\">\\n            <span>重大事件</span>\\n            <span>{{ char.实际损害.重大事件数 }}件</span>\\n          </div>\\n        </div>\\n        \\n        \\x3c!-- 无损害数据提示 --\\x3e\\n        <div v-if=\"!char.预估损害 && !char.实际损害 && char.类型 === \\'巨大娘\\'\" class=\"gc-debug-char-no-damage\">\\n          <i class=\"fa-solid fa-info-circle\"></i>\\n          <span>启用损害计算后显示预估数据</span>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\"ts\">\\nimport type { DebugCharacterInfo } from \\'../../../types\\';\\n\\ndefineProps<{\\n  characters: DebugCharacterInfo[];\\n}>();\\n<\\/script>\\n\\n<style scoped>\\n.gc-debug-empty {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  padding: 40px 20px;\\n  text-align: center;\\n}\\n\\n.gc-debug-empty i {\\n  font-size: 2.5em;\\n  color: var(--gc-text-muted, #94a3b8);\\n  margin-bottom: 12px;\\n}\\n\\n.gc-debug-empty p {\\n  font-size: 0.95em;\\n  margin-bottom: 6px;\\n}\\n\\n.gc-debug-empty small {\\n  font-size: 0.8em;\\n  color: var(--gc-text-muted, #94a3b8);\\n}\\n\\n.gc-debug-characters {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 12px;\\n}\\n\\n.gc-debug-char-card {\\n  background: rgba(0, 0, 0, 0.2);\\n  border-radius: 8px;\\n  padding: 12px;\\n  border-left: 3px solid transparent;\\n}\\n\\n.gc-debug-char-card:hover {\\n  background: rgba(0, 0, 0, 0.3);\\n}\\n\\n.gc-debug-char-card.giant {\\n  border-left-color: var(--gc-primary, #f472b6);\\n}\\n\\n.gc-debug-char-card.tiny {\\n  border-left-color: #60a5fa;\\n}\\n\\n.gc-debug-char-header {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  margin-bottom: 10px;\\n  padding-bottom: 8px;\\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\\n}\\n\\n.gc-debug-char-name {\\n  font-weight: 600;\\n  font-size: 0.95em;\\n}\\n\\n.gc-debug-char-type {\\n  font-size: 0.75em;\\n  padding: 2px 8px;\\n  border-radius: 4px;\\n  background: rgba(255, 255, 255, 0.1);\\n}\\n\\n.gc-debug-char-type.giant {\\n  background: rgba(244, 114, 182, 0.2);\\n  color: #f472b6;\\n}\\n\\n.gc-debug-char-type.tiny {\\n  background: rgba(96, 165, 250, 0.2);\\n  color: #60a5fa;\\n}\\n\\n.gc-debug-char-body {\\n  margin-bottom: 8px;\\n}\\n\\n.gc-debug-char-row {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  font-size: 0.8em;\\n  padding: 3px 0;\\n}\\n\\n.gc-debug-char-row span:last-child {\\n  text-align: right;\\n}\\n\\n.gc-debug-char-row .mono {\\n  font-family: \\'Monaco\\', \\'Menlo\\', monospace;\\n}\\n\\n.gc-debug-char-row .success {\\n  color: #34d399;\\n}\\n\\n.gc-debug-char-row .warn {\\n  color: #fbbf24;\\n}\\n\\n.gc-debug-char-row .muted {\\n  color: var(--gc-text-muted, #94a3b8);\\n}\\n\\n.gc-debug-char-row .highlight {\\n  color: var(--gc-primary, #f472b6);\\n}\\n\\n.gc-debug-char-row .damage {\\n  color: #f87171;\\n}\\n\\n.gc-debug-char-row .actual-damage {\\n  color: #f87171;\\n  font-weight: 600;\\n}\\n\\n.gc-debug-char-row .action {\\n  max-width: 150px;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n  color: var(--gc-text-muted, #94a3b8);\\n}\\n\\n.gc-debug-char-custom,\\n.gc-debug-char-damage {\\n  margin-top: 8px;\\n  padding-top: 8px;\\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\\n}\\n\\n.gc-debug-char-custom-title,\\n.gc-debug-char-damage-title {\\n  display: flex;\\n  align-items: center;\\n  gap: 6px;\\n  font-size: 0.8em;\\n  font-weight: 600;\\n  margin-bottom: 6px;\\n}\\n\\n.gc-debug-char-custom-title {\\n  color: #fbbf24;\\n}\\n\\n.gc-debug-char-damage-title {\\n  color: #f87171;\\n}\\n\\n.gc-debug-char-damage.estimate .gc-debug-char-damage-title {\\n  color: #60a5fa;\\n}\\n\\n.gc-debug-char-damage.actual .gc-debug-char-damage-title {\\n  color: #f87171;\\n}\\n\\n.gc-debug-char-damage-badge {\\n  font-size: 0.85em;\\n  padding: 1px 6px;\\n  background: rgba(96, 165, 250, 0.2);\\n  color: #60a5fa;\\n  border-radius: 3px;\\n  font-weight: normal;\\n}\\n\\n.gc-debug-char-damage-badge.actual {\\n  background: rgba(239, 68, 68, 0.2);\\n  color: #f87171;\\n}\\n\\n.gc-debug-char-no-damage {\\n  margin-top: 8px;\\n  padding: 8px 10px;\\n  background: rgba(255, 255, 255, 0.05);\\n  border-radius: 6px;\\n  font-size: 0.8em;\\n  color: var(--gc-text-muted, #94a3b8);\\n  display: flex;\\n  align-items: center;\\n  gap: 6px;\\n}\\n\\n.gc-debug-char-no-damage i {\\n  color: #60a5fa;\\n}\\n</style>\\n'],sourceRoot:''}]);const s=o},906(e,n,a){a.r(n),a.d(n,{default:()=>s});var t=a(699),c=a.n(t),i=a(465),o=a.n(i)()(c());o.push([e.id,'.gc-settings-list[data-v-1958e7c2]{display:flex;flex-direction:column;gap:16px}.gc-settings-section[data-v-1958e7c2]{display:flex;flex-direction:column;gap:12px}.gc-settings-section-title[data-v-1958e7c2]{display:flex;align-items:center;gap:8px;font-size:0.9em;font-weight:600;color:var(--gc-text,#f1f5f9);padding-bottom:4px}.gc-settings-section-title i[data-v-1958e7c2]{color:var(--gc-primary,#f472b6);font-size:0.9em}.gc-settings-divider[data-v-1958e7c2]{height:1px;background:var(--gc-border,rgba(255,255,255,0.1));margin:4px 0}.gc-version-info[data-v-1958e7c2]{display:flex;flex-direction:column;gap:10px;padding:12px;background:rgba(0,0,0,0.2);border-radius:8px}.gc-version-current[data-v-1958e7c2]{display:flex;align-items:center;gap:8px}.gc-version-label[data-v-1958e7c2]{font-size:0.85em;color:var(--gc-text-muted,#94a3b8)}.gc-version-number[data-v-1958e7c2]{font-size:0.95em;font-weight:600;color:var(--gc-text,#f1f5f9)}.gc-update-available[data-v-1958e7c2]{display:flex;flex-direction:column;gap:10px;padding:10px;background:linear-gradient(135deg,rgba(102,126,234,0.2) 0%,rgba(118,75,162,0.2) 100%);border-radius:6px;border:1px solid rgba(102,126,234,0.3)}.gc-update-badge[data-v-1958e7c2]{display:flex;align-items:center;gap:6px;font-size:0.9em;color:#a5b4fc}.gc-update-badge i[data-v-1958e7c2]{color:#fbbf24}.gc-update-badge strong[data-v-1958e7c2]{color:#c4b5fd}.gc-update-date[data-v-1958e7c2]{font-size:0.85em;opacity:0.8}.gc-update-actions[data-v-1958e7c2]{display:flex;align-items:center;gap:6px}.gc-update-check[data-v-1958e7c2]{display:flex;align-items:center;gap:10px}.gc-update-last-check[data-v-1958e7c2]{font-size:0.75em;color:var(--gc-text-muted,#94a3b8)}.gc-btn[data-v-1958e7c2]{display:inline-flex;align-items:center;gap:6px;padding:6px 12px;border:none;border-radius:6px;font-size:0.85em;cursor:pointer;transition:all 0.2s ease}.gc-btn-sm[data-v-1958e7c2]{padding:5px 10px;font-size:0.8em}.gc-btn-primary[data-v-1958e7c2]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white}.gc-btn-primary[data-v-1958e7c2]:hover:not(:disabled){filter:brightness(1.1)}.gc-btn-secondary[data-v-1958e7c2]{background:rgba(255,255,255,0.1);color:var(--gc-text,#f1f5f9);border:1px solid var(--gc-border,rgba(255,255,255,0.1))}.gc-btn-secondary[data-v-1958e7c2]:hover:not(:disabled){background:rgba(255,255,255,0.15)}.gc-btn-ghost[data-v-1958e7c2]{background:transparent;color:var(--gc-text-muted,#94a3b8);padding:5px 8px}.gc-btn-ghost[data-v-1958e7c2]:hover:not(:disabled){color:var(--gc-text,#f1f5f9);background:rgba(255,255,255,0.05)}.gc-btn[data-v-1958e7c2]:disabled{opacity:0.5;cursor:not-allowed}.gc-setting-item[data-v-1958e7c2]{display:flex;flex-direction:column;gap:6px}.gc-setting-item label[data-v-1958e7c2]{font-size:0.85em;color:var(--gc-text-muted,#94a3b8);font-weight:500}.gc-input[data-v-1958e7c2]{padding:6px 10px;background:rgba(0,0,0,0.2);border:1px solid var(--gc-border,rgba(255,255,255,0.1));border-radius:6px;color:var(--gc-text,#f1f5f9);font-size:0.9em}.gc-input[data-v-1958e7c2]:focus{outline:none;border-color:var(--gc-primary,#f472b6)}.gc-input.sm[data-v-1958e7c2]{padding:4px 8px;font-size:0.85em}.gc-input-spinner[data-v-1958e7c2]{display:flex;align-items:center;gap:4px}.gc-input-spinner button[data-v-1958e7c2]{width:28px;height:28px;background:rgba(255,255,255,0.05);border:1px solid var(--gc-border,rgba(255,255,255,0.1));border-radius:4px;color:var(--gc-text,#f1f5f9);cursor:pointer}.gc-input-spinner button[data-v-1958e7c2]:hover{background:rgba(255,255,255,0.1)}.gc-input-spinner input[data-v-1958e7c2]{width:50px;text-align:center;background:rgba(0,0,0,0.2);border:1px solid var(--gc-border,rgba(255,255,255,0.1));border-radius:4px;color:var(--gc-text,#f1f5f9);font-size:0.9em;padding:4px}.gc-setting-toggle[data-v-1958e7c2]{display:flex;justify-content:space-between;align-items:flex-start;padding:8px 0;border-bottom:1px solid var(--gc-border,rgba(255,255,255,0.1))}.gc-setting-toggle[data-v-1958e7c2]:last-child{border-bottom:none}.gc-setting-toggle label[data-v-1958e7c2]{display:flex;flex-direction:column;gap:2px}.gc-setting-toggle label span[data-v-1958e7c2]{font-size:0.9em;font-weight:500}.gc-setting-toggle label small[data-v-1958e7c2]{font-size:0.75em;color:var(--gc-text-muted,#94a3b8)}\\n','',{version:3,sources:['webpack://./src/ui/panels/SettingsPanel.vue'],names:[],mappings:'AAiPA,mCACE,YAAa,CACb,qBAAsB,CACtB,QACF,CAEA,sCACE,YAAa,CACb,qBAAsB,CACtB,QACF,CAEA,4CACE,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,eAAgB,CAChB,eAAgB,CAChB,4BAA8B,CAC9B,kBACF,CAEA,8CACE,+BAAiC,CACjC,eACF,CAEA,sCACE,UAAW,CACX,iDAAsD,CACtD,YACF,CAGA,kCACE,YAAa,CACb,qBAAsB,CACtB,QAAS,CACT,YAAa,CACb,0BAA8B,CAC9B,iBACF,CAEA,qCACE,YAAa,CACb,kBAAmB,CACnB,OACF,CAEA,mCACE,gBAAiB,CACjB,kCACF,CAEA,oCACE,gBAAiB,CACjB,eAAgB,CAChB,4BACF,CAGA,sCACE,YAAa,CACb,qBAAsB,CACtB,QAAS,CACT,YAAa,CACb,qFAA8F,CAC9F,iBAAkB,CAClB,sCACF,CAEA,kCACE,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,eAAgB,CAChB,aACF,CAEA,oCACE,aACF,CAEA,yCACE,aACF,CAEA,iCACE,gBAAiB,CACjB,WACF,CAEA,oCACE,YAAa,CACb,kBAAmB,CACnB,OACF,CAGA,kCACE,YAAa,CACb,kBAAmB,CACnB,QACF,CAEA,uCACE,gBAAiB,CACjB,kCACF,CAGA,yBACE,mBAAoB,CACpB,kBAAmB,CACnB,OAAQ,CACR,gBAAiB,CACjB,WAAY,CACZ,iBAAkB,CAClB,gBAAiB,CACjB,cAAe,CACf,wBACF,CAEA,4BACE,gBAAiB,CACjB,eACF,CAEA,iCACE,0DAA6D,CAC7D,WACF,CAEA,sDACE,sBACF,CAEA,mCACE,gCAAoC,CACpC,4BAA8B,CAC9B,uDACF,CAEA,wDACE,iCACF,CAEA,+BACE,sBAAuB,CACvB,kCAAoC,CACpC,eACF,CAEA,oDACE,4BAA8B,CAC9B,iCACF,CAEA,kCACE,WAAY,CACZ,kBACF,CAGA,kCACE,YAAa,CACb,qBAAsB,CACtB,OACF,CAEA,wCACE,gBAAiB,CACjB,kCAAoC,CACpC,eACF,CAEA,2BACE,gBAAiB,CACjB,0BAA8B,CAC9B,uDAA4D,CAC5D,iBAAkB,CAClB,4BAA8B,CAC9B,eACF,CAEA,iCACE,YAAa,CACb,sCACF,CAEA,8BACE,eAAgB,CAChB,gBACF,CAEA,mCACE,YAAa,CACb,kBAAmB,CACnB,OACF,CAEA,0CACE,UAAW,CACX,WAAY,CACZ,iCAAqC,CACrC,uDAA4D,CAC5D,iBAAkB,CAClB,4BAA8B,CAC9B,cACF,CAEA,gDACE,gCACF,CAEA,yCACE,UAAW,CACX,iBAAkB,CAClB,0BAA8B,CAC9B,uDAA4D,CAC5D,iBAAkB,CAClB,4BAA8B,CAC9B,eAAgB,CAChB,WACF,CAEA,oCACE,YAAa,CACb,6BAA8B,CAC9B,sBAAuB,CACvB,aAAc,CACd,8DACF,CAEA,+CACE,kBACF,CAEA,0CACE,YAAa,CACb,qBAAsB,CACtB,OACF,CAEA,+CACE,eAAgB,CAChB,eACF,CAEA,gDACE,gBAAiB,CACjB,kCACF',sourcesContent:['<template>\\n  <GcOverlay\\n    :visible=\"visible\"\\n    title=\"设置\"\\n    icon=\"fa-solid fa-gear\"\\n    @close=\"$emit(\\'close\\')\"\\n  >\\n    <div class=\"gc-settings-list\">\\n      \\x3c!-- 版本与更新 --\\x3e\\n      <div class=\"gc-settings-section\">\\n        <div class=\"gc-settings-section-title\">\\n          <i class=\"fa-solid fa-info-circle\"></i>\\n          <span>版本信息</span>\\n        </div>\\n        \\n        <div class=\"gc-version-info\">\\n          <div class=\"gc-version-current\">\\n            <span class=\"gc-version-label\">当前版本</span>\\n            <span class=\"gc-version-number\">v{{ currentVersion }}</span>\\n          </div>\\n          \\n          \\x3c!-- 更新检查结果 --\\x3e\\n          <div v-if=\"hasUpdate\" class=\"gc-update-available\">\\n            <div class=\"gc-update-badge\">\\n              <i class=\"fa-solid fa-gift\"></i>\\n              <span>发现新版本 <strong>v{{ latestVersion }}</strong></span>\\n              <span v-if=\"releaseDate\" class=\"gc-update-date\">({{ releaseDate }})</span>\\n            </div>\\n            <div class=\"gc-update-actions\">\\n              <button class=\"gc-btn gc-btn-primary gc-btn-sm\" @click=\"openDownloadPage\">\\n                <i class=\"fa-solid fa-download\"></i>\\n                <span>下载更新</span>\\n              </button>\\n              <button class=\"gc-btn gc-btn-ghost gc-btn-sm\" @click=\"openReleasePage\">\\n                <i class=\"fa-solid fa-external-link\"></i>\\n              </button>\\n              <button class=\"gc-btn gc-btn-ghost gc-btn-sm\" @click=\"ignoreCurrentUpdate\" title=\"忽略此版本\">\\n                <i class=\"fa-solid fa-xmark\"></i>\\n              </button>\\n            </div>\\n          </div>\\n          \\n          \\x3c!-- 检查更新按钮 --\\x3e\\n          <div class=\"gc-update-check\">\\n            <button \\n              class=\"gc-btn gc-btn-secondary gc-btn-sm\" \\n              @click=\"checkUpdate\"\\n              :disabled=\"checking\"\\n            >\\n              <i :class=\"checking ? \\'fa-solid fa-spinner fa-spin\\' : \\'fa-solid fa-rotate\\'\"></i>\\n              <span>{{ checking ? \\'检查中...\\' : \\'检查更新\\' }}</span>\\n            </button>\\n            <span v-if=\"lastCheckTime\" class=\"gc-update-last-check\">\\n              上次检查: {{ formatLastCheck }}\\n            </span>\\n          </div>\\n        </div>\\n        \\n        <div class=\"gc-setting-toggle\">\\n          <label>\\n            <span>自动检查更新</span>\\n            <small>启动时自动检查是否有新版本</small>\\n          </label>\\n          <GcSwitch\\n            :model-value=\"autoCheckUpdate\"\\n            @update:model-value=\"toggleAutoCheck\"\\n          />\\n        </div>\\n      </div>\\n\\n      <div class=\"gc-settings-divider\"></div>\\n\\n      \\x3c!-- 基本设置 --\\x3e\\n      <div class=\"gc-settings-section\">\\n        <div class=\"gc-settings-section-title\">\\n          <i class=\"fa-solid fa-sliders\"></i>\\n          <span>基本设置</span>\\n        </div>\\n        \\n        <div class=\"gc-setting-item\">\\n          <label>变量前缀</label>\\n          <input\\n            :value=\"settings.variablePrefix\"\\n            @input=\"updateSetting(\\'variablePrefix\\', ($event.target as HTMLInputElement).value)\"\\n            type=\"text\"\\n            class=\"gc-input sm\"\\n            placeholder=\"巨大娘\"\\n          />\\n        </div>\\n        \\n        <div class=\"gc-setting-item\">\\n          <label>注入深度</label>\\n          <div class=\"gc-input-spinner\">\\n            <button @click=\"decrementDepth\">-</button>\\n            <input :value=\"settings.injectDepth\" type=\"number\" readonly />\\n            <button @click=\"incrementDepth\">+</button>\\n          </div>\\n        </div>\\n      </div>\\n\\n      <div class=\"gc-settings-divider\"></div>\\n\\n      \\x3c!-- 提示词设置 --\\x3e\\n      <div class=\"gc-settings-section\">\\n        <div class=\"gc-settings-section-title\">\\n          <i class=\"fa-solid fa-file-lines\"></i>\\n          <span>提示词设置</span>\\n        </div>\\n        \\n        <div class=\"gc-setting-toggle\">\\n          <label>\\n            <span>自动注入提示词</span>\\n            <small>数据变化时自动更新 Prompt</small>\\n          </label>\\n          <GcSwitch\\n            :model-value=\"settings.autoInject\"\\n            @update:model-value=\"updateSetting(\\'autoInject\\', $event)\"\\n          />\\n        </div>\\n        \\n        <div class=\"gc-setting-toggle\">\\n          <label>\\n            <span>注入互动限制</span>\\n            <small>检查物理上不可能的互动</small>\\n          </label>\\n          <GcSwitch\\n            :model-value=\"settings.injectInteractionLimits\"\\n            @update:model-value=\"updateSetting(\\'injectInteractionLimits\\', $event)\"\\n          />\\n        </div>\\n        \\n        <div class=\"gc-setting-toggle\">\\n          <label>\\n            <span>显示变量更新规则</span>\\n            <small>指导 AI 如何更新身高变量</small>\\n          </label>\\n          <GcSwitch\\n            :model-value=\"settings.showVariableUpdateRules\"\\n            @update:model-value=\"updateSetting(\\'showVariableUpdateRules\\', $event)\"\\n          />\\n        </div>\\n        \\n        <div class=\"gc-setting-toggle\">\\n          <label>\\n            <span>紧凑提示词格式</span>\\n            <small>减少提示词中的空行</small>\\n          </label>\\n          <GcSwitch\\n            :model-value=\"settings.compactPromptFormat\"\\n            @update:model-value=\"updateSetting(\\'compactPromptFormat\\', $event)\"\\n          />\\n        </div>\\n      </div>\\n\\n      <div class=\"gc-settings-divider\"></div>\\n\\n      \\x3c!-- 开发者选项 --\\x3e\\n      <div class=\"gc-settings-section\">\\n        <div class=\"gc-settings-section-title\">\\n          <i class=\"fa-solid fa-code\"></i>\\n          <span>开发者选项</span>\\n        </div>\\n        \\n        <div class=\"gc-setting-toggle\">\\n          <label>\\n            <span>调试模式</span>\\n            <small>在控制台输出详细日志</small>\\n          </label>\\n          <GcSwitch\\n            :model-value=\"settings.debug\"\\n            @update:model-value=\"updateSetting(\\'debug\\', $event)\"\\n          />\\n        </div>\\n      </div>\\n    </div>\\n  </GcOverlay>\\n</template>\\n\\n<script setup lang=\"ts\">\\nimport { GcOverlay, GcSwitch } from \\'../components\\';\\nimport { useUpdater } from \\'../../composables\\';\\nimport type { Settings } from \\'../../types\\';\\n\\nconst props = defineProps<{\\n  visible: boolean;\\n  settings: Settings;\\n}>();\\n\\nconst emit = defineEmits<{\\n  (e: \\'close\\'): void;\\n  (e: \\'update:setting\\', key: keyof Settings, value: unknown): void;\\n}>();\\n\\n// 更新器\\nconst {\\n  checking,\\n  hasUpdate,\\n  currentVersion,\\n  latestVersion,\\n  releaseDate,\\n  settings: updaterSettings,\\n  check: checkUpdate,\\n  openDownloadPage,\\n  openReleasePage,\\n  ignoreCurrentUpdate,\\n  toggleAutoCheck,\\n} = useUpdater();\\n\\nconst autoCheckUpdate = computed(() => updaterSettings.value.autoCheck);\\nconst lastCheckTime = computed(() => updaterSettings.value.lastCheckTime);\\n\\nconst formatLastCheck = computed(() => {\\n  if (!lastCheckTime.value) return \\'\\';\\n  const date = new Date(lastCheckTime.value);\\n  const now = new Date();\\n  const diff = now.getTime() - date.getTime();\\n  \\n  if (diff < 60000) return \\'刚刚\\';\\n  if (diff < 3600000) return `${Math.floor(diff / 60000)} 分钟前`;\\n  if (diff < 86400000) return `${Math.floor(diff / 3600000)} 小时前`;\\n  return date.toLocaleDateString(\\'zh-CN\\');\\n});\\n\\nconst updateSetting = (key: keyof Settings, value: unknown) => {\\n  emit(\\'update:setting\\', key, value);\\n};\\n\\nconst decrementDepth = () => {\\n  if (props.settings.injectDepth > 0) {\\n    updateSetting(\\'injectDepth\\', props.settings.injectDepth - 1);\\n  }\\n};\\n\\nconst incrementDepth = () => {\\n  if (props.settings.injectDepth < 10) {\\n    updateSetting(\\'injectDepth\\', props.settings.injectDepth + 1);\\n  }\\n};\\n<\\/script>\\n\\n<style scoped>\\n.gc-settings-list {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 16px;\\n}\\n\\n.gc-settings-section {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 12px;\\n}\\n\\n.gc-settings-section-title {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  font-size: 0.9em;\\n  font-weight: 600;\\n  color: var(--gc-text, #f1f5f9);\\n  padding-bottom: 4px;\\n}\\n\\n.gc-settings-section-title i {\\n  color: var(--gc-primary, #f472b6);\\n  font-size: 0.9em;\\n}\\n\\n.gc-settings-divider {\\n  height: 1px;\\n  background: var(--gc-border, rgba(255, 255, 255, 0.1));\\n  margin: 4px 0;\\n}\\n\\n/* 版本信息 */\\n.gc-version-info {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 10px;\\n  padding: 12px;\\n  background: rgba(0, 0, 0, 0.2);\\n  border-radius: 8px;\\n}\\n\\n.gc-version-current {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n}\\n\\n.gc-version-label {\\n  font-size: 0.85em;\\n  color: var(--gc-text-muted, #94a3b8);\\n}\\n\\n.gc-version-number {\\n  font-size: 0.95em;\\n  font-weight: 600;\\n  color: var(--gc-text, #f1f5f9);\\n}\\n\\n/* 更新可用 */\\n.gc-update-available {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 10px;\\n  padding: 10px;\\n  background: linear-gradient(135deg, rgba(102, 126, 234, 0.2) 0%, rgba(118, 75, 162, 0.2) 100%);\\n  border-radius: 6px;\\n  border: 1px solid rgba(102, 126, 234, 0.3);\\n}\\n\\n.gc-update-badge {\\n  display: flex;\\n  align-items: center;\\n  gap: 6px;\\n  font-size: 0.9em;\\n  color: #a5b4fc;\\n}\\n\\n.gc-update-badge i {\\n  color: #fbbf24;\\n}\\n\\n.gc-update-badge strong {\\n  color: #c4b5fd;\\n}\\n\\n.gc-update-date {\\n  font-size: 0.85em;\\n  opacity: 0.8;\\n}\\n\\n.gc-update-actions {\\n  display: flex;\\n  align-items: center;\\n  gap: 6px;\\n}\\n\\n/* 检查更新 */\\n.gc-update-check {\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n}\\n\\n.gc-update-last-check {\\n  font-size: 0.75em;\\n  color: var(--gc-text-muted, #94a3b8);\\n}\\n\\n/* 按钮样式 */\\n.gc-btn {\\n  display: inline-flex;\\n  align-items: center;\\n  gap: 6px;\\n  padding: 6px 12px;\\n  border: none;\\n  border-radius: 6px;\\n  font-size: 0.85em;\\n  cursor: pointer;\\n  transition: all 0.2s ease;\\n}\\n\\n.gc-btn-sm {\\n  padding: 5px 10px;\\n  font-size: 0.8em;\\n}\\n\\n.gc-btn-primary {\\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n  color: white;\\n}\\n\\n.gc-btn-primary:hover:not(:disabled) {\\n  filter: brightness(1.1);\\n}\\n\\n.gc-btn-secondary {\\n  background: rgba(255, 255, 255, 0.1);\\n  color: var(--gc-text, #f1f5f9);\\n  border: 1px solid var(--gc-border, rgba(255, 255, 255, 0.1));\\n}\\n\\n.gc-btn-secondary:hover:not(:disabled) {\\n  background: rgba(255, 255, 255, 0.15);\\n}\\n\\n.gc-btn-ghost {\\n  background: transparent;\\n  color: var(--gc-text-muted, #94a3b8);\\n  padding: 5px 8px;\\n}\\n\\n.gc-btn-ghost:hover:not(:disabled) {\\n  color: var(--gc-text, #f1f5f9);\\n  background: rgba(255, 255, 255, 0.05);\\n}\\n\\n.gc-btn:disabled {\\n  opacity: 0.5;\\n  cursor: not-allowed;\\n}\\n\\n/* 原有样式 */\\n.gc-setting-item {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 6px;\\n}\\n\\n.gc-setting-item label {\\n  font-size: 0.85em;\\n  color: var(--gc-text-muted, #94a3b8);\\n  font-weight: 500;\\n}\\n\\n.gc-input {\\n  padding: 6px 10px;\\n  background: rgba(0, 0, 0, 0.2);\\n  border: 1px solid var(--gc-border, rgba(255, 255, 255, 0.1));\\n  border-radius: 6px;\\n  color: var(--gc-text, #f1f5f9);\\n  font-size: 0.9em;\\n}\\n\\n.gc-input:focus {\\n  outline: none;\\n  border-color: var(--gc-primary, #f472b6);\\n}\\n\\n.gc-input.sm {\\n  padding: 4px 8px;\\n  font-size: 0.85em;\\n}\\n\\n.gc-input-spinner {\\n  display: flex;\\n  align-items: center;\\n  gap: 4px;\\n}\\n\\n.gc-input-spinner button {\\n  width: 28px;\\n  height: 28px;\\n  background: rgba(255, 255, 255, 0.05);\\n  border: 1px solid var(--gc-border, rgba(255, 255, 255, 0.1));\\n  border-radius: 4px;\\n  color: var(--gc-text, #f1f5f9);\\n  cursor: pointer;\\n}\\n\\n.gc-input-spinner button:hover {\\n  background: rgba(255, 255, 255, 0.1);\\n}\\n\\n.gc-input-spinner input {\\n  width: 50px;\\n  text-align: center;\\n  background: rgba(0, 0, 0, 0.2);\\n  border: 1px solid var(--gc-border, rgba(255, 255, 255, 0.1));\\n  border-radius: 4px;\\n  color: var(--gc-text, #f1f5f9);\\n  font-size: 0.9em;\\n  padding: 4px;\\n}\\n\\n.gc-setting-toggle {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: flex-start;\\n  padding: 8px 0;\\n  border-bottom: 1px solid var(--gc-border, rgba(255, 255, 255, 0.1));\\n}\\n\\n.gc-setting-toggle:last-child {\\n  border-bottom: none;\\n}\\n\\n.gc-setting-toggle label {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 2px;\\n}\\n\\n.gc-setting-toggle label span {\\n  font-size: 0.9em;\\n  font-weight: 500;\\n}\\n\\n.gc-setting-toggle label small {\\n  font-size: 0.75em;\\n  color: var(--gc-text-muted, #94a3b8);\\n}\\n</style>\\n'],sourceRoot:''}]);const s=o},907(e,n,a){var t=a(930);t.__esModule&&(t=t.default),'string'==typeof t&&(t=[[e.id,t,'']]),t.locals&&(e.exports=t.locals);(0,a(424).A)('5219213c',t,!1,{ssrId:!0})},926(e,n,a){a.r(n),a.d(n,{default:()=>s});var t=a(699),c=a.n(t),i=a(465),o=a.n(i)()(c());o.push([e.id,'.gc-calc-section[data-v-361696cc]{margin-bottom:20px}.gc-calc-box[data-v-361696cc]{display:flex;align-items:center;gap:12px;padding:6px;background:rgba(0,0,0,0.2);border-radius:14px;border:1px solid var(--gc-border,rgba(255,255,255,0.08))}.gc-input-wrapper[data-v-361696cc]{flex:1;position:relative;display:flex;align-items:center}.gc-input[data-v-361696cc]{width:100%;padding:10px 32px 10px 14px;background:rgba(255,255,255,0.03);border:1px solid transparent;border-radius:10px;color:var(--gc-text,#f8fafc);font-size:0.95em;transition:all 0.2s;font-family:var(--gc-font-mono)}.gc-input[data-v-361696cc]:hover{background:rgba(255,255,255,0.06)}.gc-input[data-v-361696cc]:focus{outline:none;background:rgba(0,0,0,0.3);border-color:var(--gc-primary,#ec4899);box-shadow:0 0 0 3px var(--gc-primary-light,rgba(236,72,153,0.15))}.gc-input[data-v-361696cc]::placeholder{color:var(--gc-text-dim,#64748b);font-family:var(--gc-font-family)}.gc-unit[data-v-361696cc]{position:absolute;right:12px;color:var(--gc-text-dim,#64748b);font-size:0.85em;pointer-events:none;font-weight:500}.gc-operator[data-v-361696cc]{color:var(--gc-text-muted,#94a3b8);font-weight:bold;font-size:1.1em;opacity:0.5}.gc-btn-icon[data-v-361696cc]{width:42px;height:42px;display:flex;align-items:center;justify-content:center;border-radius:10px;border:none;cursor:pointer;transition:all 0.2s cubic-bezier(0.4,0,0.2,1);flex-shrink:0}.gc-btn-icon.primary[data-v-361696cc]{background:var(--gc-primary,#ec4899);color:white;box-shadow:0 4px 12px rgba(236,72,153,0.3)}.gc-btn-icon.primary[data-v-361696cc]:hover{background:var(--gc-primary-hover,#db2777);transform:translateY(-2px);box-shadow:0 6px 16px rgba(236,72,153,0.4)}.gc-btn-icon.primary[data-v-361696cc]:active{transform:translateY(0)}.fade-enter-active[data-v-361696cc],.fade-leave-active[data-v-361696cc]{transition:opacity 0.3s cubic-bezier(0.4,0,0.2,1)}.fade-enter-from[data-v-361696cc],.fade-leave-to[data-v-361696cc]{opacity:0}\\n','',{version:3,sources:['webpack://./src/ui/features/QuickCalc.vue'],names:[],mappings:'AAkDA,kCACE,kBACF,CAEA,8BACE,YAAa,CACb,kBAAmB,CACnB,QAAS,CACT,WAAY,CACZ,0BAA8B,CAC9B,kBAAmB,CACnB,wDACF,CAEA,mCACE,MAAO,CACP,iBAAkB,CAClB,YAAa,CACb,kBACF,CAEA,2BACE,UAAW,CACX,2BAA4B,CAC5B,iCAAqC,CACrC,4BAA6B,CAC7B,kBAAmB,CACnB,4BAA8B,CAC9B,gBAAiB,CACjB,mBAAoB,CACpB,+BACF,CAEA,iCACE,iCACF,CAEA,iCACE,YAAa,CACb,0BAA8B,CAC9B,sCAAwC,CACxC,kEACF,CAEA,wCACE,gCAAkC,CAClC,iCACF,CAEA,0BACE,iBAAkB,CAClB,UAAW,CACX,gCAAkC,CAClC,gBAAiB,CACjB,mBAAoB,CACpB,eACF,CAEA,8BACE,kCAAoC,CACpC,gBAAiB,CACjB,eAAgB,CAChB,WACF,CAEA,8BACE,UAAW,CACX,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,kBAAmB,CACnB,WAAY,CACZ,cAAe,CACf,6CAAiD,CACjD,aACF,CAEA,sCACE,oCAAsC,CACtC,WAAY,CACZ,0CACF,CAEA,4CACE,0CAA4C,CAC5C,0BAA2B,CAC3B,0CACF,CAEA,6CACE,uBACF,CAGA,wEAEE,iDACF,CAEA,kEAEE,SACF',sourcesContent:['<template>\\n  <div class=\"gc-calc-section\">\\n    <div class=\"gc-calc-box\">\\n      <div class=\"gc-input-wrapper\">\\n        <input\\n          v-model.number=\"calcHeight\"\\n          type=\"number\"\\n          placeholder=\"身高(m)\"\\n          class=\"gc-input\"\\n          @keypress.enter=\"doCalculate\"\\n        />\\n        <span class=\"gc-unit\">m</span>\\n      </div>\\n      <span class=\"gc-operator\">/</span>\\n      <div class=\"gc-input-wrapper\">\\n        <input\\n          v-model.number=\"calcOriginal\"\\n          type=\"number\"\\n          placeholder=\"原高(m)\"\\n          class=\"gc-input\"\\n        />\\n        <span class=\"gc-unit\">m</span>\\n      </div>\\n      <button class=\"gc-btn-icon primary\" @click=\"doCalculate\" title=\"计算\">\\n        <i class=\"fa-solid fa-calculator\"></i>\\n      </button>\\n    </div>\\n    \\n    \\x3c!-- 计算结果 --\\x3e\\n    <transition name=\"fade\">\\n      <Result v-if=\"calcResult\" :result=\"calcResult\" :is-giant=\"isGiant\" @close=\"clearCalcResult\" />\\n    </transition>\\n  </div>\\n</template>\\n\\n<script setup lang=\"ts\">\\nimport { useCalculator } from \\'../../composables\\';\\nimport Result from \\'../Result.vue\\';\\n\\nconst {\\n  calcHeight,\\n  calcOriginal,\\n  calcResult,\\n  isGiant,\\n  doCalculate,\\n  clearCalcResult,\\n} = useCalculator();\\n<\\/script>\\n\\n<style scoped>\\n.gc-calc-section {\\n  margin-bottom: 20px;\\n}\\n\\n.gc-calc-box {\\n  display: flex;\\n  align-items: center;\\n  gap: 12px;\\n  padding: 6px;\\n  background: rgba(0, 0, 0, 0.2);\\n  border-radius: 14px;\\n  border: 1px solid var(--gc-border, rgba(255, 255, 255, 0.08));\\n}\\n\\n.gc-input-wrapper {\\n  flex: 1;\\n  position: relative;\\n  display: flex;\\n  align-items: center;\\n}\\n\\n.gc-input {\\n  width: 100%;\\n  padding: 10px 32px 10px 14px;\\n  background: rgba(255, 255, 255, 0.03);\\n  border: 1px solid transparent;\\n  border-radius: 10px;\\n  color: var(--gc-text, #f8fafc);\\n  font-size: 0.95em;\\n  transition: all 0.2s;\\n  font-family: var(--gc-font-mono);\\n}\\n\\n.gc-input:hover {\\n  background: rgba(255, 255, 255, 0.06);\\n}\\n\\n.gc-input:focus {\\n  outline: none;\\n  background: rgba(0, 0, 0, 0.3);\\n  border-color: var(--gc-primary, #ec4899);\\n  box-shadow: 0 0 0 3px var(--gc-primary-light, rgba(236, 72, 153, 0.15));\\n}\\n\\n.gc-input::placeholder {\\n  color: var(--gc-text-dim, #64748b);\\n  font-family: var(--gc-font-family);\\n}\\n\\n.gc-unit {\\n  position: absolute;\\n  right: 12px;\\n  color: var(--gc-text-dim, #64748b);\\n  font-size: 0.85em;\\n  pointer-events: none;\\n  font-weight: 500;\\n}\\n\\n.gc-operator {\\n  color: var(--gc-text-muted, #94a3b8);\\n  font-weight: bold;\\n  font-size: 1.1em;\\n  opacity: 0.5;\\n}\\n\\n.gc-btn-icon {\\n  width: 42px;\\n  height: 42px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  border-radius: 10px;\\n  border: none;\\n  cursor: pointer;\\n  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\\n  flex-shrink: 0;\\n}\\n\\n.gc-btn-icon.primary {\\n  background: var(--gc-primary, #ec4899);\\n  color: white;\\n  box-shadow: 0 4px 12px rgba(236, 72, 153, 0.3);\\n}\\n\\n.gc-btn-icon.primary:hover {\\n  background: var(--gc-primary-hover, #db2777);\\n  transform: translateY(-2px);\\n  box-shadow: 0 6px 16px rgba(236, 72, 153, 0.4);\\n}\\n\\n.gc-btn-icon.primary:active {\\n  transform: translateY(0);\\n}\\n\\n/* 过渡动画 */\\n.fade-enter-active,\\n.fade-leave-active {\\n  transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);\\n}\\n\\n.fade-enter-from,\\n.fade-leave-to {\\n  opacity: 0;\\n}\\n</style>\\n'],sourceRoot:''}]);const s=o},928(e,n,a){var t=a(275);t.__esModule&&(t=t.default),'string'==typeof t&&(t=[[e.id,t,'']]),t.locals&&(e.exports=t.locals);(0,a(424).A)('4e1fc118',t,!1,{ssrId:!0})},930(e,n,a){a.r(n),a.d(n,{default:()=>s});var t=a(699),c=a.n(t),i=a(465),o=a.n(i)()(c());o.push([e.id,'.gc-input-wrapper[data-v-da91aa2a]{position:relative;display:flex;align-items:center}.gc-input[data-v-da91aa2a]{width:100%;padding:6px 10px;background:rgba(0,0,0,0.2);border:1px solid var(--gc-border,rgba(255,255,255,0.1));border-radius:6px;color:var(--gc-text,#f1f5f9);font-size:0.9em}.gc-input[data-v-da91aa2a]:focus{outline:none;border-color:var(--gc-primary,#f472b6)}.gc-input.sm[data-v-da91aa2a]{padding:4px 8px;font-size:0.85em}.gc-textarea[data-v-da91aa2a]{width:100%;padding:8px 10px;background:rgba(0,0,0,0.2);border:1px solid var(--gc-border,rgba(255,255,255,0.1));border-radius:6px;color:var(--gc-text,#f1f5f9);font-size:0.9em;resize:vertical;min-height:80px}.gc-input-suffix[data-v-da91aa2a]{color:var(--gc-text-muted,#94a3b8);font-size:0.85em;margin-left:4px}\\n','',{version:3,sources:['webpack://./src/ui/components/GcInput.vue'],names:[],mappings:'AA6CA,mCACE,iBAAkB,CAClB,YAAa,CACb,kBACF,CAEA,2BACE,UAAW,CACX,gBAAiB,CACjB,0BAA8B,CAC9B,uDAA4D,CAC5D,iBAAkB,CAClB,4BAA8B,CAC9B,eACF,CAEA,iCACE,YAAa,CACb,sCACF,CAEA,8BACE,eAAgB,CAChB,gBACF,CAEA,8BACE,UAAW,CACX,gBAAiB,CACjB,0BAA8B,CAC9B,uDAA4D,CAC5D,iBAAkB,CAClB,4BAA8B,CAC9B,eAAgB,CAChB,eAAgB,CAChB,eACF,CAEA,kCACE,kCAAoC,CACpC,gBAAiB,CACjB,eACF',sourcesContent:['<template>\\n  <div class=\"gc-input-wrapper\" :class=\"wrapperClass\">\\n    <input\\n      v-if=\"type !== \\'textarea\\'\"\\n      :type=\"type\"\\n      class=\"gc-input\"\\n      :class=\"inputClass\"\\n      :value=\"modelValue\"\\n      :placeholder=\"placeholder\"\\n      :readonly=\"readonly\"\\n      @input=\"$emit(\\'update:modelValue\\', ($event.target as HTMLInputElement).value)\"\\n    />\\n    <textarea\\n      v-else\\n      class=\"gc-textarea\"\\n      :class=\"inputClass\"\\n      :value=\"modelValue\"\\n      :placeholder=\"placeholder\"\\n      :readonly=\"readonly\"\\n      :rows=\"rows\"\\n      @input=\"$emit(\\'update:modelValue\\', ($event.target as HTMLTextAreaElement).value)\"\\n    ></textarea>\\n    <span v-if=\"suffix\" class=\"gc-input-suffix\">{{ suffix }}</span>\\n  </div>\\n</template>\\n\\n<script setup lang=\"ts\">\\ndefineProps<{\\n  modelValue: string | number;\\n  type?: \\'text\\' | \\'number\\' | \\'textarea\\';\\n  placeholder?: string;\\n  readonly?: boolean;\\n  size?: \\'sm\\' | \\'md\\';\\n  suffix?: string;\\n  rows?: number;\\n  wrapperClass?: string;\\n  inputClass?: string;\\n}>();\\n\\ndefineEmits<{\\n  (e: \\'update:modelValue\\', value: string | number): void;\\n}>();\\n<\\/script>\\n\\n<style scoped>\\n.gc-input-wrapper {\\n  position: relative;\\n  display: flex;\\n  align-items: center;\\n}\\n\\n.gc-input {\\n  width: 100%;\\n  padding: 6px 10px;\\n  background: rgba(0, 0, 0, 0.2);\\n  border: 1px solid var(--gc-border, rgba(255, 255, 255, 0.1));\\n  border-radius: 6px;\\n  color: var(--gc-text, #f1f5f9);\\n  font-size: 0.9em;\\n}\\n\\n.gc-input:focus {\\n  outline: none;\\n  border-color: var(--gc-primary, #f472b6);\\n}\\n\\n.gc-input.sm {\\n  padding: 4px 8px;\\n  font-size: 0.85em;\\n}\\n\\n.gc-textarea {\\n  width: 100%;\\n  padding: 8px 10px;\\n  background: rgba(0, 0, 0, 0.2);\\n  border: 1px solid var(--gc-border, rgba(255, 255, 255, 0.1));\\n  border-radius: 6px;\\n  color: var(--gc-text, #f1f5f9);\\n  font-size: 0.9em;\\n  resize: vertical;\\n  min-height: 80px;\\n}\\n\\n.gc-input-suffix {\\n  color: var(--gc-text-muted, #94a3b8);\\n  font-size: 0.85em;\\n  margin-left: 4px;\\n}\\n</style>\\n'],sourceRoot:''}]);const s=o},934(e,n,a){a.r(n),a.d(n,{default:()=>s});var t=a(699),c=a.n(t),i=a(465),o=a.n(i)()(c());o.push([e.id,'.gc-debug-content[data-v-18dd7d1a]{display:flex;flex-direction:column;gap:12px}.gc-debug-tabs[data-v-18dd7d1a]{display:flex;gap:4px;padding:4px;background:rgba(0,0,0,0.2);border-radius:8px;flex-wrap:wrap}.gc-debug-tab[data-v-18dd7d1a]{flex:1;display:flex;align-items:center;justify-content:center;gap:6px;padding:8px 12px;background:transparent;border:none;border-radius:6px;color:var(--gc-text-muted,#94a3b8);font-size:0.8em;cursor:pointer;transition:all 0.2s}.gc-debug-tab[data-v-18dd7d1a]:hover{background:rgba(255,255,255,0.05);color:var(--gc-text,#f1f5f9)}.gc-debug-tab.active[data-v-18dd7d1a]{background:var(--gc-primary,#f472b6);color:white}.gc-debug-tab-badge[data-v-18dd7d1a]{padding:1px 6px;background:rgba(255,255,255,0.2);border-radius:10px;font-size:0.85em}.gc-debug-tab.active .gc-debug-tab-badge[data-v-18dd7d1a]{background:rgba(255,255,255,0.3)}.gc-debug-tab-content[data-v-18dd7d1a]{padding:8px 0}.gc-btn-link[data-v-18dd7d1a]{background:transparent;border:none;color:var(--gc-text-muted,#94a3b8);cursor:pointer;padding:4px 8px}.gc-btn-link[data-v-18dd7d1a]:hover{color:var(--gc-text,#f1f5f9)}\\n','',{version:3,sources:['webpack://./src/ui/panels/DebugPanel.vue'],names:[],mappings:'AAoJA,mCACE,YAAa,CACb,qBAAsB,CACtB,QACF,CAEA,gCACE,YAAa,CACb,OAAQ,CACR,WAAY,CACZ,0BAA8B,CAC9B,iBAAkB,CAClB,cACF,CAEA,+BACE,MAAO,CACP,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,OAAQ,CACR,gBAAiB,CACjB,sBAAuB,CACvB,WAAY,CACZ,iBAAkB,CAClB,kCAAoC,CACpC,eAAgB,CAChB,cAAe,CACf,mBACF,CAEA,qCACE,iCAAqC,CACrC,4BACF,CAEA,sCACE,oCAAsC,CACtC,WACF,CAEA,qCACE,eAAgB,CAChB,gCAAoC,CACpC,kBAAmB,CACnB,gBACF,CAEA,0DACE,gCACF,CAEA,uCACE,aACF,CAEA,8BACE,sBAAuB,CACvB,WAAY,CACZ,kCAAoC,CACpC,cAAe,CACf,eACF,CAEA,oCACE,4BACF',sourcesContent:['<template>\\n  <GcOverlay\\n    :visible=\"visible\"\\n    title=\"MVU 调试\"\\n    icon=\"fa-solid fa-bug\"\\n    panel-class=\"gc-debug-panel\"\\n    @close=\"$emit(\\'close\\')\"\\n  >\\n    <template #header-actions>\\n      <button class=\"gc-btn-link\" @click=\"$emit(\\'refresh\\')\" title=\"刷新状态\">\\n        <i class=\"fa-solid fa-rotate\"></i>\\n      </button>\\n    </template>\\n\\n    <div class=\"gc-debug-content\">\\n      \\x3c!-- 选项卡导航 --\\x3e\\n      <div class=\"gc-debug-tabs\">\\n        <button \\n          class=\"gc-debug-tab\" \\n          :class=\"{ active: activeTab === \\'status\\' }\" \\n          @click=\"activeTab = \\'status\\'\"\\n        >\\n          <i class=\"fa-solid fa-satellite-dish\"></i> 状态\\n        </button>\\n        <button \\n          class=\"gc-debug-tab\" \\n          :class=\"{ active: activeTab === \\'characters\\' }\" \\n          @click=\"activeTab = \\'characters\\'\"\\n        >\\n          <i class=\"fa-solid fa-users\"></i> 角色\\n          <span v-if=\"characterCount\" class=\"gc-debug-tab-badge\">{{ characterCount }}</span>\\n        </button>\\n        <button \\n          class=\"gc-debug-tab\" \\n          :class=\"{ active: activeTab === \\'test\\' }\" \\n          @click=\"activeTab = \\'test\\'\"\\n        >\\n          <i class=\"fa-solid fa-flask\"></i> 测试\\n        </button>\\n        <button \\n          class=\"gc-debug-tab\" \\n          :class=\"{ active: activeTab === \\'logs\\' }\" \\n          @click=\"activeTab = \\'logs\\'\"\\n        >\\n          <i class=\"fa-solid fa-terminal\"></i> 日志\\n          <span v-if=\"logs.length\" class=\"gc-debug-tab-badge\">{{ logs.length }}</span>\\n        </button>\\n        <button \\n          class=\"gc-debug-tab\" \\n          :class=\"{ active: activeTab === \\'raw\\' }\" \\n          @click=\"activeTab = \\'raw\\'\"\\n        >\\n          <i class=\"fa-solid fa-database\"></i> 原始\\n        </button>\\n      </div>\\n\\n      \\x3c!-- 状态选项卡 --\\x3e\\n      <div v-if=\"activeTab === \\'status\\'\" class=\"gc-debug-tab-content\">\\n        <DebugStatusSection :mvu-info=\"mvuInfo\" />\\n      </div>\\n\\n      \\x3c!-- 角色选项卡 --\\x3e\\n      <div v-if=\"activeTab === \\'characters\\'\" class=\"gc-debug-tab-content\">\\n        <DebugCharactersSection :characters=\"debugCharacters\" />\\n      </div>\\n\\n      \\x3c!-- 测试选项卡 --\\x3e\\n      <div v-if=\"activeTab === \\'test\\'\" class=\"gc-debug-tab-content\">\\n        <DebugTestSection\\n          :test-name=\"testName\"\\n          :test-height=\"testHeight\"\\n          :test-original=\"testOriginal\"\\n          :characters=\"characters\"\\n          @update:test-name=\"$emit(\\'update:testName\\', $event)\"\\n          @update:test-height=\"$emit(\\'update:testHeight\\', $event)\"\\n          @update:test-original=\"$emit(\\'update:testOriginal\\', $event)\"\\n          @inject=\"$emit(\\'inject-test\\')\"\\n          @clear=\"$emit(\\'clear-test\\', $event)\"\\n          @quick-test=\"$emit(\\'quick-test\\', $event)\"\\n          @save-damage=\"$emit(\\'save-damage\\', $event)\"\\n          @clear-damage=\"$emit(\\'clear-damage\\', $event)\"\\n        />\\n      </div>\\n\\n      \\x3c!-- 日志选项卡 --\\x3e\\n      <div v-if=\"activeTab === \\'logs\\'\" class=\"gc-debug-tab-content\">\\n        <DebugLogsSection :logs=\"logs\" @clear=\"$emit(\\'clear-logs\\')\" />\\n      </div>\\n\\n      \\x3c!-- 原始数据选项卡 --\\x3e\\n      <div v-if=\"activeTab === \\'raw\\'\" class=\"gc-debug-tab-content\">\\n        <DebugRawSection :mvu-info=\"mvuInfo\" :settings=\"settings\" />\\n      </div>\\n    </div>\\n  </GcOverlay>\\n</template>\\n\\n<script setup lang=\"ts\">\\nimport { ref, computed } from \\'vue\\';\\nimport { GcOverlay } from \\'../components\\';\\nimport DebugStatusSection from \\'../features/debug/DebugStatusSection.vue\\';\\nimport DebugCharactersSection from \\'../features/debug/DebugCharactersSection.vue\\';\\nimport DebugTestSection from \\'../features/debug/DebugTestSection.vue\\';\\nimport DebugLogsSection from \\'../features/debug/DebugLogsSection.vue\\';\\nimport DebugRawSection from \\'../features/debug/DebugRawSection.vue\\';\\nimport type { MvuDebugInfo } from \\'../../services/debug\\';\\nimport type { Settings } from \\'../../types\\';\\nimport type { CharacterData } from \\'../../types\\';\\n\\nconst props = defineProps<{\\n  visible: boolean;\\n  mvuInfo: MvuDebugInfo;\\n  logs: Array<{ time: string; message: string; level?: string }>;\\n  settings: Settings;\\n  characters: CharacterData[];\\n  testName: string;\\n  testHeight: number;\\n  testOriginal: number;\\n}>();\\n\\ndefineEmits<{\\n  (e: \\'close\\'): void;\\n  (e: \\'refresh\\'): void;\\n  (e: \\'clear-logs\\'): void;\\n  (e: \\'update:testName\\', value: string): void;\\n  (e: \\'update:testHeight\\', value: number): void;\\n  (e: \\'update:testOriginal\\', value: number): void;\\n  (e: \\'inject-test\\'): void;\\n  (e: \\'clear-test\\', name?: string): void;\\n  (e: \\'quick-test\\', params: { name: string; height: number; original: number }): void;\\n  (e: \\'save-damage\\', params: { name: string; data: unknown }): void;\\n  (e: \\'clear-damage\\', name: string): void;\\n}>();\\n\\nconst activeTab = ref<\\'status\\' | \\'characters\\' | \\'test\\' | \\'logs\\' | \\'raw\\'>(\\'status\\');\\n\\nconst characterCount = computed(() => \\n  props.mvuInfo.messageVariables?.characterDetails?.length || 0\\n);\\n\\n// 过滤掉类型为 \\'未知\\' 的角色，用于显示\\nconst debugCharacters = computed(() => {\\n  const chars = props.mvuInfo.messageVariables?.characterDetails || [];\\n  return chars.filter(c => c.类型 !== \\'未知\\');\\n});\\n<\\/script>\\n\\n<style scoped>\\n.gc-debug-content {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 12px;\\n}\\n\\n.gc-debug-tabs {\\n  display: flex;\\n  gap: 4px;\\n  padding: 4px;\\n  background: rgba(0, 0, 0, 0.2);\\n  border-radius: 8px;\\n  flex-wrap: wrap;\\n}\\n\\n.gc-debug-tab {\\n  flex: 1;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  gap: 6px;\\n  padding: 8px 12px;\\n  background: transparent;\\n  border: none;\\n  border-radius: 6px;\\n  color: var(--gc-text-muted, #94a3b8);\\n  font-size: 0.8em;\\n  cursor: pointer;\\n  transition: all 0.2s;\\n}\\n\\n.gc-debug-tab:hover {\\n  background: rgba(255, 255, 255, 0.05);\\n  color: var(--gc-text, #f1f5f9);\\n}\\n\\n.gc-debug-tab.active {\\n  background: var(--gc-primary, #f472b6);\\n  color: white;\\n}\\n\\n.gc-debug-tab-badge {\\n  padding: 1px 6px;\\n  background: rgba(255, 255, 255, 0.2);\\n  border-radius: 10px;\\n  font-size: 0.85em;\\n}\\n\\n.gc-debug-tab.active .gc-debug-tab-badge {\\n  background: rgba(255, 255, 255, 0.3);\\n}\\n\\n.gc-debug-tab-content {\\n  padding: 8px 0;\\n}\\n\\n.gc-btn-link {\\n  background: transparent;\\n  border: none;\\n  color: var(--gc-text-muted, #94a3b8);\\n  cursor: pointer;\\n  padding: 4px 8px;\\n}\\n\\n.gc-btn-link:hover {\\n  color: var(--gc-text, #f1f5f9);\\n}\\n</style>\\n'],sourceRoot:''}]);const s=o},946(e,n){n.A=(e,n)=>{const a=e.__vccOpts||e;for(const[e,t]of n)a[e]=t;return a}},991(e,n,a){var t=a(906);t.__esModule&&(t=t.default),'string'==typeof t&&(t=[[e.id,t,'']]),t.locals&&(e.exports=t.locals);(0,a(424).A)('d3e12d86',t,!1,{ssrId:!0})}},o={};function s(e){var n=o[e];if(void 0!==n)return n.exports;var a=o[e]={id:e,exports:{}};return i[e](a,a.exports,s),a.exports}s.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return s.d(n,{a:n}),n},s.d=(e,n)=>{for(var a in n)s.o(n,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:n[a]})},s.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),s.r=e=>{'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(e,'__esModule',{value:!0})};const r='2.7.0',l=[{version:'2.7.0',date:'2025-01',changes:['新增：自动更新检查 - 启动时自动检查是否有新版本','新增：设置面板显示当前版本和更新状态','新增：手动检查更新按钮','新增：发现新版本时显示更新提示和下载链接','新增：可选择忽略特定版本的更新提示','新增：自动检查更新开关（默认开启，每24小时检查一次）','优化：设置面板分组显示，结构更清晰']},{version:'2.6.0',date:'2024-02',changes:['新增：损害计算系统 - 计算巨大娘行动可能造成的破坏','新增：人员伤亡估算（支持10种人口密度场景）','新增：建筑损毁、街道/城区毁坏估算','新增：宏观破坏力计算（城市/国家/大陆/行星/恒星/星系/宇宙级）','新增：特殊物理效应提示（地震、海啸、引力场等）','新增：扩展系统控制面板 - 在角色列表下方统一管理各计算模块','新增：按角色显示损害数据和汇总统计','新增：损害提示词模板，支持自动注入到 AI 提示词','优化：角色卡片展示损害数据详情','优化：支持多巨大娘损害汇总计算']},{version:'2.5.0',date:'2024-02',changes:['新增：单独部位变化功能 - 可为特定部位设置独立尺寸','新增：自定义部位字段支持，允许部位有不同于整体的变化倍率','新增：自定义部位在输出中带有 ⚡ 标记，便于识别','新增：提示词模板支持 {{自定义部位}} 变量','更新：变量更新规则增加单独部位设置说明','优化：身体数据使用格式化后的值显示']},{version:'2.4.0',date:'2024-02',changes:['新增：世界观模板系统 - 支持不同设定下的变化机制','新增：8种内置世界观（现实物理、玄幻修仙、科幻科技、魔法少女等）','新增：世界观快速切换器，一键切换不同设定','新增：世界观详情面板，展示变化机制、身体特性、特殊规则','新增：自定义世界观创建和编辑功能','新增：世界观提示词自动注入到 AI 提示词','优化：提示词模板系统增加世界观类型支持']},{version:'2.3.0',date:'2024-02',changes:['新增：提示词模板管理系统','新增：可自定义、启用/禁用各类提示词模板','新增：支持创建、编辑、删除自定义模板','新增：模板顺序调整功能','新增：内置变量更新规则模板，指导 AI 更新角色数据','新增：模板支持变量插值（如 {{角色名}}、{{身体数据}} 等）','新增：模板数据存储到全局变量，跨聊天持久化','优化：移除旧的自定义提示词头部，改用更灵活的模板系统']},{version:'2.2.0',date:'2024-02',changes:['数据存储：将角色数据存储位置从聊天变量改为楼层变量','数据存储：每条消息可拥有独立的数据快照','调试功能：调试数据也存储在楼层变量中']},{version:'2.1.0',date:'2024-02',changes:['UI重构：全新现代化界面，更优雅简约','UI优化：引入 Font Awesome 图标库','UI优化：面板高度自适应，大屏浏览体验更好','核心优化：内置 MVU 集成，无需额外安装依赖']},{version:'2.0.0',date:'2024-01',changes:['重构：使用 Vue 3 + Pinia 重写 UI','重构：使用 TailwindCSS 编写样式','重构：模块化架构，符合 tavern_helper_template 规范','优化：代码结构更清晰','优化：设置自动持久化到脚本变量']},{version:'1.2.0',date:'2024-01',changes:['重构：迁移到 tavern_helper_template 模板','新增：TypeScript 支持','新增：模块化架构','优化：代码结构和可维护性']},{version:'1.1.0',date:'2024-01',changes:['新增：角色卡片可展开显示详细数据','新增：自定义提示词头部功能','新增：帮助说明和更新日志面板','优化：UI 交互体验']},{version:'1.0.0',date:'2024-01',changes:['初始版本发布','支持巨大化/缩小化身体数据计算','支持相对尺寸参照物计算','支持互动限制检查','MVU 变量集成和提示词注入']}];$(()=>{(function(){if(!document.getElementById('font-awesome-css')){const e=document.createElement('link');e.id='font-awesome-css',e.rel='stylesheet',e.href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css',document.head.appendChild(e)}})(),console.log('[GiantessCalc] 脚本初始化开始...'),console.log('[GiantessCalc] MVU 已通过内置导入初始化'),console.log(`[GiantessCalc] ✅ 脚本预初始化完成 v${r}`)});const d=Vue,g=z,A=['荒野','乡村','郊区','小城市','中等城市','大城市','超大城市中心','东京市中心','香港','马尼拉','住宅内','公寓楼内','办公楼内','体育馆内','巨大娘体内'],p=g.z.object({enabled:g.z.boolean().default(!0),debug:g.z.boolean().default(!1),variablePrefix:g.z.string().default('巨大娘'),autoInject:g.z.boolean().default(!0),injectDepth:g.z.number().default(1),injectInteractionLimits:g.z.boolean().default(!0),precision:g.z.number().default(2),maxHistoryRecords:g.z.number().default(20),showVariableUpdateRules:g.z.boolean().default(!0),showWritingGuidelines:g.z.boolean().default(!1),compactPromptFormat:g.z.boolean().default(!1),injectWorldviewPrompt:g.z.boolean().default(!0),allowPartialScaling:g.z.boolean().default(!1),enableDamageCalculation:g.z.boolean().default(!1),injectDamagePrompt:g.z.boolean().default(!0),damageScenario:g.z.string().default('大城市'),showSpecialEffects:g.z.boolean().default(!0),showDamagePerCharacter:g.z.boolean().default(!0),showDamageSummary:g.z.boolean().default(!0)}).prefault({}),m=n('giantess-calculator-settings',()=>{const e=(0,d.ref)(p.parse(getVariables({type:'script',script_id:getScriptId()})));(0,d.watchEffect)(()=>{insertOrAssignVariables(t(e.value),{type:'script',script_id:getScriptId()})});const n=(0,d.ref)([]),a=(a,...t)=>{if(!e.value.debug)return;const c=(new Date).toLocaleTimeString(),i=t.map(e=>'object'==typeof e?JSON.stringify(e,null,2):String(e)).join(' ');n.value.push({time:c,type:a,message:i}),n.value.length>50&&n.value.shift()};return{settings:e,toggle:()=>{e.value.enabled=!e.value.enabled},log:(...n)=>{e.value.debug&&console.log('[GiantessCalc]',...n)},warn:(...e)=>{console.warn('[GiantessCalc]',...e)},error:(...e)=>{console.error('[GiantessCalc]',...e)},debugLogs:n,debugLog:(...n)=>{e.value.debug&&(console.log('[GiantessCalc]',...n),a('log',...n))},debugWarn:(...e)=>{console.warn('[GiantessCalc]',...e),a('warn',...e)},debugError:(...e)=>{console.error('[GiantessCalc]',...e),a('error',...e)},clearDebugLogs:()=>{n.value=[]}}}),C=1.75,u={身高:1.75,眼睛高度:1.61,肩膀高度:1.4,胸部顶端:1.4,胸部底端:1.23,肚脐高度:1.01,臀部高度:1.01,裆部高度:.86,大腿中部:.66,小腿肚:.45,脚踝高度:.08,大脚趾:.02,小脚趾:.01,足长:.25,足宽:.1,大脚趾长:.045,脚趾缝隙:.008,手掌长:.1,手掌宽:.08,手指长:.08,指尖面积:7e-5,指甲厚度:6e-4,指甲宽度:.01,乳房高度:.14,乳房宽度:.12,乳沟深度:.06,乳头直径:.01,单乳重量:1.06,臀部宽度:.9,臀沟深度:.06,臀部重量:26.5,腰部宽度:.185,肚脐直径:.015,肚脐深度:.015,阴阜高度:.06,阴阜宽度:.11,大阴唇长:.08,大阴唇宽:.035,小阴唇长:.05,阴蒂长:.03,阴道口宽:.025,阴道深度_闭合:.085,阴道深度_扩张:.11,阴道容积_闭合:65e-7,阴道容积_扩张:175e-7,宫颈长:.03,宫颈直径:.022,子宫容积:14e-5,输卵管长:.11,输卵管直径:.0025,头发直径:7e-5,阴毛直径:12e-5,阴毛长:.03,嘴巴宽度:.05,舌头长:.1,舌头宽:.05},v={普通成年人:1.7,普通男性:1.75,普通女性:1.65,小孩:1.2,婴儿:.5,智能手机:.15,硬币直径:.025,硬币厚度:.002,信用卡:.085,易拉罐:.12,矿泉水瓶:.22,篮球:.24,足球:.22,餐桌高度:.75,椅子高度:.45,床长度:2,沙发长度:2.5,轿车长度:4.5,轿车高度:1.5,公交车长度:12,公交车高度:3.2,火车车厢长:25,飞机_客机长:70,航母长度:330,单层楼高:3,两层楼房:7,十层楼房:30,五十层大楼:150,自由女神像:46,埃菲尔铁塔:330,哈利法塔:828,云层高度:2e3,珠穆朗玛峰:8848,臭氧层高度:25e3,国际空间站轨道:4e5,大气层顶端:1e5,月球直径:3474e3,地球直径:12742e3,地月距离:3844e5,太阳直径:1392e6,土星直径:11646e4,木星直径:13982e4,日地距离_1AU:149597870700,光年:9460730472580800,银河系直径:94607304725808e8},b={蚂蚁:.003,蟑螂:.03,蜜蜂:.015,苍蝇:.007,蚊子:.006,跳蚤:.002,螨虫:3e-4,细菌:2e-6},f=[{name:'Mini级',minScale:1,maxScale:10,description:'几米到十几米'},{name:'十倍',minScale:10,maxScale:100,description:'十几米，建筑如玩具'},{name:'Kilo级',minScale:100,maxScale:1e3,description:'百米级，城市踩在脚下'},{name:'千倍',minScale:1e3,maxScale:1e4,description:'公里级，山脉如石子'},{name:'Mega级_万倍',minScale:1e4,maxScale:1e5,description:'十公里级，触及云层'},{name:'Mega级_十万倍',minScale:1e5,maxScale:1e6,description:'百公里级，行星尺度'},{name:'Giga级_百万倍',minScale:1e6,maxScale:1e7,description:'千公里级，星球如玩具'},{name:'Giga级_千万倍',minScale:1e7,maxScale:1e8,description:'万公里级，地球如球'},{name:'Giga级_亿倍',minScale:1e8,maxScale:1e9,description:'十万公里级，地月如近邻'},{name:'Tera级_十亿倍',minScale:1e9,maxScale:1e10,description:'百万公里级，恒星如灯泡'},{name:'Tera级_百亿倍',minScale:1e10,maxScale:1e11,description:'千万公里级，太阳系穿行'},{name:'Tera级_千亿倍',minScale:1e11,maxScale:1e12,description:'AU级，恒星如尘埃'},{name:'星系级_万亿倍',minScale:1e12,maxScale:1e13,description:'10AU级'},{name:'星系级_十万亿倍',minScale:1e13,maxScale:1e16,description:'光年级'},{name:'光年级',minScale:1e16,maxScale:1e21,description:'星云星系'},{name:'宇宙级',minScale:1e21,maxScale:1/0,description:'超越可观测宇宙'}],h=[{name:'十分之一',scale:.1,description:'十几厘米，如宠物'},{name:'百分之一',scale:.01,description:'不到两厘米，如虫子'},{name:'千分之一_毫米级',scale:.001,description:'毫米级，蚂蚁如猛兽'},{name:'万分之一',scale:1e-4,description:'肉眼难见'},{name:'微米级',scale:1e-6,description:'细胞尺度'},{name:'纳米级',scale:1e-9,description:'分子尺度'},{name:'皮米级',scale:1e-12,description:'原子尺度'}];let x=2;function B(e,n=x){const a=Math.pow(10,n);return Math.round(e*a)/a}function E(e,n=!0){const a=Math.abs(e);if(n){const n=9460730472580800,t=149597870700;if(a>=1e3*n)return`${B(e/n)}光年`;if(a>=n)return`${B(e/n,3)}光年`;if(a>=t)return`${B(e/t)}AU`}return a>=1e6||a>=1e3?`${B(e/1e3)}公里`:a>=1?`${B(e)}米`:a>=.01?`${B(100*e)}厘米`:a>=.001?`${B(1e3*e)}毫米`:a>=1e-6?`${B(1e6*e)}微米`:a>=1e-9?`${B(1e9*e)}纳米`:`${B(1e12*e)}皮米`}function k(e){return e>=1e12?`${B(e/1e12)}万亿吨`:e>=1e9?`${B(e/1e9)}十亿吨`:e>=1e6?`${B(e/1e6)}百万吨`:e>=1e3?`${B(e/1e3)}吨`:`${B(e)}千克`}function y(e){return e>=1e9?`${B(e/1e9)}立方公里`:e>=1?`${B(e)}立方米`:e>=.001?`${B(1e3*e)}升`:e>=1e-6?`${B(1e6*e)}毫升`:`${B(1e9*e)}立方毫米`}function w(e){return e>=1e6?`${B(e/1e6)}平方公里`:e>=1?`${B(e)}平方米`:e>=1e-4?`${B(1e4*e)}平方厘米`:`${B(1e6*e)}平方毫米`}function V(e){if(e>=1){for(const n of f)if(e>=n.minScale&&e<n.maxScale)return{...n,type:'giant'};return{name:'宇宙级',description:'超越可观测宇宙',type:'giant'}}for(const n of h)if(e<=10*n.scale&&e>n.scale/10)return{...n,type:'tiny'};return{name:'亚原子级',description:'比原子还小',type:'tiny'}}function N(e,n=1.65,a={}){const t=e/n,c=V(t),i={},o={},s={},r={};for(const[e,c]of Object.entries(u)){if(void 0!==a[e]){const t=a[e],l=t/(c*(n/C));i[e]=t,o[e]=B(l),s[e]=B(t),e.includes('重量')?r[e]=k(t)+' ⚡':e.includes('容积')?r[e]=y(t)+' ⚡':e.includes('面积')?r[e]=w(t)+' ⚡':r[e]=E(t,t>1e10)+' ⚡';continue}if(e.includes('重量')){const a=c*Math.pow(t,3)*(n/C);s[e]=B(a),r[e]=k(a)}else if(e.includes('容积')){const a=c*Math.pow(t,3)*Math.pow(n/C,3);s[e]=B(a,6),r[e]=y(a)}else if(e.includes('面积')){const a=c*Math.pow(t,2)*Math.pow(n/C,2);s[e]=B(a,6),r[e]=w(a)}else{const a=c*t*(n/C);s[e]=B(a),r[e]=E(a,t>1e10)}}const l={},d={};for(const[e,n]of Object.entries(v)){const a=n/t;l[e]=B(a,4),d[e]=E(a,!1)}for(const[e,n]of Object.entries(b)){const a=n/t;l[e]=B(a,8),d[e]=E(a,!1)}const g=function(e,n,a,t){const c=[];return c.push(`【${n.name}】${n.description}`),c.push(''),e<100?(c.push('在她眼中：'),c.push(`- 普通人类：${t.普通成年人}`),c.push(`- 轿车：${t.轿车长度}`),c.push(`- 两层楼房：${t.两层楼房}`)):e<1e4?(c.push('在她眼中：'),c.push(`- 普通人类：${t.普通成年人}`),c.push(`- 十层楼房：${t.十层楼房}`),c.push(`- 埃菲尔铁塔：${t.埃菲尔铁塔}`)):e<1e6?(c.push('在她眼中：'),c.push(`- 珠穆朗玛峰：${t.珠穆朗玛峰}`),c.push(`- 云层：${t.云层高度}`),c.push(`- 国际空间站：${t.国际空间站轨道}`)):e<1e9?(c.push('在她眼中：'),c.push(`- 地球直径：${t.地球直径}`),c.push(`- 月球直径：${t.月球直径}`)):e<1e12?(c.push('在她眼中：'),c.push(`- 太阳直径：${t.太阳直径}`),c.push(`- 地月距离：${t.地月距离}`)):(c.push('在她眼中：'),c.push(`- 日地距离：${t.日地距离_1AU}`),e>1e16&&c.push(`- 银河系：${t.银河系直径}`)),c.push(''),c.push('关键身体数据：'),c.push(`- 身高：${a.身高}`),c.push(`- 足长：${a.足长}`),c.push(`- 手掌：${a.手掌长}`),c.join('\\n')}(t,c,r,d);return{原身高:n,当前身高:e,当前身高_格式化:E(e,t>1e10),倍率:B(t),级别:c.name,级别描述:c.description,身体部位:s,身体部位_格式化:r,自定义部位:i,自定义部位_倍率:o,眼中的世界:l,眼中的世界_格式化:d,描述:g,_计算时间:Date.now(),_版本:'1.3'}}function D(e,n=1.7){const a=e/n,t=V(a),c={},i={};for(const[e,n]of Object.entries(u))if(!e.includes('重量')&&!e.includes('容积')&&!e.includes('面积')){const t=n/a;c[e]=B(t),i[e]=E(t,!1)}const o=function(e,n,a){const t=[];return t.push(`【${n.name}】${n.description}`),t.push(''),t.push('正常女性在他眼中：'),t.push(`- 身高：${a.身高}`),t.push(`- 脚掌：${a.足长}`),t.push(`- 脚趾：${a.大脚趾长}`),e<.01&&(t.push(`- 阴毛：${a.阴毛长}`),t.push(`- 毛发直径：${a.头发直径}`)),t.join('\\n')}(a,t,i);return{原身高:n,当前身高:e,当前身高_格式化:E(e,!1),倍率:B(a,6),级别:t.name,级别描述:t.description,眼中的巨大娘:c,眼中的巨大娘_格式化:i,描述:o,_计算时间:Date.now(),_版本:'1.2'}}const F={手指撩下巴:{minRatio:.05,description:'需要小者至少有几厘米大，否则手指无法精确操作',alternatives:'可以用指尖轻触、用指甲拨弄'},手掌握住:{minRatio:.01,description:'需要小者有一定大小才能被手掌握住',alternatives:'可以用指尖捏住、放在掌心'},双手捧起:{minRatio:.02,description:'需要小者有足够体积才能双手捧起',alternatives:'可以放在单手掌心、用指尖拿起'},拥抱:{minRatio:.3,description:'需要双方体型相近才能拥抱',alternatives:'可以将小者贴在身上、放在胸口'},亲吻嘴唇:{minRatio:.02,description:'需要小者至少和嘴唇差不多大',alternatives:'可以舔舐、用舌尖触碰、整个含入口中'},踩在脚下_感知:{minRatio:.001,description:'需要小者至少毫米级才能被感知到踩踏感',alternatives:'更小的小人会被完全无视，如同灰尘'},脚趾夹住:{minRatio:.005,description:'需要小者有一定大小才能被脚趾夹住',alternatives:'可以卡在脚趾缝中、粘在脚趾上'},用脚玩弄:{minRatio:.01,description:'需要小者足够大才能被脚有意识地玩弄',alternatives:'可以无意识地踩踏、碾压'},舌头卷起:{minRatio:.005,description:'需要小者有一定大小才能被舌头卷起',alternatives:'可以用唾液粘住、随唾液吞下'},咀嚼:{minRatio:.01,description:'需要小者有一定大小才值得咀嚼',alternatives:'可以直接吞下、随食物一起吞咽'},活吞_有感觉:{minRatio:.005,description:'需要小者至少几毫米才能在吞咽时被感知',alternatives:'更小的会像灰尘一样被无意识吞下'},入阴_有感觉:{minRatio:.005,description:'需要小者至少几毫米才能在阴道内被感知',alternatives:'更小的会完全无感，如同细菌'},入菊_有感觉:{minRatio:.005,description:'需要小者至少几毫米才能在肛门内被感知',alternatives:'更小的会完全无感'},乳沟夹住:{minRatio:.02,description:'需要小者有一定大小才能被乳沟夹住',alternatives:'可以藏在乳沟褶皱中、粘在皮肤上'},肉眼可见:{minRatio:1e-4,description:'需要小者至少0.1毫米才能被肉眼看见',alternatives:'需要放大镜或显微镜才能看到'},清晰辨认面容:{minRatio:.001,description:'需要小者至少1毫米才能辨认面容',alternatives:'只能看到一个小点或模糊轮廓'},听到声音:{minRatio:.001,description:'需要小者至少毫米级才可能发出可听见的声音',alternatives:'声音太小，完全听不到'},正常对话:{minRatio:.05,description:'需要双方体型差距不太大才能正常对话',alternatives:'需要扩音设备或特殊能力才能交流'}};function S(e,n,a){const t=n/e,c=[],i=[],o={};for(const[e,n]of Object.entries(F))t>=n.minRatio?c.push(e):(i.push({action:e,reason:n.description,alternative:n.alternatives}),o[e]=n.alternatives);const s=(e,n=2)=>Math.round(e*Math.pow(10,n))/Math.pow(10,n);return{ratio:t,ratioFormatted:t>=.01?`${s(100*t)}%`:`1/${s(1/t)}`,smallInBigEyes:a(n),possible:c,impossible:i,alternatives:o}}function T(e,n,a){if(0===a.impossible.length)return`${e}与${n}的体型差距不大，可以进行大多数正常互动。`;const t=[];t.push(`【${e}与${n}的互动限制】`),t.push(`体型比例：${n}是${e}的${a.ratioFormatted}`),t.push(`${n}在${e}眼中约${a.smallInBigEyes}大小`),t.push(''),t.push('以下互动在物理上不合理，请避免或使用替代方案：');for(const e of a.impossible)t.push(`- ${e.action}：${e.reason}`),e.alternative&&t.push(`  → 替代：${e.alternative}`);return t.join('\\n')}const j={荒野:1,乡村:50,郊区:500,小城市:3e3,中等城市:5e3,大城市:1e4,超大城市中心:25e3,东京市中心:15e3,香港:27e3,马尼拉:43e3,住宅内:4e4,公寓楼内:8e4,办公楼内:1e5,体育馆内:5e5,巨大娘体内:0},I={荒野:0,乡村:20,郊区:200,小城市:500,中等城市:800,大城市:1200,超大城市中心:2e3,住宅内:0,公寓楼内:0,办公楼内:0,体育馆内:0,巨大娘体内:0},W={直径:9461e17,恒星数量:2e11,行星估计:1e11},Y={直径:879873e21,星系数量:2e12};function M(e){return e>=1e12?`${B(e/1e12)}万亿`:e>=1e8?`${B(e/1e8)}亿`:e>=1e4?`${B(e/1e4)}万`:e>=1e3?`${B(e/1e3)}千`:`${B(e)}`}function P(e,n=1.65,a='大城市'){const t=e/n,c=e/7,i=c*(.4*c),o=i/1e6,s=Math.sqrt(i),r={足迹面积:i,足迹面积_格式化:w(i),足迹直径:s,足迹直径_格式化:E(s)},l=o*(j[a]||j['大城市']),d=.2*l,g=o*(I[a]||I['大城市']),A=.5*g,p=o/.01;let m=0,C='无';o>=.05&&(m=o/1,C=m<1?'部分城区':m<5?'多个城区':'大片城区');const u={小人伤亡:{最小估计:d,最大估计:l,格式化:(h=d,x=l,h===x?M(h)+'人':x<10?`${B(h)}-${B(x)}人`:`${M(h)}-${M(x)}人`),描述:(f=(d+l)/2,f<1?'基本无伤亡':f<10?'少量伤亡':f<100?'数十人伤亡':f<1e3?'数百人伤亡':f<1e4?'数千人伤亡，相当于一场严重事故':f<1e5?'数万人伤亡，相当于一场大型灾难':f<1e6?'数十万人伤亡，相当于一场毁灭性灾难':f<1e7?'数百万人伤亡，相当于一座大城市人口':f<1e8?'数千万人伤亡，相当于一个中等国家人口':f<1e9?'数亿人伤亡，相当于一个大国人口':'数十亿人伤亡，人类文明级别灾难')},建筑损毁:{最小估计:A,最大估计:g,格式化:g<1?'不到1栋':`${M(A)}-${M(g)}栋`,描述:(b=(A+g)/2,b<1?'基本无损坏':b<10?'少量建筑损毁':b<100?'数十栋建筑损毁':b<1e3?'数百栋建筑损毁，约等于一个小区':b<1e4?'数千栋建筑损毁，约等于一个城区':b<1e5?'数万栋建筑损毁，约等于一座城市':'数十万栋以上建筑损毁，多座城市被夷平')},街道损毁:{数量:p,格式化:p<1?'不到1条':`约${M(p)}条`},城区损毁:{数量:m,格式化:m<.1?'微乎其微':`约${B(m,1)}个`,等级:C}};var b,f,h,x;const k={};for(const[e,n]of Object.entries(j)){const a=o*n*.5;k[e]={伤亡:a,格式化:M(a)+'人'}}const y=function(e,n){if(e<1e4)return null;const a={等级:'city',等级名称:'城市级',描述:'',城市:null,国家:null,大陆:null,行星:null,恒星:null,星系:null};if(n>=1){const e=n/200;e>=.01&&(a.城市={数量:e,格式化:e>=1?`${B(e)}座城市`:`${B(100*e)}%的城市`})}const t=1e5;if(n>=1e4){const e=n/t;a.等级='country',a.等级名称='国家级',a.国家={数量:e,格式化:e>=1?`${B(e)}个国家`:`${B(100*e)}%的国家领土`}}const c=3e7;if(n>=3e6){const e=n/c;a.等级='continent',a.等级名称='大陆级',a.大陆={数量:e,格式化:e>=1?`${B(e)}个大陆`:`${B(100*e)}%的大陆`}}if(e>=.1*v.地球直径){const n=e/v.地球直径;a.等级='planet',a.等级名称='行星级',a.行星={数量:Math.pow(n,3),格式化:n>=1?`可轻易摧毁${B(Math.pow(n,3))}个地球大小的行星`:'可严重破坏行星表面'}}if(e>=.1*v.太阳直径){const n=e/v.太阳直径;a.等级='star',a.等级名称='恒星级',a.恒星={数量:Math.pow(n,3),格式化:n>=1?`可摧毁${M(Math.pow(n,3))}个太阳大小的恒星`:'可严重影响恒星'}}const i=W.直径;if(e>=.001*i){const n=e/i;a.等级='galaxy',a.等级名称='星系级';const t=W.恒星数量*Math.pow(n,3);a.星系={数量:n>=1?Math.pow(n,3):n,格式化:n>=1?`可摧毁${M(Math.pow(n,3))}个银河系大小的星系`:`一步可毁灭${M(t)}颗恒星`}}return e>=.01*Y.直径&&(a.等级='universe',a.等级名称='宇宙级',a.描述='已超越可观测宇宙尺度，破坏力无法估量'),a.描述||(a.描述=`达到${a.等级名称}破坏力`),a}(e,o),{level:V,description:N}=(D=e)<10?{level:'微型',description:'可造成局部破坏，类似小型事故'}:D<100?{level:'建筑级',description:'可轻易破坏建筑物'}:D<1e3?{level:'街区级',description:'一步可跨越多个街区'}:D<1e4?{level:'城区级',description:'行走即可摧毁整个城区'}:D<1e5?{level:'城市级',description:'一脚可踏平一座城市'}:D<1e6?{level:'国家级',description:'跨步可横跨国家'}:D<v.地球直径?{level:'大陆级',description:'可轻易横跨大陆'}:D<v.太阳直径?{level:'行星级',description:'行星如玩具般大小'}:D<v.日地距离_1AU?{level:'恒星级',description:'恒星如灯泡般大小'}:D<v.光年?{level:'星系级',description:'可在星系间穿行'}:{level:'宇宙级',description:'超越已知宇宙尺度'};var D;const F=function(e){const n=[];return e>=100&&n.push('脚步引发局部地震'),e>=1e3&&(n.push('行走产生强风暴'),n.push('脚步可引发海啸')),e>=1e4&&(n.push('身体影响局部天气'),n.push('呼吸产生飓风')),e>=1e5&&(n.push('头部进入云层/平流层'),n.push('体温影响区域气候')),e>=1e6&&(n.push('身体产生可观测引力场'),n.push('可能影响地球自转')),e>=v.地球直径&&(n.push('质量可能形成行星级引力'),n.push('存在即可改变轨道')),e>=v.太阳直径&&(n.push('质量接近或超过恒星'),n.push('可能引发核聚变反应')),e>=v.日地距离_1AU&&n.push('引力可撕裂星系结构'),n}(e);return{身高:e,身高_格式化:E(e,t>1e10),倍率:B(t),足迹:r,单步损害:u,各场景伤亡:k,宏观破坏:y,破坏力等级:V,破坏力描述:N,特殊效应:F,_计算时间:Date.now()}}function O(e,n){const a=[];if(a.push(`【${e}的破坏力数据】`),a.push(`当前身高：${n.身高_格式化}（${n.倍率}倍）`),a.push(`破坏力等级：${n.破坏力等级} - ${n.破坏力描述}`),a.push(''),a.push('【足迹影响】'),a.push(`- 足迹面积：${n.足迹.足迹面积_格式化}`),a.push(`- 足迹直径：${n.足迹.足迹直径_格式化}`),a.push(''),a.push('【每一步可能造成的损害】（大城市场景）'),a.push(`- 人员伤亡：${n.单步损害.小人伤亡.格式化}`),a.push(`  ${n.单步损害.小人伤亡.描述}`),a.push(`- 建筑损毁：${n.单步损害.建筑损毁.格式化}`),a.push(`  ${n.单步损害.建筑损毁.描述}`),a.push(`- 街道损毁：${n.单步损害.街道损毁.格式化}`),n.单步损害.城区损毁.数量>0&&a.push(`- 城区损毁：${n.单步损害.城区损毁.格式化}（${n.单步损害.城区损毁.等级}）`),n.宏观破坏&&(a.push(''),a.push(`【宏观破坏力】${n.宏观破坏.等级名称}`),n.宏观破坏.城市&&a.push(`- 城市毁灭：${n.宏观破坏.城市.格式化}`),n.宏观破坏.国家&&a.push(`- 国家毁灭：${n.宏观破坏.国家.格式化}`),n.宏观破坏.大陆&&a.push(`- 大陆毁灭：${n.宏观破坏.大陆.格式化}`),n.宏观破坏.行星&&a.push(`- 行星破坏：${n.宏观破坏.行星.格式化}`),n.宏观破坏.恒星&&a.push(`- 恒星破坏：${n.宏观破坏.恒星.格式化}`),n.宏观破坏.星系&&a.push(`- 星系破坏：${n.宏观破坏.星系.格式化}`)),n.特殊效应.length>0){a.push(''),a.push('【特殊物理效应】');for(const e of n.特殊效应)a.push(`- ${e}`)}return a.join('\\n')}function U(e){const n=[];return n.push(`破坏力:${e.破坏力等级}`),n.push(`足迹:${e.足迹.足迹面积_格式化}`),n.push(`单步伤亡:${e.单步损害.小人伤亡.格式化}`),n.push(`建筑损毁:${e.单步损害.建筑损毁.格式化}`),e.宏观破坏&&n.push(`宏观:${e.宏观破坏.等级名称}`),e.特殊效应.length>0&&n.push(`效应:${e.特殊效应.slice(0,2).join('/')}`),n.join(' | ')}function R(e){return e>=1.5?'giant':e<=.8?'tiny':'normal'}function G(e,n,a){return e/n>=1?N(e,n,a):D(e,n)}function q(e,n,a='大城市'){return e/n<1?null:P(e,n,a)}function L(e,n){let a,t;e.height>=n.height?(a=e,t=n):(a=n,t=e);const c=S(a.height,t.height,E);return{大者:a.name,小者:t.name,...c,提示:T(a.name,t.name,c)}}function Q(e,n){return e.replace(/\\{\\{(\\w+)\\}\\}/g,(e,a)=>{const t=n[a];return void 0!==t?String(t):e})}function H(e,n,a,t={}){const c=[];if('身体部位_格式化'in n&&n.身体部位_格式化)for(const[e,a]of Object.entries(n.身体部位_格式化))c.push(`- ${e}: ${a}`);let i='';if('自定义部位'in n&&n.自定义部位){const e=Object.entries(n.自定义部位);if(e.length>0){const a=['\\n**⚡ 自定义部位**（与整体倍率不同）'],t=n.自定义部位_倍率||{};for(const[n,c]of e){const e=t[n]?`（${t[n]}倍）`:'';a.push(`- ${n}: ${E(c)} ${e}`)}i=a.join('\\n')}}const o=[];if('眼中的世界_格式化'in n&&n.眼中的世界_格式化)for(const[e,a]of Object.entries(n.眼中的世界_格式化))o.push(`- ${e}: ${a}`);const s=t.worldview?function(e){const n=[];if(n.push(`# 世界观设定：${e.name}`),n.push(''),n.push(e.description),n.push(''),n.push('## 变化机制'),n.push(e.mechanism),n.push(''),n.push('## 身体特性'),n.push(e.bodyCharacteristics),n.push(''),e.limitations.length>0&&'无'!==e.limitations[0]){n.push('## 限制与代价');for(const a of e.limitations)n.push(`- ${a}`);n.push('')}if(e.specialRules.length>0){n.push('## 特殊规则');for(const a of e.specialRules)n.push(`- ${a}`);n.push('')}if(e.writingTips.length>0){n.push('## 写作建议');for(const a of e.writingTips)n.push(`- ${a}`)}return n.join('\\n')}(t.worldview):'';let r='';return t.damageData&&t.enableDamageCalculation&&(r=t.compactPromptFormat?U(t.damageData):O(e,t.damageData)),{角色名:e,当前身高:n.当前身高,当前身高_格式化:n.当前身高_格式化,原身高:a,原身高_格式化:E(a),倍率:n.倍率,级别:n.级别,描述:n.描述,身体数据:c.join('\\n')||'（无数据）',自定义部位:i,相对参照:o.join('\\n')||'（无数据）',互动限制列表:'',世界观提示词:s,世界观名称:t.worldview?.name||'',损害数据:r}}const Z=[{id:'header',name:'头部说明',description:'提示词的开头部分',enabled:!0,order:0,type:'header',builtin:!0,content:'【巨大娘/小人 数据参考】\\n\\n以下是当前场景中角色的尺寸数据，请在描写时参考这些数据保持一致性。'},{id:'character-data',name:'角色数据',description:'每个角色的身体数据（自动生成）',enabled:!0,order:10,type:'character',builtin:!0,content:'## {{角色名}}\\n\\n**基础信息**\\n- 当前身高：{{当前身高_格式化}}（{{倍率}}倍，{{级别}}）\\n- 原始身高：{{原身高_格式化}}\\n\\n**身体数据**\\n{{身体数据}}\\n{{自定义部位}}\\n**相对参照**\\n{{相对参照}}\\n\\n{{描述}}'},{id:'interaction-limits',name:'互动限制',description:'角色之间的互动限制说明',enabled:!0,order:20,type:'interaction',builtin:!0,content:'---\\n\\n# 互动物理限制\\n\\n以下互动在当前体型差距下**物理上不合理**，请避免或使用替代方案：\\n\\n{{互动限制列表}}'},{id:'variable-update-rules',name:'变量更新规则',description:'指导 AI 如何更新角色数据变量',enabled:!0,order:30,type:'rules',builtin:!0,content:'---\\n\\n# 变量更新规则\\n\\n当角色身高发生变化时，请在回复末尾使用以下格式更新数据：\\n\\n```\\n_.set(\\'巨大娘.{{角色名}}.当前身高\\', {{新身高数值}});\\n_.set(\\'巨大娘.{{角色名}}.变化原因\\', \\'{{变化原因}}\\');\\n_.set(\\'巨大娘.{{角色名}}.变化时间\\', \\'{{当前时间点}}\\');\\n```\\n\\n**单独部位变化**（可选）：\\n如果某个部位单独变化（如胸部、脚掌等），使用以下格式：\\n\\n```\\n_.set(\\'巨大娘.{{角色名}}.自定义部位.乳房高度\\', {{尺寸米}});\\n_.set(\\'巨大娘.{{角色名}}.自定义部位.足长\\', {{尺寸米}});\\n```\\n\\n**场景设置**（可选）：\\n当场景发生变化时，可以设置当前场景以更准确地计算损害数据：\\n\\n```\\n_.set(\\'巨大娘._场景.当前场景\\', \\'{{场景名称}}\\');\\n_.set(\\'巨大娘._场景.场景原因\\', \\'{{为什么在这个场景}}\\');\\n```\\n\\n可用场景列表：\\n- **户外场景**：荒野、乡村、郊区、小城市、中等城市、大城市、超大城市中心、东京市中心、香港、马尼拉\\n- **室内场景**：住宅内、公寓楼内、办公楼内、体育馆内\\n- **特殊场景**：巨大娘体内（小人进入巨大娘身体内部）\\n\\n**注意事项**：\\n- 身高和部位尺寸单位均为**米**，如 170米 写作 `170`，1.7公里 写作 `1700`\\n- 变化原因应简短描述导致身高变化的原因\\n- 变化时间可以是故事中的时间点描述\\n- 自定义部位会独立计算倍率，未设置的部位按整体倍率缩放\\n- 场景设置会影响损害计算的人口密度和建筑密度'},{id:'worldview',name:'世界观设定',description:'当前世界观的变化机制和特殊规则（自动生成）',enabled:!0,order:35,type:'worldview',builtin:!0,content:'{{世界观提示词}}'},{id:'damage-calculation',name:'损害计算',description:'每个角色行动可能造成的破坏数据',enabled:!0,order:25,type:'damage',builtin:!0,requiresFeature:'damageCalculation',content:'---\\n\\n# 破坏力数据\\n\\n{{损害数据}}'},{id:'writing-guidelines',name:'写作指南',description:'针对巨大娘/小人场景的写作建议',enabled:!1,order:40,type:'footer',builtin:!0,content:'---\\n\\n# 写作建议\\n\\n1. **尺度感知**：注意描写时的比例关系，小人在巨大娘眼中可能只是一个小点\\n2. **感官差异**：巨大娘可能听不到小人的声音，小人可能被巨大娘的脚步声震耳欲聋\\n3. **互动真实性**：考虑物理上是否可行，避免不合理的互动描写\\n4. **视角切换**：可以在巨大娘视角和小人视角之间切换，增加沉浸感'}],X='giantessCalc_promptTemplates',J=n('giantess-calculator-prompts',()=>{const e=(0,d.ref)((()=>{const e=getVariables({type:'global'}),n=e?.[X];if(n&&Array.isArray(n)){const e=Z.filter(e=>e.builtin).map(e=>e.id),a=n.filter(n=>!e.includes(n.id)),t=n.filter(n=>e.includes(n.id));return[...Z.filter(e=>e.builtin).map(e=>{const n=t.find(n=>n.id===e.id);return n?{...e,enabled:n.enabled,order:n.order,content:n.content}:e}),...a].sort((e,n)=>e.order-n.order)}return[...Z]})());(0,d.watchEffect)(()=>{insertOrAssignVariables({[X]:t(e.value)},{type:'global'})});const n=(0,d.computed)(()=>e.value.filter(e=>e.enabled).sort((e,n)=>e.order-n.order));return{templates:e,enabledTemplates:n,toggleTemplate:n=>{const a=e.value.find(e=>e.id===n);a&&(a.enabled=!a.enabled)},updateTemplate:(n,a)=>{const t=e.value.findIndex(e=>e.id===n);-1!==t&&(e.value[t]={...e.value[t],...a})},addTemplate:n=>{const a=Math.max(...e.value.map(e=>e.order),0);e.value.push({...n,id:`custom-${Date.now()}`,order:a+10,builtin:!1})},removeTemplate:n=>{const a=e.value.find(e=>e.id===n);a&&!a.builtin&&(e.value=e.value.filter(e=>e.id!==n))},resetToDefaults:()=>{e.value=[...Z]},moveTemplate:(n,a)=>{const t=[...e.value].sort((e,n)=>e.order-n.order),c=t.findIndex(e=>e.id===n);if(-1===c)return;if('up'===a&&0===c)return;if('down'===a&&c===t.length-1)return;const i='up'===a?c-1:c+1,o=t[c].order;t[c].order=t[i].order,t[i].order=o},getTemplate:n=>e.value.find(e=>e.id===n)}}),K=[{id:'realistic-physics',name:'现实物理',icon:'fa-solid fa-atom',description:'遵循物理定律的硬核设定，身体素质随体型指数增长',mechanism:'巨大化/缩小化遵循物理定律：\\n- 身高变为N倍时，体重变为N³倍\\n- 力量与肌肉横截面积成正比（N²倍）\\n- 相对力量随体型增大而降低（力量/体重 = 1/N）\\n- 代谢率、散热等受到平方立方定律影响',bodyCharacteristics:'体型变化后的身体特征：\\n- 巨大化：相对力量下降，但绝对力量极强；需要更多食物和氧气；体温调节困难\\n- 缩小化：相对力量增强，可以举起相对体重更重的物体；但绝对力量很弱\\n- 骨骼密度、肌肉结构会有相应变化以支撑新体型',limitations:['巨大化超过一定程度会有骨骼支撑问题','超小体型会有体温维持困难','需要与体型匹配的食物和水','无法随意控制变化程度'],specialRules:['小人可能被踩踏时受到物理伤害','巨人的每一步都会造成地震效果','声音传播受体型影响，小人说话巨人可能听不见'],writingTips:['注意描写重量感和震动感','考虑温度差异（小人体温流失快）','描写呼吸、心跳等生理差异','小人视角注意空气流动、气味等感知差异'],builtin:!0,allowPartialScaling:!1},{id:'fantasy-cultivation',name:'玄幻修仙',icon:'fa-solid fa-yin-yang',description:'通过灵气、法术或法宝实现体型变化，不受物理定律约束',mechanism:'体型变化通过修仙手段实现：\\n- 服用丹药（巨人丸、缩小丹等）\\n- 修炼特殊功法（天地同寿诀、芥子纳须弥等）\\n- 使用法宝（如缩地成寸镜、万丈金身符）\\n- 先天神通（妖族/神族特有能力）',bodyCharacteristics:'灵气护体下的身体特征：\\n- 身体强度与修为相关，而非单纯体型\\n- 可以通过灵气维持正常代谢\\n- 神识/灵觉可以弥补感官的不足\\n- 可能有特殊体质（如天生神力、不坏金身）',limitations:['需要消耗灵气/法力维持变化','可能有时间限制或冷却时间','受修为境界限制变化程度','特定材料的法宝/丹药才能触发'],specialRules:['高修为者可以保护小人不受物理伤害','可以通过神识交流，不受声音限制','灵气护盾可以防止被踩死','储物空间可以安全存放小人'],writingTips:['描写灵气流动的感觉','注意修为差距带来的压制感','可以加入灵宠/契约的设定','体型变化可以结合阵法、秘境等场景'],builtin:!0,allowPartialScaling:!0,typicalPartOverrides:{乳房高度:1.5,乳房宽度:1.5,臀部宽度:1.3}},{id:'sci-fi-tech',name:'科幻科技',icon:'fa-solid fa-microchip',description:'通过纳米技术、基因改造或缩放射线等科技手段实现',mechanism:'科技手段实现体型变化：\\n- 皮姆粒子/缩放射线直接改变原子间距\\n- 纳米机器人重构身体结构\\n- 基因改造激活特殊生长因子\\n- 虚拟现实/意识上传改变感知尺度',bodyCharacteristics:'科技增强下的身体特征：\\n- 纳米机器维持身体机能稳定\\n- 植入芯片可以通讯和定位\\n- 外骨骼或力场可以增强防护\\n- 可能有能量护盾保护',limitations:['需要能源供给（电池、反应堆等）','设备故障可能导致变化失控','可能有副作用需要定期检查','EMP或特定频率可能干扰'],specialRules:['纳米机器人可以提供即时翻译和放大通讯','力场护盾可以保护小人','可以通过芯片感知小人的生命体征','急救纳米可以修复受伤的小人'],writingTips:['加入科技感的描写（全息投影、数据流等）','可以有系统界面、数值显示','考虑科技伦理和社会影响','可能有企业、政府等组织介入'],builtin:!0,allowPartialScaling:!0},{id:'magical-girl',name:'魔法少女',icon:'fa-solid fa-wand-magic-sparkles',description:'通过变身魔法实现，通常有华丽的变身过程和时间限制',mechanism:'魔法变身机制：\\n- 使用魔法道具（变身器、魔杖等）触发变身\\n- 念诵咒语或进行特定动作\\n- 强烈情感触发觉醒\\n- 与魔法生物契约获得力量',bodyCharacteristics:'魔法变身后的身体特征：\\n- 获得魔法强化的身体\\n- 通常会有服装变化（魔法少女服装）\\n- 可能有翅膀、光环等装饰\\n- 身体曲线可能更加突出',limitations:['变身有时间限制','魔力耗尽会强制解除变身','变身需要特定条件或道具','可能被特定手段封印能力'],specialRules:['魔法可以创造安全空间保护小人','可以用魔法与小人心灵感应','治愈魔法可以恢复受伤的小人','可以将小人变成可爱的配饰携带'],writingTips:['加入华丽的变身场景描写','可以有可爱的魔法宠物角色','注重情感和羁绊的描写','可以加入敌对势力或怪物'],builtin:!0,allowPartialScaling:!0,typicalPartOverrides:{乳房高度:1.3,乳房宽度:1.3,臀部宽度:1.2,腰部宽度:.9}},{id:'monster-girl',name:'怪物娘',icon:'fa-solid fa-dragon',description:'作为特殊种族天生拥有巨大体型，是种族特性而非后天变化',mechanism:'种族特性说明：\\n- 天生为巨大种族（巨人族、龙娘、泰坦等）\\n- 或天生为微小种族（妖精、小人国居民等）\\n- 体型是稳定的种族特征\\n- 可能可以通过特殊能力暂时改变',bodyCharacteristics:'种族身体特征：\\n- 身体结构适应了该体型（骨骼更强壮等）\\n- 可能有种族特有器官（翅膀、尾巴、角等）\\n- 新陈代谢与体型匹配\\n- 寿命可能与人类不同',limitations:['体型相对固定，难以大幅改变','可能有种族弱点','繁殖可能有种族限制','社会地位可能受种族影响'],specialRules:['对小型生物有天生的保护本能','可能有种族间的契约或主从关系','某些种族有吞食或收养小人的习俗','跨种族恋爱可能有社会阻力'],writingTips:['注重种族文化和习俗的描写','可以加入种族间的矛盾或联盟','描写种族特有的身体部位','考虑不同种族的生活方式差异'],builtin:!0,allowPartialScaling:!1},{id:'supernatural',name:'超自然',icon:'fa-solid fa-ghost',description:'神力、诅咒、许愿等超自然力量导致的体型变化',mechanism:'超自然变化来源：\\n- 神灵赐福或诅咒\\n- 许愿（灯神、流星、神龙等）\\n- 神器/圣物的力量\\n- 恶魔契约\\n- 精神力/念力觉醒',bodyCharacteristics:'超自然力量下的身体特征：\\n- 身体可能违反物理定律（如飘浮、穿透等）\\n- 可能有神圣/邪恶的气息\\n- 外表可能有特殊标记（如发光、阴影等）\\n- 可能有不老不死等特性',limitations:['可能有诅咒代价（如每次变化减少寿命）','可能需要特定条件维持（如月圆之夜）','可能被特定力量克制（如圣水、符咒）','契约可能有隐藏条款'],specialRules:['神力可以完全保护契约者','可能有命运牵绊等设定','可以通过仪式赋予小人保护','可能有预言或使命需要完成'],writingTips:['可以加入神秘主义元素','描写超自然力量的视觉效果','可以有宗教或神话背景','注意塑造超自然存在的威严感或恐怖感'],builtin:!0,allowPartialScaling:!0},{id:'dream-fantasy',name:'梦境幻想',icon:'fa-solid fa-cloud-moon',description:'在梦境、幻想空间或精神世界中的体型变化，不受现实约束',mechanism:'梦境/幻想世界规则：\\n- 进入他人或共享梦境空间\\n- 精神世界具象化\\n- 虚拟现实全沉浸体验\\n- 想象力直接塑造现实',bodyCharacteristics:'梦境中的身体特征：\\n- 身体可以随意变形\\n- 不会真正受伤（但可能有心理影响）\\n- 可以拥有任何想象中的能力\\n- 外表可以随心情变化',limitations:['醒来后一切重置','梦境可能不稳定','可能受到梦魇/他人干扰','过度沉浸可能影响现实感知'],specialRules:['在梦中不会真正死亡','可以创造任何想要的场景','情感会直接影响梦境环境','梦境中的时间流速可能不同'],writingTips:['可以有超现实的场景描写','加入象征性和隐喻元素','描写梦境特有的模糊感和跳跃感','可以探索潜意识和内心欲望'],builtin:!0,allowPartialScaling:!0},{id:'fetish-pure',name:'纯粹幻想',icon:'fa-solid fa-heart',description:'不考虑设定合理性，专注于场景和感官体验的纯粹描写',mechanism:'无需解释的幻想世界：\\n- 体型变化自然发生，无需理由\\n- 不需要考虑物理合理性\\n- 专注于场景和感受\\n- 一切为了满足幻想',bodyCharacteristics:'理想化的身体特征：\\n- 完美的身材比例\\n- 不会有任何不适感（除非剧情需要）\\n- 身体柔韧性和耐久性超常\\n- 感官被大幅强化',limitations:['无'],specialRules:['小人永远不会真正受伤（除非剧情需要）','可以进行任何想象中的互动','感官体验被大幅强化','一切以满足幻想为优先'],writingTips:['专注于感官细节的描写','不需要解释设定，直接进入场景','充分描写身体接触的感受','可以加入大量的感官形容词'],builtin:!0,allowPartialScaling:!0,typicalPartOverrides:{乳房高度:1.5,乳房宽度:1.5,臀部宽度:1.4,足长:1.1}}],ee='giantessCalc_worldviews',ne='giantessCalc_currentWorldview',ae=n('giantess-calculator-worldviews',()=>{const e=(0,d.ref)((()=>{const e=getVariables({type:'global'}),n=e?.[ee];if(n&&Array.isArray(n)){const e=K.filter(e=>e.builtin).map(e=>e.id),a=n.filter(n=>!e.includes(n.id)),t=n.filter(n=>e.includes(n.id));return[...K.filter(e=>e.builtin).map(e=>{const n=t.find(n=>n.id===e.id);return n?{...e,allowPartialScaling:n.allowPartialScaling,typicalPartOverrides:n.typicalPartOverrides}:e}),...a]}return[...K]})()),n=(0,d.ref)((()=>{const e=getVariables({type:'global'}),n=e?.[ne];return n||'realistic-physics'})()),a=(0,d.computed)(()=>e.value.find(e=>e.id===n.value)||e.value[0]||K[0]);(0,d.watchEffect)(()=>{insertOrAssignVariables({[ee]:t(e.value),[ne]:n.value},{type:'global'})});return{worldviews:e,currentWorldviewId:n,currentWorldview:a,setCurrentWorldview:a=>{e.value.some(e=>e.id===a)&&(n.value=a)},addWorldview:n=>{e.value.push({...n,id:`custom-${Date.now()}`,builtin:!1})},updateWorldview:(n,a)=>{const t=e.value.findIndex(e=>e.id===n);-1!==t&&(e.value[t]={...e.value[t],...a})},removeWorldview:a=>{const t=e.value.find(e=>e.id===a);t&&!t.builtin&&(e.value=e.value.filter(e=>e.id!==a),n.value===a&&(n.value='realistic-physics'))},resetToDefaults:()=>{e.value=[...K],n.value='realistic-physics'},getWorldview:n=>e.value.find(e=>e.id===n)}});let te=null;function ce(e,n=1){return te&&(uninjectPrompts([te]),te=null),te=`giantess-data-${Date.now()}`,injectPrompts([{id:te,role:'system',position:'in_chat',depth:n,content:e,should_scan:!1}]),te}function ie(e,n){const{characters:a,interactionList:t,allDamages:c,settings:i}=n;switch(e.type){case'header':case'footer':return e.content;case'character':return 0===a.length?null:a.map(n=>Q(e.content,n.context)).join('\\n\\n');case'interaction':if(0===t.length||!i.injectInteractionLimits)return null;const n=function(e){const n=[];for(const a of e)if(0!==a.impossible.length){n.push(`### ${a.大者} ↔ ${a.小者}`),n.push('');for(const e of a.impossible)n.push(`- **${e.action}**：${e.reason}`),e.alternative&&n.push(`  - 替代方案：${e.alternative}`);n.push('')}return n.join('\\n')}(t);return Q(e.content,{互动限制列表:n});case'rules':if(0===a.length||!i.showVariableUpdateRules)return null;const o=a[0]?.context||{角色名:'角色名'};return Q(e.content,o);case'worldview':if(!i.injectWorldviewPrompt||0===a.length)return null;const s=a[0]?.context||{};return Q(e.content,s);case'damage':if(!i.enableDamageCalculation||!i.injectDamagePrompt||0===c.length)return null;const r=function(e,n={}){const{showPerCharacter:a=!0,showSummary:t=!0,compact:c=!1}=n,i=[];if(0===e.length)return'';if(a)for(const{name:n,damageData:a}of e)c?(i.push(`## ${n}`),i.push(U(a))):i.push(O(n,a)),i.push('');if(t&&e.length>1){let n=0,a=0,t=0,c=0,o='';const s=new Set;for(const{damageData:i}of e){n+=i.单步损害.小人伤亡.最小估计,a+=i.单步损害.小人伤亡.最大估计,t+=i.单步损害.建筑损毁.最小估计,c+=i.单步损害.建筑损毁.最大估计,(!o||i.破坏力等级>o)&&(o=i.破坏力等级);for(const e of i.特殊效应)s.add(e)}if(i.push('---'),i.push(''),i.push('## 总计损害（所有巨大娘）'),i.push(''),i.push(`- 参与角色数：${e.length}`),i.push(`- 单步总伤亡：${Math.round(n)}-${Math.round(a)}人`),i.push(`- 单步总建筑损毁：${Math.round(t)}-${Math.round(c)}栋`),i.push(`- 最高破坏力等级：${o}`),s.size>0){i.push(''),i.push('**综合物理效应**：');for(const e of s)i.push(`- ${e}`)}}return i.join('\\n')}(c,{showPerCharacter:i.showDamagePerCharacter,showSummary:i.showDamageSummary,compact:i.compactPromptFormat});return r?Q(e.content,{损害数据:r}):null;default:return null}}function oe(e,n,a,t,c='',i=''){const o=`stat_data.${n}.${a}._身高历史`;let s=_.get(e,o)||[];const r=s[s.length-1],l=r?r.身高:null;if(l===t)return;const d={身高:t,身高_格式化:E(t,t>1e10),时间戳:Date.now(),时间点:i||(new Date).toLocaleString(),原因:c,变化:l?t>l?'增大':'缩小':void 0,变化倍率:l?Math.round(t/l*100)/100:void 0};s.push(d);const g=m().settings.maxHistoryRecords;s.length>g&&(s=s.slice(-g)),_.set(e,o,s)}const se=new class{extensions=new Map;enabledSet=new Set;initialized=!1;register(e){if(this.extensions.has(e.id))console.warn(`[ExtensionManager] Extension ${e.id} already registered`);else{this.extensions.set(e.id,e),console.log(`[ExtensionManager] Registered extension: ${e.id}`);try{e.onInit?.()}catch(n){console.error(`[ExtensionManager] Failed to init extension ${e.id}:`,n)}}}get(e){return this.extensions.get(e)}getAll(){return Array.from(this.extensions.values())}getEnabled(){return this.getAll().filter(e=>this.enabledSet.has(e.id))}enable(e){const n=this.extensions.get(e);if(n){if(n.dependencies)for(const a of n.dependencies)if(!this.isEnabled(a))return void console.warn(`[ExtensionManager] Cannot enable ${e}: dependency ${a} not enabled`);if(!this.enabledSet.has(e)){this.enabledSet.add(e),console.log(`[ExtensionManager] Enabled extension: ${e}`);try{n.onEnable?.()}catch(n){console.error(`[ExtensionManager] Failed to enable extension ${e}:`,n),this.enabledSet.delete(e)}}}else console.warn(`[ExtensionManager] Extension ${e} not found`)}disable(e){const n=this.extensions.get(e);if(n){for(const[n,a]of this.extensions)if(a.dependencies?.includes(e)&&this.isEnabled(n))return void console.warn(`[ExtensionManager] Cannot disable ${e}: ${n} depends on it`);if(this.enabledSet.has(e)){this.enabledSet.delete(e),console.log(`[ExtensionManager] Disabled extension: ${e}`);try{n.onDisable?.()}catch(n){console.error(`[ExtensionManager] Failed to disable extension ${e}:`,n)}}}}isEnabled(e){return this.enabledSet.has(e)}toggle(e){return this.isEnabled(e)?(this.disable(e),!1):(this.enable(e),this.isEnabled(e))}triggerCharacterUpdate(e,n){const a={};for(const t of this.getEnabled())if(t.onCharacterUpdate)try{const c=t.onCharacterUpdate(e,n);c&&'object'==typeof c&&Object.assign(a,c)}catch(e){console.error(`[ExtensionManager] Error in ${t.id}.onCharacterUpdate:`,e)}return a}triggerBeforePromptInject(e){let n=e;for(const e of this.getEnabled())if(e.onBeforePromptInject)try{n=e.onBeforePromptInject(n)}catch(n){console.error(`[ExtensionManager] Error in ${e.id}.onBeforePromptInject:`,n)}return n}triggerAfterPromptInject(e){for(const n of this.getEnabled())if(n.onAfterPromptInject)try{n.onAfterPromptInject(e)}catch(e){console.error(`[ExtensionManager] Error in ${n.id}.onAfterPromptInject:`,e)}}collectPromptTemplates(){const e=[];for(const n of this.getEnabled())if(n.getPromptTemplates)try{const a=n.getPromptTemplates();e.push(...a)}catch(e){console.error(`[ExtensionManager] Error in ${n.id}.getPromptTemplates:`,e)}return e}collectSettingsComponents(){const e=new Map;for(const n of this.getEnabled())if(n.getSettingsComponent)try{const a=n.getSettingsComponent();e.set(n.id,a)}catch(e){console.error(`[ExtensionManager] Error in ${n.id}.getSettingsComponent:`,e)}return e}collectCharacterCardExtras(){const e=new Map;for(const n of this.getEnabled())if(n.getCharacterCardExtra)try{const a=n.getCharacterCardExtra();e.set(n.id,a)}catch(e){console.error(`[ExtensionManager] Error in ${n.id}.getCharacterCardExtra:`,e)}return e}collectDebugPanelExtras(){const e=new Map;for(const n of this.getEnabled())if(n.getDebugPanelExtra)try{const a=n.getDebugPanelExtra();e.set(n.id,a)}catch(e){console.error(`[ExtensionManager] Error in ${n.id}.getDebugPanelExtra:`,e)}return e}getEnabledIds(){return Array.from(this.enabledSet)}restoreEnabledIds(e){for(const n of e)this.extensions.has(n)&&this.enable(n)}initDefaults(){if(!this.initialized){this.initialized=!0;for(const e of this.extensions.values())e.defaultEnabled&&this.enable(e.id)}}getExtensionInfo(e){const n=this.extensions.get(e);if(!n)return null;let a=!0;for(const[n,t]of this.extensions)if(t.dependencies?.includes(e)&&this.isEnabled(n)){a=!1;break}return{extension:n,enabled:this.isEnabled(e),canDisable:a}}getAllExtensionInfo(){return this.getAll().map(e=>this.getExtensionInfo(e.id)).filter(Boolean)}},re={id:'damage-calculation',name:'损害计算',description:'计算巨大娘行动可能造成的破坏（伤亡、建筑损毁等）',icon:'fa-solid fa-explosion',defaultEnabled:!1,onInit(){console.log('[DamageExtension] 初始化')},onEnable(){console.log('[DamageExtension] 损害计算已启用')},onDisable(){console.log('[DamageExtension] 损害计算已禁用')},onCharacterUpdate(e,n){if(n.倍率<1)return;const a=m();let t=a.settings.damageScenario;try{const e=getVariables({type:'message',message_id:'latest'}),n=a.settings.variablePrefix,c=_.get(e,`stat_data.${n}._场景`);c?.当前场景&&(t=c.当前场景)}catch{}try{const n=P(e.currentHeight,e.originalHeight,t);return console.log(`[DamageExtension] 已计算 ${e.name} 的损害数据:`,{破坏力等级:n.破坏力等级,场景:t}),{_损害数据:n}}catch(e){return void console.error('[DamageExtension] 计算损害数据失败:',e)}},getPromptTemplates:()=>[{id:'damage-calculation',name:'损害计算',description:'每个角色行动可能造成的破坏数据',enabled:!0,order:25,type:'damage',builtin:!0,requiresFeature:'damageCalculation',content:'---\\n\\n# 破坏力数据\\n\\n{{损害数据}}'},{id:'damage-rules',name:'损害描写指南',description:'指导 AI 如何描写破坏场景',enabled:!1,order:90,type:'footer',builtin:!0,requiresFeature:'damageCalculation',content:'## 破坏描写指南\\n\\n在描写巨大娘造成的破坏时，请注意：\\n\\n1. **规模感**：根据破坏力等级，准确描写破坏范围\\n2. **细节描写**：\\n   - 建筑级：描写建筑如何倒塌、碎片如何飞散\\n   - 城区级：描写整片区域如何被夷平\\n   - 城市级及以上：描写宏观视角的毁灭景象\\n3. **特殊效应**：根据身高等级，描写相应的物理效应（地震、海啸等）\\n4. **伤亡描写**：根据场景和密度，合理描写人员伤亡情况\\n5. **情感基调**：根据世界观设定，调整描写的情感基调'}]};function le(){se.register(re),console.log('[Extensions] 已注册所有内置扩展');try{m().settings.enableDamageCalculation&&se.enable('damage-calculation'),se.initDefaults(),console.log('[Extensions] 扩展系统初始化完成')}catch(e){console.error('[Extensions] 初始化失败:',e)}}function de(e,n){const a=m(),t=ye();if(a.debugLog('📥 收到 MVU 变量更新事件'),a.debugLog('变量快照:',{stat_data:_.get(e,'stat_data'),hasPrefix:!!_.get(e,`stat_data.${a.settings.variablePrefix}`)}),!a.settings.enabled)return void a.debugLog('⏸️ 脚本已禁用，跳过处理');const c=a.settings.variablePrefix,i=_.get(e,`stat_data.${c}`);if(!i)return void a.debugLog(`⚠️ 未找到数据路径: stat_data.${c}`);a.debugLog(`✅ 找到巨大娘数据，角色数: ${Object.keys(i).filter(e=>!e.startsWith('_')).length}`);let o=!1;const s=[];for(const[n,r]of Object.entries(i)){if(n.startsWith('_'))continue;const i=ge(e,c,n,r,a,t);i.updated&&(o=!0),i.characterInfo&&s.push(i.characterInfo)}if(s.length>=2&&a.settings.injectInteractionLimits){const n=function(e){const n={};for(let a=0;a<e.length;a++)for(let t=a+1;t<e.length;t++){const c=L(e[a],e[t]);n[`${c.大者}_${c.小者}`]=c}return n}(s);_.set(e,`stat_data.${c}._互动限制`,n),a.debugLog(`🤝 已计算 ${s.length} 个角色的互动限制`)}if(o&&a.settings.autoInject){!function(e){const n=m(),a=J(),t=ae(),c=a.enabledTemplates;if(0===c.length)return!1;const i=[],o=t.currentWorldview,s=[],r=[];for(const[a,t]of Object.entries(e)){if(a.startsWith('_'))continue;const e=t._计算数据,c=t._损害数据,i=t.原身高||t.原始身高||1.65;if(e){const t=H(a,e,i,{damageData:c,worldview:o,enableDamageCalculation:n.settings.enableDamageCalculation,compactPromptFormat:n.settings.compactPromptFormat});s.push({name:a,context:t,originalHeight:i,damageData:c}),c&&r.push({name:a,damageData:c})}}const l=e._互动限制,d=[];if(l)for(const e of Object.values(l))e.impossible&&e.impossible.length>0&&d.push({大者:e.大者,小者:e.小者,impossible:e.impossible});for(const e of c){const a=ie(e,{characters:s,interactionList:d,allDamages:r,currentWorldview:o,settings:n.settings});a&&i.push(a)}if(0===i.length)return!1;const g=n.settings.compactPromptFormat?'\\n':'\\n\\n';ce(i.join(g),n.settings.injectDepth),n.log('已注入提示词')}(_.get(e,`stat_data.${c}`)),a.debugLog('💉 已注入提示词')}a.debugLog('✨ 变量更新处理完成',{更新数:o?'有更新':'无更新',角色总数:s.length})}function ge(e,n,a,t,c,i){const o=t.当前身高||t.身高,s=t.原身高||t.原始身高||1.65,r=t._计算数据,l=t.变化原因||'',d=t.变化时间||'',g=t.自定义部位||{};if(!o||!function(e,n){const a=e.当前身高||e.身高;if(!a)return!1;if(!n)return!0;if(n.当前身高!==a)return!0;const t=e.自定义部位||{},c=n.自定义部位||{};return JSON.stringify(t)!==JSON.stringify(c)}(t,r))return o?{updated:!1,characterInfo:{name:a,height:o}}:{updated:!1,characterInfo:null};c.debugLog(`🔄 检测到 ${a} 数据变化:`,{新身高:o,原身高:s,旧计算数据:r?'有':'无',变化原因:l||'未指定',变化时间:d||'未指定',自定义部位:Object.keys(g).length>0?g:'无'}),oe(e,n,a,o,l,d),c.debugLog('📝 已记录身高历史');const A=o/s>=1?N(o,s,g):D(o,s);_.set(e,`stat_data.${n}.${a}._计算数据`,A),c.debugLog(`📊 已计算 ${a} 的数据:`,{级别:A.级别,倍率:A.倍率,当前身高_格式化:A.当前身高_格式化});const p={name:a,currentHeight:o,originalHeight:s,changeReason:l,changeTime:d,calcData:A,history:[]},m=se.triggerCharacterUpdate(p,A);if(Object.keys(m).length>0)for(const[t,i]of Object.entries(m))_.set(e,`stat_data.${n}.${a}.${t}`,i),c.debugLog(`🔌 扩展数据已写入: ${t}`);const C=_.get(e,`stat_data.${n}.${a}._损害数据`);return i.setCharacter(a,{...p,damageData:C}),c.debugLog('👤 已更新角色 Store'),{updated:!0,characterInfo:{name:a,height:o}}}function Ae(e,n,a,t){const c=n._计算数据,i=n._损害数据,o=n._实际损害,s=n._身高历史,r=n.当前身高||n.身高,l=n.原身高||n.原始身高||1.65,d=r?r/l:void 0;return{name:e,当前身高:r,当前身高_格式化:c?.当前身高_格式化,原身高:l,倍率:c?.倍率,级别:c?.级别,类型:void 0===d?'未知':d>=1?'巨大娘':'小人',有计算数据:!!c,有损害数据:!!i,有实际损害:!!o,有身高历史:!!s&&s.length>0,历史记录数:s?.length,自定义部位:n.自定义部位,预估损害:i?{破坏力等级:i.破坏力等级,单步伤亡:i.单步损害.小人伤亡.格式化,场景:t?.当前场景||a}:void 0,实际损害:o?{总伤亡人数:o.总伤亡人数,总伤亡人数_格式化:o.总伤亡人数?(g=o.总伤亡人数,(g>=1e8?`${(g/1e8).toFixed(1)}亿`:g>=1e4?`${(g/1e4).toFixed(1)}万`:g>=1e3?`${(g/1e3).toFixed(1)}千`:Math.round(g).toString())+'人'):void 0,总建筑损毁:o.总建筑损毁,最近行动:o.最近行动?.描述,重大事件数:o.重大事件?.length}:void 0};var g}function pe(){const e=m(),n=ae(),a=e.settings.variablePrefix;try{const t=getVariables({type:'message',message_id:'latest'}),c=getVariables({type:'script',script_id:getScriptId()}),i=_.get(t,`stat_data.${a}`),o=_.get(t,`stat_data.${a}._场景`),s=_.get(t,`stat_data.${a}._互动限制`),r=[];if(i)for(const[n,a]of Object.entries(i))n.startsWith('_')||r.push(Ae(n,a,e.settings.damageScenario,o));const l=o?.当前场景||e.settings.damageScenario,d=o?.当前场景?'MVU变量':'默认设置';return{mvuAvailable:'undefined'!=typeof Mvu,mvuVersion:'undefined'!=typeof Mvu?Mvu.version??null:null,prefix:a,settings:{enabled:e.settings.enabled,autoInject:e.settings.autoInject,enableDamageCalculation:e.settings.enableDamageCalculation,damageScenario:e.settings.damageScenario,injectWorldviewPrompt:e.settings.injectWorldviewPrompt},scenario:{current:l,source:d,reason:o?.场景原因},worldview:{id:n.currentWorldviewId,name:n.currentWorldview.name},messageVariables:{hasStatData:!!_.get(t,'stat_data'),hasGiantessData:!!i,hasScenarioData:!!o,hasInteractionData:!!s,giantessCharacters:r.map(e=>e.name),characterDetails:r,rawData:i},scriptVariables:c,timestamp:(new Date).toISOString()}}catch(t){return{error:String(t),mvuAvailable:'undefined'!=typeof Mvu,mvuVersion:null,prefix:a,settings:{enabled:e.settings.enabled,autoInject:e.settings.autoInject,enableDamageCalculation:e.settings.enableDamageCalculation,damageScenario:e.settings.damageScenario,injectWorldviewPrompt:e.settings.injectWorldviewPrompt},scenario:{current:e.settings.damageScenario,source:'默认设置'},worldview:{id:n.currentWorldviewId,name:n.currentWorldview.name},messageVariables:{hasStatData:!1,hasGiantessData:!1,hasScenarioData:!1,hasInteractionData:!1,giantessCharacters:[],characterDetails:[],rawData:null},scriptVariables:null,timestamp:(new Date).toISOString()}}}function me(e,n,a=1.65){const t=m(),c=ye(),i=t.settings.variablePrefix,o=n/a,s=o<1;t.debugLog(`🧪 注入测试数据: ${e}`,{height:n,originalHeight:a,scale:o.toFixed(4),type:s?'小人':'巨大娘'});try{const o=getVariables({type:'message',message_id:'latest'});_.set(o,`stat_data.${i}.${e}.当前身高`,n),_.set(o,`stat_data.${i}.${e}.原身高`,a),_.set(o,`stat_data.${i}.${e}.变化原因`,`调试测试(${s?'小人':'巨大娘'})`),_.set(o,`stat_data.${i}.${e}.变化时间`,(new Date).toLocaleString());const r=s?D(n,a):N(n,a);if(_.set(o,`stat_data.${i}.${e}._计算数据`,r),t.debugLog(`📊 已计算 ${e} 的数据:`,{级别:r.级别,倍率:r.倍率,当前身高_格式化:r.当前身高_格式化}),t.settings.enableDamageCalculation&&!s){const c=_.get(o,`stat_data.${i}._场景`),s=c?.当前场景||t.settings.damageScenario,r=P(n,a,s);_.set(o,`stat_data.${i}.${e}._损害数据`,r),t.debugLog(`💥 已计算 ${e} 的损害数据:`,{破坏力等级:r.破坏力等级,单步伤亡:r.单步损害.小人伤亡.格式化,场景:s})}return oe(o,i,e,n,`调试测试(${s?'小人':'巨大娘'})`,(new Date).toLocaleString()),t.debugLog('📝 已记录身高历史'),insertOrAssignVariables(o,{type:'message',message_id:'latest'}),c.setCharacter(e,{name:e,currentHeight:n,originalHeight:a,changeReason:`调试测试(${s?'小人':'巨大娘'})`,changeTime:(new Date).toLocaleString(),calcData:r,damageData:_.get(o,`stat_data.${i}.${e}._损害数据`),history:[]}),t.debugLog('👤 已更新角色 Store'),t.debugLog('✅ 测试数据已注入并计算完成'),{success:!0,data:_.get(o,`stat_data.${i}.${e}`),isTiny:s}}catch(e){return t.debugError('❌ 注入测试数据失败:',e),{success:!1,error:String(e)}}}function Ce(e){const n=m(),a=ye(),t=n.settings.variablePrefix;n.debugLog('🗑️ 清除测试数据'+(e?`: ${e}`:' (全部)'));try{const c={type:'message',message_id:'latest'};if(e){deleteVariable(`stat_data.${t}.${e}`,c).delete_occurred?n.debugLog(`✅ 已清除角色: ${e}`):n.debugLog(`⚠️ 角色不存在: ${e}`),a.removeCharacter(e)}else{deleteVariable(`stat_data.${t}`,c).delete_occurred?n.debugLog('✅ 已清除所有巨大娘数据'):n.debugLog('⚠️ 无数据需要清除'),a.clear()}return{success:!0}}catch(e){return n.debugError('❌ 清除测试数据失败:',e),{success:!1,error:String(e)}}}const ue='HerSophia',ve='ST-GTS-Calculator';function be(e){return e?`https://github.com/${ue}/${ve}/releases/tag/${e}`:`https://github.com/${ue}/${ve}/releases/latest`}function fe(e){return e.replace(/^v/,'')}function he(e){if(!e)return[];const n=e.split('\\n'),a=[];for(const e of n){const n=e.trim();(n.startsWith('- ')||n.startsWith('* '))&&a.push(n.slice(2))}return a}async function xe(){try{const e=await fetch(`https://api.github.com/repos/${ue}/${ve}/releases/latest`,{headers:{Accept:'application/vnd.github.v3+json','User-Agent':'ST-GTS-Calculator-Updater'}});return e.ok?await e.json():(console.warn(`[GTS-Updater] GitHub API 返回错误: ${e.status}`),null)}catch(e){return console.warn('[GTS-Updater] 无法连接到 GitHub API:',e),null}}async function Be(){const e=fe(r),n=Date.now();try{const a=await xe();if(!a)return{hasUpdate:!1,currentVersion:e,latestVersion:e,checkedAt:n};const t=fe(a.tag_name),i=c(t,e,'>'),o=a.assets.find(e=>e.name.endsWith('.json')&&e.name.includes('GTS-Calculator'));return{hasUpdate:i,currentVersion:e,latestVersion:t,releaseDate:a.published_at,downloadUrl:o?.browser_download_url,releasePageUrl:be(a.tag_name),changelog:he(a.body),checkedAt:n}}catch(a){return console.error('[GTS-Updater] 检查更新失败:',a),{hasUpdate:!1,currentVersion:e,latestVersion:e,checkedAt:n}}}const Ee='giantessCalc_updater';const ke=n('giantess-characters-base',()=>{const e=(0,d.ref)(new Map);return{characters:e,setCharacter:(n,a)=>{e.value.set(n,a)},getCharacter:n=>e.value.get(n),removeCharacter:n=>{e.value.delete(n)},clear:()=>{e.value.clear()},getCharacterNames:()=>Array.from(e.value.keys()),getAllCharacters:()=>Array.from(e.value.values()),updateCharacter:(n,a)=>{const t=e.value.get(n);t&&e.value.set(n,{...t,...a})},addHistory:(n,a,t=20)=>{const c=e.value.get(n);if(c){const i=[...c.history||[],a];i.length>t&&i.splice(0,i.length-t),e.value.set(n,{...c,history:i})}},getAllCharacterInfo:()=>Array.from(e.value.values()).map(e=>({name:e.name,height:e.currentHeight,calcData:e.calcData,damageData:e.damageData})),getDamageSummary:(n='大城市')=>{let a=0,t=0,c=0,i=0,o=0,s=0;for(const[,n]of e.value){n.damageData&&(a+=n.damageData.单步损害.小人伤亡.最小估计,t+=n.damageData.单步损害.小人伤亡.最大估计,c+=n.damageData.单步损害.建筑损毁.最小估计,i+=n.damageData.单步损害.建筑损毁.最大估计);const e=n.currentHeight/n.originalHeight;e>1?o++:e<1&&s++}return{giantCount:o,tinyCount:s,totalCasualties:{min:a,max:t},totalBuildings:{min:c,max:i},scenario:n}}}}),ye=n('giantess-characters',()=>{const e=ke(),n=m();return{characters:e.characters,setCharacter:e.setCharacter,getCharacter:e.getCharacter,removeCharacter:e.removeCharacter,clear:e.clear,getCharacterNames:e.getCharacterNames,getAllCharacters:e.getAllCharacters,updateCharacter:e.updateCharacter,addHistory:e.addHistory,getAllCharacterInfo:e.getAllCharacterInfo,getDamageSummary:e.getDamageSummary,addCharacter:(a,t,c,i,o,s,r)=>{const l=function(e,n,a={}){const t=e/n,c=R(t);if('normal'===c)return{type:c,scale:t,calcData:null,damageData:null};const i=G(e,n,a.customParts);let o=null;return a.enableDamage&&'giant'===c&&(o=P(e,n,a.damageScenario||'大城市')),{type:c,scale:t,calcData:i,damageData:o}}(t,c,{customParts:s,enableDamage:n.settings.enableDamageCalculation,damageScenario:n.settings.damageScenario}),d=e.getCharacter(a),g=d?.history||[],A={height:t,heightFormatted:E(t,t>1e10),time:o||(new Date).toLocaleString(),reason:i||''};g.push(A);const p=n.settings.maxHistoryRecords;g.length>p&&g.splice(0,g.length-p);const m=r||d?.actualDamage;e.setCharacter(a,{name:a,currentHeight:t,originalHeight:c,changeReason:i,changeTime:o,calcData:l.calcData||void 0,damageData:l.damageData||void 0,actualDamage:m,history:g})},refresh:()=>{const e=function(e){const n=m(),a=ye();try{const t=getVariables({type:'message',message_id:'latest'}),c=_.get(t,`stat_data.${e}`);if(!c)return n.debugLog('未找到巨大娘数据（楼层变量）'),0;let i=0;for(const[e,t]of Object.entries(c)){if(e.startsWith('_'))continue;if('object'!=typeof t||null===t)continue;const c=t,o=c.当前身高||c.身高,s=c.原身高||c.原始身高||1.65;if(o&&o>0){const t=o/s,r=t>=1?N(o,s,c.自定义部位):D(o,s);let l;n.settings.enableDamageCalculation&&t>=1&&(l=P(o,s,n.settings.damageScenario)),a.setCharacter(e,{name:e,currentHeight:o,originalHeight:s,changeReason:c.变化原因,changeTime:c.变化时间,calcData:r,damageData:l,actualDamage:c._实际损害,history:[]}),i++}}return n.debugLog(`已刷新 ${i} 个角色数据`),i}catch(e){return n.debugError('刷新角色数据失败:',e),0}}(n.settings.variablePrefix);e>0&&n.log('已刷新角色数据，共',e,'个角色')},recalculateDamage:a=>{const t=a||n.settings.damageScenario;for(const[n,a]of e.characters){const c=q(a.currentHeight,a.originalHeight,t);c&&e.updateCharacter(n,{damageData:c})}}}}),we=['checked'],Ve=(0,d.defineComponent)({__name:'GcSwitch',props:{modelValue:{type:Boolean},size:{}},emits:['update:modelValue'],setup:e=>(n,a)=>((0,d.openBlock)(),(0,d.createElementBlock)('input',{type:'checkbox',class:(0,d.normalizeClass)(['gc-switch',{sm:'sm'===e.size}]),checked:e.modelValue,onChange:a[0]||(a[0]=e=>n.$emit('update:modelValue',e.target.checked))},null,42,we))});s(601);var Ne=s(946);const De=(0,Ne.A)(Ve,[['__scopeId','data-v-03ff4c3e']]),Fe=['type','value','placeholder','readonly'],Se=['value','placeholder','readonly','rows'],ze={key:2,class:'gc-input-suffix'};Boolean;s(907);const $e=['disabled'],_e=(0,d.defineComponent)({__name:'GcButton',props:{variant:{},size:{},icon:{},active:{type:Boolean},disabled:{type:Boolean}},emits:['click'],setup:e=>(n,a)=>((0,d.openBlock)(),(0,d.createElementBlock)('button',{class:(0,d.normalizeClass)(['gc-btn',[e.variant&&`gc-btn-${e.variant}`,e.size&&`gc-btn-${e.size}`,{active:e.active,disabled:e.disabled}]]),disabled:e.disabled,onClick:a[0]||(a[0]=e=>n.$emit('click',e))},[e.icon?((0,d.openBlock)(),(0,d.createElementBlock)('i',{key:0,class:(0,d.normalizeClass)(e.icon)},null,2)):(0,d.createCommentVNode)('v-if',!0),(0,d.renderSlot)(n.$slots,'default')],10,$e))});s(566);const Te=(0,Ne.A)(_e,[['__scopeId','data-v-7bc235a6']]),je={class:'gc-overlay-header'},Ie={class:'gc-header-actions-inner'},We={class:'gc-overlay-content'},Ye=(0,d.defineComponent)({__name:'GcOverlay',props:{visible:{type:Boolean},title:{},icon:{},panelClass:{}},emits:['close'],setup:e=>(n,a)=>e.visible?((0,d.openBlock)(),(0,d.createElementBlock)('div',{key:0,class:(0,d.normalizeClass)(['gc-overlay-panel',e.panelClass])},[(0,d.createElementVNode)('div',je,[(0,d.createElementVNode)('span',null,[e.icon?((0,d.openBlock)(),(0,d.createElementBlock)('i',{key:0,class:(0,d.normalizeClass)(e.icon)},null,2)):(0,d.createCommentVNode)('v-if',!0),(0,d.createTextVNode)(' '+(0,d.toDisplayString)(e.title),1)]),(0,d.createElementVNode)('div',Ie,[(0,d.renderSlot)(n.$slots,'header-actions'),(0,d.createElementVNode)('button',{class:'gc-close-btn',onClick:a[0]||(a[0]=e=>n.$emit('close'))},[...a[1]||(a[1]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-xmark'},null,-1)])])])]),(0,d.createElementVNode)('div',We,[(0,d.renderSlot)(n.$slots,'default')])],2)):(0,d.createCommentVNode)('v-if',!0)});s(844);const Me=(0,Ne.A)(Ye,[['__scopeId','data-v-01d31954']]);s(690);const Pe=(0,d.defineComponent)({__name:'GcBadge',props:{variant:{},size:{}},setup:e=>(n,a)=>((0,d.openBlock)(),(0,d.createElementBlock)('span',{class:(0,d.normalizeClass)(['gc-badge',[e.variant,e.size]])},[(0,d.renderSlot)(n.$slots,'default')],2))});s(339);const Oe=(0,Ne.A)(Pe,[['__scopeId','data-v-8712d0e8']]);const Ue={autoCheck:!0,checkInterval:864e5,lastCheckTime:0,ignoredVersion:void 0},Re='giantessCalc_updater';function Ge(e){try{localStorage.setItem(Re,JSON.stringify(e))}catch(e){console.warn('[GTS-Updater] 保存设置失败:',e)}}function qe(){const e=(0,d.ref)(function(){try{const e=localStorage.getItem(Re);if(e)return{...Ue,...JSON.parse(e)}}catch(e){console.warn('[GTS-Updater] 加载设置失败:',e)}return{...Ue}}()),n=(0,d.ref)(!1),a=(0,d.ref)(null),t=(0,d.ref)(null),c=(0,d.computed)(()=>!!a.value&&(e.value.ignoredVersion!==a.value.latestVersion&&a.value.hasUpdate)),i=(0,d.computed)(()=>r),o=(0,d.computed)(()=>a.value?.latestVersion||r),s=(0,d.computed)(()=>a.value?.downloadUrl),l=(0,d.computed)(()=>a.value?.releasePageUrl||be()),g=(0,d.computed)(()=>a.value?.changelog||[]),A=(0,d.computed)(()=>{if(!a.value?.releaseDate)return'';try{return new Date(a.value.releaseDate).toLocaleDateString('zh-CN')}catch{return a.value.releaseDate}});async function p(){if(n.value)return null;n.value=!0,t.value=null;try{const n=await Be();return a.value=n,e.value.lastCheckTime=Date.now(),Ge(e.value),n}catch(e){return t.value=e instanceof Error?e.message:'检查更新失败',console.error('[GTS-Updater] 检查更新失败:',e),null}finally{n.value=!1}}return{settings:(0,d.readonly)(e),checking:(0,d.readonly)(n),result:(0,d.readonly)(a),error:(0,d.readonly)(t),hasUpdate:c,currentVersion:i,latestVersion:o,downloadUrl:s,releasePageUrl:l,changelog:g,releaseDate:A,check:p,autoCheckIfNeeded:async function(){e.value.autoCheck&&Date.now()-e.value.lastCheckTime>=e.value.checkInterval&&await p()},ignoreCurrentUpdate:function(){a.value?.latestVersion&&(e.value.ignoredVersion=a.value.latestVersion,Ge(e.value))},clearIgnoredVersion:function(){e.value.ignoredVersion=void 0,Ge(e.value)},openDownloadPage:function(){const e=s.value||l.value;window.open(e,'_blank')},openReleasePage:function(){window.open(l.value,'_blank')},toggleAutoCheck:function(n){e.value.autoCheck=n??!e.value.autoCheck,Ge(e.value)}}}const Le={class:'gc-settings-list'},Qe={class:'gc-settings-section'},He={class:'gc-version-info'},Ze={class:'gc-version-current'},Xe={class:'gc-version-number'},Je={key:0,class:'gc-update-available'},Ke={class:'gc-update-badge'},en={key:0,class:'gc-update-date'},nn={class:'gc-update-actions'},an={class:'gc-update-check'},tn=['disabled'],cn={key:0,class:'gc-update-last-check'},on={class:'gc-setting-toggle'},sn={class:'gc-settings-section'},rn={class:'gc-setting-item'},ln=['value'],dn={class:'gc-setting-item'},gn={class:'gc-input-spinner'},An=['value'],pn={class:'gc-settings-section'},mn={class:'gc-setting-toggle'},Cn={class:'gc-setting-toggle'},un={class:'gc-setting-toggle'},vn={class:'gc-setting-toggle'},bn={class:'gc-settings-section'},fn={class:'gc-setting-toggle'},hn=(0,d.defineComponent)({__name:'SettingsPanel',props:{visible:{type:Boolean},settings:{}},emits:['close','update:setting'],setup(e,{emit:n}){const a=e,t=n,{checking:c,hasUpdate:i,currentVersion:o,latestVersion:s,releaseDate:r,settings:l,check:g,openDownloadPage:A,openReleasePage:p,ignoreCurrentUpdate:m,toggleAutoCheck:C}=qe(),u=(0,d.computed)(()=>l.value.autoCheck),v=(0,d.computed)(()=>l.value.lastCheckTime),b=(0,d.computed)(()=>{if(!v.value)return'';const e=new Date(v.value),n=(new Date).getTime()-e.getTime();return n<6e4?'刚刚':n<36e5?`${Math.floor(n/6e4)} 分钟前`:n<864e5?`${Math.floor(n/36e5)} 小时前`:e.toLocaleDateString('zh-CN')}),f=(e,n)=>{t('update:setting',e,n)},h=()=>{a.settings.injectDepth>0&&f('injectDepth',a.settings.injectDepth-1)},x=()=>{a.settings.injectDepth<10&&f('injectDepth',a.settings.injectDepth+1)};return(n,a)=>((0,d.openBlock)(),(0,d.createBlock)((0,d.unref)(Me),{visible:e.visible,title:'设置',icon:'fa-solid fa-gear',onClose:a[10]||(a[10]=e=>n.$emit('close'))},{default:(0,d.withCtx)(()=>[(0,d.createElementVNode)('div',Le,[(0,d.createCommentVNode)(' 版本与更新 '),(0,d.createElementVNode)('div',Qe,[a[18]||(a[18]=(0,d.createElementVNode)('div',{class:'gc-settings-section-title'},[(0,d.createElementVNode)('i',{class:'fa-solid fa-info-circle'}),(0,d.createElementVNode)('span',null,'版本信息')],-1)),(0,d.createElementVNode)('div',He,[(0,d.createElementVNode)('div',Ze,[a[11]||(a[11]=(0,d.createElementVNode)('span',{class:'gc-version-label'},'当前版本',-1)),(0,d.createElementVNode)('span',Xe,'v'+(0,d.toDisplayString)((0,d.unref)(o)),1)]),(0,d.createCommentVNode)(' 更新检查结果 '),(0,d.unref)(i)?((0,d.openBlock)(),(0,d.createElementBlock)('div',Je,[(0,d.createElementVNode)('div',Ke,[a[13]||(a[13]=(0,d.createElementVNode)('i',{class:'fa-solid fa-gift'},null,-1)),(0,d.createElementVNode)('span',null,[a[12]||(a[12]=(0,d.createTextVNode)('发现新版本 ',-1)),(0,d.createElementVNode)('strong',null,'v'+(0,d.toDisplayString)((0,d.unref)(s)),1)]),(0,d.unref)(r)?((0,d.openBlock)(),(0,d.createElementBlock)('span',en,'('+(0,d.toDisplayString)((0,d.unref)(r))+')',1)):(0,d.createCommentVNode)('v-if',!0)]),(0,d.createElementVNode)('div',nn,[(0,d.createElementVNode)('button',{class:'gc-btn gc-btn-primary gc-btn-sm',onClick:a[0]||(a[0]=(...e)=>(0,d.unref)(A)&&(0,d.unref)(A)(...e))},[...a[14]||(a[14]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-download'},null,-1),(0,d.createElementVNode)('span',null,'下载更新',-1)])]),(0,d.createElementVNode)('button',{class:'gc-btn gc-btn-ghost gc-btn-sm',onClick:a[1]||(a[1]=(...e)=>(0,d.unref)(p)&&(0,d.unref)(p)(...e))},[...a[15]||(a[15]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-external-link'},null,-1)])]),(0,d.createElementVNode)('button',{class:'gc-btn gc-btn-ghost gc-btn-sm',onClick:a[2]||(a[2]=(...e)=>(0,d.unref)(m)&&(0,d.unref)(m)(...e)),title:'忽略此版本'},[...a[16]||(a[16]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-xmark'},null,-1)])])])])):(0,d.createCommentVNode)('v-if',!0),(0,d.createCommentVNode)(' 检查更新按钮 '),(0,d.createElementVNode)('div',an,[(0,d.createElementVNode)('button',{class:'gc-btn gc-btn-secondary gc-btn-sm',onClick:a[3]||(a[3]=(...e)=>(0,d.unref)(g)&&(0,d.unref)(g)(...e)),disabled:(0,d.unref)(c)},[(0,d.createElementVNode)('i',{class:(0,d.normalizeClass)((0,d.unref)(c)?'fa-solid fa-spinner fa-spin':'fa-solid fa-rotate')},null,2),(0,d.createElementVNode)('span',null,(0,d.toDisplayString)((0,d.unref)(c)?'检查中...':'检查更新'),1)],8,tn),(0,d.unref)(v)?((0,d.openBlock)(),(0,d.createElementBlock)('span',cn,' 上次检查: '+(0,d.toDisplayString)((0,d.unref)(b)),1)):(0,d.createCommentVNode)('v-if',!0)])]),(0,d.createElementVNode)('div',on,[a[17]||(a[17]=(0,d.createElementVNode)('label',null,[(0,d.createElementVNode)('span',null,'自动检查更新'),(0,d.createElementVNode)('small',null,'启动时自动检查是否有新版本')],-1)),(0,d.createVNode)((0,d.unref)(De),{'model-value':(0,d.unref)(u),'onUpdate:modelValue':(0,d.unref)(C)},null,8,['model-value','onUpdate:modelValue'])])]),a[29]||(a[29]=(0,d.createElementVNode)('div',{class:'gc-settings-divider'},null,-1)),(0,d.createCommentVNode)(' 基本设置 '),(0,d.createElementVNode)('div',sn,[a[21]||(a[21]=(0,d.createElementVNode)('div',{class:'gc-settings-section-title'},[(0,d.createElementVNode)('i',{class:'fa-solid fa-sliders'}),(0,d.createElementVNode)('span',null,'基本设置')],-1)),(0,d.createElementVNode)('div',rn,[a[19]||(a[19]=(0,d.createElementVNode)('label',null,'变量前缀',-1)),(0,d.createElementVNode)('input',{value:e.settings.variablePrefix,onInput:a[4]||(a[4]=e=>f('variablePrefix',e.target.value)),type:'text',class:'gc-input sm',placeholder:'巨大娘'},null,40,ln)]),(0,d.createElementVNode)('div',dn,[a[20]||(a[20]=(0,d.createElementVNode)('label',null,'注入深度',-1)),(0,d.createElementVNode)('div',gn,[(0,d.createElementVNode)('button',{onClick:h},'-'),(0,d.createElementVNode)('input',{value:e.settings.injectDepth,type:'number',readonly:''},null,8,An),(0,d.createElementVNode)('button',{onClick:x},'+')])])]),a[30]||(a[30]=(0,d.createElementVNode)('div',{class:'gc-settings-divider'},null,-1)),(0,d.createCommentVNode)(' 提示词设置 '),(0,d.createElementVNode)('div',pn,[a[26]||(a[26]=(0,d.createElementVNode)('div',{class:'gc-settings-section-title'},[(0,d.createElementVNode)('i',{class:'fa-solid fa-file-lines'}),(0,d.createElementVNode)('span',null,'提示词设置')],-1)),(0,d.createElementVNode)('div',mn,[a[22]||(a[22]=(0,d.createElementVNode)('label',null,[(0,d.createElementVNode)('span',null,'自动注入提示词'),(0,d.createElementVNode)('small',null,'数据变化时自动更新 Prompt')],-1)),(0,d.createVNode)((0,d.unref)(De),{'model-value':e.settings.autoInject,'onUpdate:modelValue':a[5]||(a[5]=e=>f('autoInject',e))},null,8,['model-value'])]),(0,d.createElementVNode)('div',Cn,[a[23]||(a[23]=(0,d.createElementVNode)('label',null,[(0,d.createElementVNode)('span',null,'注入互动限制'),(0,d.createElementVNode)('small',null,'检查物理上不可能的互动')],-1)),(0,d.createVNode)((0,d.unref)(De),{'model-value':e.settings.injectInteractionLimits,'onUpdate:modelValue':a[6]||(a[6]=e=>f('injectInteractionLimits',e))},null,8,['model-value'])]),(0,d.createElementVNode)('div',un,[a[24]||(a[24]=(0,d.createElementVNode)('label',null,[(0,d.createElementVNode)('span',null,'显示变量更新规则'),(0,d.createElementVNode)('small',null,'指导 AI 如何更新身高变量')],-1)),(0,d.createVNode)((0,d.unref)(De),{'model-value':e.settings.showVariableUpdateRules,'onUpdate:modelValue':a[7]||(a[7]=e=>f('showVariableUpdateRules',e))},null,8,['model-value'])]),(0,d.createElementVNode)('div',vn,[a[25]||(a[25]=(0,d.createElementVNode)('label',null,[(0,d.createElementVNode)('span',null,'紧凑提示词格式'),(0,d.createElementVNode)('small',null,'减少提示词中的空行')],-1)),(0,d.createVNode)((0,d.unref)(De),{'model-value':e.settings.compactPromptFormat,'onUpdate:modelValue':a[8]||(a[8]=e=>f('compactPromptFormat',e))},null,8,['model-value'])])]),a[31]||(a[31]=(0,d.createElementVNode)('div',{class:'gc-settings-divider'},null,-1)),(0,d.createCommentVNode)(' 开发者选项 '),(0,d.createElementVNode)('div',bn,[a[28]||(a[28]=(0,d.createElementVNode)('div',{class:'gc-settings-section-title'},[(0,d.createElementVNode)('i',{class:'fa-solid fa-code'}),(0,d.createElementVNode)('span',null,'开发者选项')],-1)),(0,d.createElementVNode)('div',fn,[a[27]||(a[27]=(0,d.createElementVNode)('label',null,[(0,d.createElementVNode)('span',null,'调试模式'),(0,d.createElementVNode)('small',null,'在控制台输出详细日志')],-1)),(0,d.createVNode)((0,d.unref)(De),{'model-value':e.settings.debug,'onUpdate:modelValue':a[9]||(a[9]=e=>f('debug',e))},null,8,['model-value'])])])])]),_:1},8,['visible']))}});s(991);const xn=(0,Ne.A)(hn,[['__scopeId','data-v-1958e7c2']]),Bn={class:'gc-help-content'},En={class:'gc-help-section'},kn={class:'gc-changelog'},yn=(0,d.defineComponent)({__name:'HelpPanel',props:{visible:{type:Boolean},version:{},changelog:{}},emits:['close'],setup:e=>(n,a)=>((0,d.openBlock)(),(0,d.createBlock)((0,d.unref)(Me),{visible:e.visible,title:'帮助',icon:'fa-regular fa-circle-question',onClose:a[0]||(a[0]=e=>n.$emit('close'))},{default:(0,d.withCtx)(()=>[(0,d.createElementVNode)('div',Bn,[a[2]||(a[2]=(0,d.createElementVNode)('div',{class:'gc-help-section'},[(0,d.createElementVNode)('h3',null,[(0,d.createElementVNode)('i',{class:'fa-solid fa-rocket'}),(0,d.createTextVNode)(' 快速开始')]),(0,d.createElementVNode)('p',null,'在世界书或提示词中使用 MVU 命令：'),(0,d.createElementVNode)('div',{class:'gc-code-block'},[(0,d.createTextVNode)(' _.set(\\'巨大娘.络络.当前身高\\', 170)'),(0,d.createElementVNode)('br'),(0,d.createTextVNode)(' _.set(\\'巨大娘.络络.原身高\\', 1.65) ')])],-1)),(0,d.createElementVNode)('div',En,[a[1]||(a[1]=(0,d.createElementVNode)('h3',null,[(0,d.createElementVNode)('i',{class:'fa-solid fa-code-branch'}),(0,d.createTextVNode)(' 版本信息')],-1)),(0,d.createElementVNode)('p',null,'当前版本: v'+(0,d.toDisplayString)(e.version),1),(0,d.createElementVNode)('div',kn,[((0,d.openBlock)(!0),(0,d.createElementBlock)(d.Fragment,null,(0,d.renderList)(e.changelog.slice(0,3),e=>((0,d.openBlock)(),(0,d.createElementBlock)('div',{key:e.version,class:'gc-ver-item'},[(0,d.createElementVNode)('strong',null,'v'+(0,d.toDisplayString)(e.version),1),(0,d.createTextVNode)(' - '+(0,d.toDisplayString)(e.date)+' ',1),(0,d.createElementVNode)('ul',null,[((0,d.openBlock)(!0),(0,d.createElementBlock)(d.Fragment,null,(0,d.renderList)(e.changes,(e,n)=>((0,d.openBlock)(),(0,d.createElementBlock)('li',{key:n},(0,d.toDisplayString)(e),1))),128))])]))),128))])]),a[3]||(a[3]=(0,d.createElementVNode)('div',{class:'gc-help-section'},[(0,d.createElementVNode)('h3',null,[(0,d.createElementVNode)('i',{class:'fa-solid fa-book'}),(0,d.createTextVNode)(' 更多帮助')]),(0,d.createElementVNode)('p',null,'查看项目文档了解更多用法：'),(0,d.createElementVNode)('ul',{class:'gc-help-links'},[(0,d.createElementVNode)('li',null,'MVU 变量结构'),(0,d.createElementVNode)('li',null,'提示词模板系统'),(0,d.createElementVNode)('li',null,'世界观模板系统'),(0,d.createElementVNode)('li',null,'损害计算功能')])],-1))])]),_:1},8,['visible']))});s(766);const wn=(0,Ne.A)(yn,[['__scopeId','data-v-2ca1928e']]),Vn={class:'gc-worldview-content'},Nn={class:'gc-worldview-selector'},Dn={class:'gc-worldview-current'},Fn={class:'gc-worldview-current-info'},Sn={class:'gc-worldview-name'},zn={class:'gc-worldview-desc'},$n={class:'gc-worldview-list'},_n=['onClick'],Tn={class:'gc-worldview-item-info'},jn={class:'gc-worldview-item-name'},In={key:0,class:'fa-solid fa-check gc-worldview-check'},Wn={key:0,class:'gc-worldview-details'},Yn={class:'gc-worldview-section'},Mn={class:'gc-worldview-text'},Pn={class:'gc-worldview-section'},On={class:'gc-worldview-text'},Un={key:0,class:'gc-worldview-section'},Rn={class:'gc-worldview-list-items'},Gn={key:1,class:'gc-worldview-section'},qn={class:'gc-worldview-list-items'},Ln={key:2,class:'gc-worldview-section'},Qn={class:'gc-worldview-list-items'},Hn={class:'gc-worldview-section gc-worldview-options'},Zn={class:'gc-setting-toggle'},Xn={class:'gc-setting-toggle'},Jn={key:3,class:'gc-worldview-actions'},Kn={class:'gc-worldview-editor'},ea={class:'gc-editor-header'},na={class:'gc-editor-title'},aa={class:'gc-editor-form'},ta={class:'gc-setting-item'},ca={class:'gc-setting-item'},ia={class:'gc-setting-item'},oa={class:'gc-setting-item'},sa={class:'gc-setting-item'},ra={class:'gc-editor-actions'},la=(0,d.defineComponent)({__name:'WorldviewPanel',props:{visible:{type:Boolean},worldviews:{},currentWorldviewId:{},currentWorldview:{},settings:{}},emits:['close','reset','select','create','update','delete','update:setting'],setup(e,{emit:n}){const a=e,t=n,c=(0,d.ref)(!1),i=(0,d.ref)(null),o=(0,d.ref)({name:'',icon:'fa-solid fa-star',description:'',mechanism:'',bodyCharacteristics:'',limitations:[],specialRules:[],writingTips:[]}),s=(0,d.computed)(()=>{const e=a.currentWorldview?.limitations;return e&&e.length>0&&'无'!==e[0]}),r=()=>{i.value=null,o.value={name:'',icon:'fa-solid fa-star',description:'',mechanism:'',bodyCharacteristics:'',limitations:[],specialRules:[],writingTips:[]},c.value=!0},l=()=>{a.currentWorldview&&(i.value=a.currentWorldview,o.value={name:a.currentWorldview.name,icon:a.currentWorldview.icon,description:a.currentWorldview.description,mechanism:a.currentWorldview.mechanism,bodyCharacteristics:a.currentWorldview.bodyCharacteristics,limitations:[...a.currentWorldview.limitations],specialRules:[...a.currentWorldview.specialRules],writingTips:[...a.currentWorldview.writingTips]},c.value=!0)},g=()=>{c.value=!1,i.value=null},A=()=>{if(!o.value.name.trim())return void toastr.warning('请输入世界观名称');const e={name:o.value.name.trim(),icon:o.value.icon.trim()||'fa-solid fa-star',description:o.value.description.trim(),mechanism:o.value.mechanism.trim(),bodyCharacteristics:o.value.bodyCharacteristics.trim(),limitations:o.value.limitations.filter(e=>e.trim()),specialRules:o.value.specialRules.filter(e=>e.trim()),writingTips:o.value.writingTips.filter(e=>e.trim())};i.value?t('update',i.value.id,e):t('create',e),c.value=!1,i.value=null},p=()=>{c.value&&g(),t('close')};return(n,a)=>((0,d.openBlock)(),(0,d.createBlock)((0,d.unref)(Me),{visible:e.visible,title:'世界观设定',icon:e.currentWorldview?.icon||'fa-solid fa-globe','panel-class':'gc-worldview-panel',onClose:p},{'header-actions':(0,d.withCtx)(()=>[(0,d.createElementVNode)('button',{class:'gc-btn-link',onClick:a[0]||(a[0]=e=>n.$emit('reset')),title:'重置为默认'},[...a[9]||(a[9]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-rotate-left'},null,-1)])])]),default:(0,d.withCtx)(()=>[(0,d.createElementVNode)('div',Vn,[(0,d.createCommentVNode)(' 当前世界观选择 '),(0,d.createElementVNode)('div',Nn,[(0,d.createElementVNode)('div',Dn,[(0,d.createElementVNode)('div',Fn,[(0,d.createElementVNode)('i',{class:(0,d.normalizeClass)([e.currentWorldview?.icon,'gc-worldview-icon'])},null,2),(0,d.createElementVNode)('div',null,[(0,d.createElementVNode)('div',Sn,(0,d.toDisplayString)(e.currentWorldview?.name),1),(0,d.createElementVNode)('div',zn,(0,d.toDisplayString)(e.currentWorldview?.description),1)])])]),(0,d.createCommentVNode)(' 世界观快速切换列表 '),(0,d.createElementVNode)('div',$n,[((0,d.openBlock)(!0),(0,d.createElementBlock)(d.Fragment,null,(0,d.renderList)(e.worldviews,t=>((0,d.openBlock)(),(0,d.createElementBlock)('div',{key:t.id,class:(0,d.normalizeClass)(['gc-worldview-item',{active:t.id===e.currentWorldviewId,builtin:t.builtin}]),onClick:e=>n.$emit('select',t.id)},[(0,d.createElementVNode)('i',{class:(0,d.normalizeClass)([t.icon,'gc-worldview-item-icon'])},null,2),(0,d.createElementVNode)('div',Tn,[(0,d.createElementVNode)('span',jn,(0,d.toDisplayString)(t.name),1),t.builtin?(0,d.createCommentVNode)('v-if',!0):((0,d.openBlock)(),(0,d.createBlock)((0,d.unref)(Oe),{key:0,variant:'custom',size:'sm'},{default:(0,d.withCtx)(()=>[...a[10]||(a[10]=[(0,d.createTextVNode)('自定义',-1)])]),_:1}))]),t.id===e.currentWorldviewId?((0,d.openBlock)(),(0,d.createElementBlock)('i',In)):(0,d.createCommentVNode)('v-if',!0)],10,_n))),128))])]),(0,d.createCommentVNode)(' 当前世界观详情 '),c.value?((0,d.openBlock)(),(0,d.createElementBlock)(d.Fragment,{key:1},[(0,d.createCommentVNode)(' 编辑世界观 '),(0,d.createElementVNode)('div',Kn,[(0,d.createElementVNode)('div',ea,[(0,d.createElementVNode)('button',{class:'gc-btn-link',onClick:g},[...a[21]||(a[21]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-arrow-left'},null,-1),(0,d.createTextVNode)(' 返回 ',-1)])]),(0,d.createElementVNode)('span',na,(0,d.toDisplayString)(i.value?'编辑世界观':'新建世界观'),1)]),(0,d.createElementVNode)('div',aa,[(0,d.createElementVNode)('div',ta,[a[22]||(a[22]=(0,d.createElementVNode)('label',null,'名称 *',-1)),(0,d.withDirectives)((0,d.createElementVNode)('input',{'onUpdate:modelValue':a[4]||(a[4]=e=>o.value.name=e),type:'text',class:'gc-input',placeholder:'世界观名称'},null,512),[[d.vModelText,o.value.name]])]),(0,d.createElementVNode)('div',ca,[a[23]||(a[23]=(0,d.createElementVNode)('label',null,'图标 (Font Awesome class)',-1)),(0,d.withDirectives)((0,d.createElementVNode)('input',{'onUpdate:modelValue':a[5]||(a[5]=e=>o.value.icon=e),type:'text',class:'gc-input',placeholder:'fa-solid fa-atom'},null,512),[[d.vModelText,o.value.icon]])]),(0,d.createElementVNode)('div',ia,[a[24]||(a[24]=(0,d.createElementVNode)('label',null,'描述',-1)),(0,d.withDirectives)((0,d.createElementVNode)('input',{'onUpdate:modelValue':a[6]||(a[6]=e=>o.value.description=e),type:'text',class:'gc-input',placeholder:'简短描述'},null,512),[[d.vModelText,o.value.description]])]),(0,d.createElementVNode)('div',oa,[a[25]||(a[25]=(0,d.createElementVNode)('label',null,'变化机制',-1)),(0,d.withDirectives)((0,d.createElementVNode)('textarea',{'onUpdate:modelValue':a[7]||(a[7]=e=>o.value.mechanism=e),class:'gc-textarea',rows:'4',placeholder:'描述体型变化的机制...'},null,512),[[d.vModelText,o.value.mechanism]])]),(0,d.createElementVNode)('div',sa,[a[26]||(a[26]=(0,d.createElementVNode)('label',null,'身体特性',-1)),(0,d.withDirectives)((0,d.createElementVNode)('textarea',{'onUpdate:modelValue':a[8]||(a[8]=e=>o.value.bodyCharacteristics=e),class:'gc-textarea',rows:'4',placeholder:'描述变化后的身体特征...'},null,512),[[d.vModelText,o.value.bodyCharacteristics]])]),(0,d.createElementVNode)('div',ra,[(0,d.createVNode)((0,d.unref)(Te),{onClick:g},{default:(0,d.withCtx)(()=>[...a[27]||(a[27]=[(0,d.createTextVNode)('取消',-1)])]),_:1}),(0,d.createVNode)((0,d.unref)(Te),{variant:'primary',onClick:A},{default:(0,d.withCtx)(()=>[...a[28]||(a[28]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-save'},null,-1),(0,d.createTextVNode)(' 保存 ',-1)])]),_:1})])])])],2112)):((0,d.openBlock)(),(0,d.createElementBlock)('div',Wn,[(0,d.createElementVNode)('div',Yn,[a[11]||(a[11]=(0,d.createElementVNode)('h4',null,[(0,d.createElementVNode)('i',{class:'fa-solid fa-gears'}),(0,d.createTextVNode)(' 变化机制')],-1)),(0,d.createElementVNode)('div',Mn,(0,d.toDisplayString)(e.currentWorldview?.mechanism),1)]),(0,d.createElementVNode)('div',Pn,[a[12]||(a[12]=(0,d.createElementVNode)('h4',null,[(0,d.createElementVNode)('i',{class:'fa-solid fa-person'}),(0,d.createTextVNode)(' 身体特性')],-1)),(0,d.createElementVNode)('div',On,(0,d.toDisplayString)(e.currentWorldview?.bodyCharacteristics),1)]),s.value?((0,d.openBlock)(),(0,d.createElementBlock)('div',Un,[a[13]||(a[13]=(0,d.createElementVNode)('h4',null,[(0,d.createElementVNode)('i',{class:'fa-solid fa-triangle-exclamation'}),(0,d.createTextVNode)(' 限制与代价')],-1)),(0,d.createElementVNode)('ul',Rn,[((0,d.openBlock)(!0),(0,d.createElementBlock)(d.Fragment,null,(0,d.renderList)(e.currentWorldview?.limitations,(e,n)=>((0,d.openBlock)(),(0,d.createElementBlock)('li',{key:n},(0,d.toDisplayString)(e),1))),128))])])):(0,d.createCommentVNode)('v-if',!0),e.currentWorldview?.specialRules?.length?((0,d.openBlock)(),(0,d.createElementBlock)('div',Gn,[a[14]||(a[14]=(0,d.createElementVNode)('h4',null,[(0,d.createElementVNode)('i',{class:'fa-solid fa-star'}),(0,d.createTextVNode)(' 特殊规则')],-1)),(0,d.createElementVNode)('ul',qn,[((0,d.openBlock)(!0),(0,d.createElementBlock)(d.Fragment,null,(0,d.renderList)(e.currentWorldview?.specialRules,(e,n)=>((0,d.openBlock)(),(0,d.createElementBlock)('li',{key:n},(0,d.toDisplayString)(e),1))),128))])])):(0,d.createCommentVNode)('v-if',!0),e.currentWorldview?.writingTips?.length?((0,d.openBlock)(),(0,d.createElementBlock)('div',Ln,[a[15]||(a[15]=(0,d.createElementVNode)('h4',null,[(0,d.createElementVNode)('i',{class:'fa-solid fa-pen-fancy'}),(0,d.createTextVNode)(' 写作建议')],-1)),(0,d.createElementVNode)('ul',Qn,[((0,d.openBlock)(!0),(0,d.createElementBlock)(d.Fragment,null,(0,d.renderList)(e.currentWorldview?.writingTips,(e,n)=>((0,d.openBlock)(),(0,d.createElementBlock)('li',{key:n},(0,d.toDisplayString)(e),1))),128))])])):(0,d.createCommentVNode)('v-if',!0),(0,d.createCommentVNode)(' 世界观设置选项 '),(0,d.createElementVNode)('div',Hn,[a[18]||(a[18]=(0,d.createElementVNode)('h4',null,[(0,d.createElementVNode)('i',{class:'fa-solid fa-sliders'}),(0,d.createTextVNode)(' 世界观选项')],-1)),(0,d.createElementVNode)('div',Zn,[a[16]||(a[16]=(0,d.createElementVNode)('label',null,[(0,d.createElementVNode)('span',null,'注入世界观提示词'),(0,d.createElementVNode)('small',null,'将世界观设定注入到 AI 提示词中')],-1)),(0,d.createVNode)((0,d.unref)(De),{'model-value':e.settings.injectWorldviewPrompt,'onUpdate:modelValue':a[1]||(a[1]=e=>n.$emit('update:setting','injectWorldviewPrompt',e))},null,8,['model-value'])]),(0,d.createElementVNode)('div',Xn,[a[17]||(a[17]=(0,d.createElementVNode)('label',null,[(0,d.createElementVNode)('span',null,'允许身体部位独立变化'),(0,d.createElementVNode)('small',null,'特定部位可以有不同的缩放倍率')],-1)),(0,d.createVNode)((0,d.unref)(De),{'model-value':e.settings.allowPartialScaling,'onUpdate:modelValue':a[2]||(a[2]=e=>n.$emit('update:setting','allowPartialScaling',e))},null,8,['model-value'])])]),e.currentWorldview?.builtin?(0,d.createCommentVNode)('v-if',!0):((0,d.openBlock)(),(0,d.createElementBlock)('div',Jn,[(0,d.createVNode)((0,d.unref)(Te),{onClick:l},{default:(0,d.withCtx)(()=>[...a[19]||(a[19]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-pen'},null,-1),(0,d.createTextVNode)(' 编辑',-1)])]),_:1}),(0,d.createVNode)((0,d.unref)(Te),{variant:'danger',onClick:a[3]||(a[3]=a=>n.$emit('delete',e.currentWorldview?.id,e.currentWorldview?.name))},{default:(0,d.withCtx)(()=>[...a[20]||(a[20]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-trash'},null,-1),(0,d.createTextVNode)(' 删除 ',-1)])]),_:1})]))])),(0,d.createCommentVNode)(' 新建世界观按钮 '),c.value?(0,d.createCommentVNode)('v-if',!0):((0,d.openBlock)(),(0,d.createBlock)((0,d.unref)(Te),{key:2,class:'gc-add-template-btn',onClick:r},{default:(0,d.withCtx)(()=>[...a[29]||(a[29]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-plus'},null,-1),(0,d.createTextVNode)(' 新建自定义世界观 ',-1)])]),_:1}))])]),_:1},8,['visible','icon']))}});s(134);const da=(0,Ne.A)(la,[['__scopeId','data-v-3554c17a']]),ga={class:'gc-prompts-content'},Aa={key:0,class:'gc-prompts-list'},pa={class:'gc-prompt-toggle'},ma=['onClick'],Ca={class:'gc-prompt-name'},ua={class:'gc-prompt-type'},va={class:'gc-prompt-desc'},ba={class:'gc-prompt-actions'},fa={class:'gc-prompt-order-btns'},ha=['onClick'],xa=['onClick'],Ba=['onClick'],Ea=['onClick'],ka={class:'gc-prompt-editor'},ya={class:'gc-editor-form'},wa={class:'gc-setting-item'},Va={class:'gc-setting-item'},Na={class:'gc-setting-item'},Da={class:'gc-setting-item'},Fa={class:'gc-setting-toggle'},Sa={class:'gc-editor-actions'},za={class:'gc-prompt-editor'},$a={class:'gc-editor-header'},_a={class:'gc-editor-title'},Ta={class:'gc-editor-form'},ja={class:'gc-setting-item'},Ia=['disabled'],Wa={class:'gc-setting-item'},Ya={class:'gc-setting-item'},Ma={class:'gc-editor-actions'},Pa=(0,d.defineComponent)({__name:'PromptsPanel',props:{visible:{type:Boolean},templates:{}},emits:['close','reset','toggle','move','delete','create','save'],setup(e,{emit:n}){const a=n,t=(0,d.ref)(!1),c=(0,d.ref)(null),i=(0,d.ref)({name:'',description:'',content:'',type:'footer',enabled:!0}),o=()=>{i.value={name:'',description:'',content:'',type:'footer',enabled:!0},t.value=!0},s=()=>{t.value=!1},r=()=>{i.value.name.trim()?(a('create',{name:i.value.name.trim(),description:i.value.description.trim(),content:i.value.content,type:i.value.type,enabled:i.value.enabled}),t.value=!1):toastr.warning('请输入模板名称')},l=e=>{c.value={...e}},g=()=>{c.value=null},A=()=>{c.value&&(a('save',c.value),c.value=null)},p=()=>{t.value&&(t.value=!1),c.value&&(c.value=null),a('close')};return(n,a)=>((0,d.openBlock)(),(0,d.createBlock)((0,d.unref)(Me),{visible:e.visible,title:'提示词管理',icon:'fa-solid fa-file-lines','panel-class':'gc-prompts-panel',onClose:p},{'header-actions':(0,d.withCtx)(()=>[(0,d.createElementVNode)('button',{class:'gc-btn-link',onClick:a[0]||(a[0]=e=>n.$emit('reset')),title:'重置为默认'},[...a[9]||(a[9]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-rotate-left'},null,-1)])])]),default:(0,d.withCtx)(()=>[(0,d.createElementVNode)('div',ga,[(0,d.createCommentVNode)(' 模板列表 '),c.value||t.value?t.value?((0,d.openBlock)(),(0,d.createElementBlock)(d.Fragment,{key:1},[(0,d.createCommentVNode)(' 新建模板 '),(0,d.createElementVNode)('div',ka,[(0,d.createElementVNode)('div',{class:'gc-editor-header'},[(0,d.createElementVNode)('button',{class:'gc-btn-link',onClick:s},[...a[18]||(a[18]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-arrow-left'},null,-1),(0,d.createTextVNode)(' 返回列表 ',-1)])]),a[19]||(a[19]=(0,d.createElementVNode)('span',{class:'gc-editor-title'},'新建模板',-1))]),(0,d.createElementVNode)('div',ya,[(0,d.createElementVNode)('div',wa,[a[20]||(a[20]=(0,d.createElementVNode)('label',null,'模板名称 *',-1)),(0,d.withDirectives)((0,d.createElementVNode)('input',{'onUpdate:modelValue':a[1]||(a[1]=e=>i.value.name=e),type:'text',class:'gc-input',placeholder:'输入模板名称'},null,512),[[d.vModelText,i.value.name]])]),(0,d.createElementVNode)('div',Va,[a[21]||(a[21]=(0,d.createElementVNode)('label',null,'描述',-1)),(0,d.withDirectives)((0,d.createElementVNode)('input',{'onUpdate:modelValue':a[2]||(a[2]=e=>i.value.description=e),type:'text',class:'gc-input',placeholder:'简短描述模板用途'},null,512),[[d.vModelText,i.value.description]])]),(0,d.createElementVNode)('div',Na,[a[23]||(a[23]=(0,d.createElementVNode)('label',null,'模板类型',-1)),(0,d.withDirectives)((0,d.createElementVNode)('select',{'onUpdate:modelValue':a[3]||(a[3]=e=>i.value.type=e),class:'gc-input'},[...a[22]||(a[22]=[(0,d.createElementVNode)('option',{value:'header'},'header - 头部说明',-1),(0,d.createElementVNode)('option',{value:'character'},'character - 角色数据（为每个角色生成）',-1),(0,d.createElementVNode)('option',{value:'interaction'},'interaction - 互动限制',-1),(0,d.createElementVNode)('option',{value:'rules'},'rules - 规则说明',-1),(0,d.createElementVNode)('option',{value:'footer'},'footer - 尾部补充',-1)])],512),[[d.vModelSelect,i.value.type]])]),(0,d.createElementVNode)('div',Da,[a[24]||(a[24]=(0,d.createElementVNode)('label',null,'模板内容',-1)),a[25]||(a[25]=(0,d.createElementVNode)('div',{class:'gc-editor-hint'},[(0,d.createTextVNode)(' 支持变量: '),(0,d.createElementVNode)('code',null,'{{角色名}}'),(0,d.createTextVNode)(),(0,d.createElementVNode)('code',null,'{{当前身高_格式化}}'),(0,d.createTextVNode)(),(0,d.createElementVNode)('code',null,'{{倍率}}'),(0,d.createTextVNode)(),(0,d.createElementVNode)('code',null,'{{级别}}'),(0,d.createTextVNode)(),(0,d.createElementVNode)('code',null,'{{描述}}'),(0,d.createTextVNode)(),(0,d.createElementVNode)('code',null,'{{身体数据}}'),(0,d.createTextVNode)(),(0,d.createElementVNode)('code',null,'{{相对参照}}'),(0,d.createTextVNode)(),(0,d.createElementVNode)('code',null,'{{互动限制列表}}')],-1)),(0,d.withDirectives)((0,d.createElementVNode)('textarea',{'onUpdate:modelValue':a[4]||(a[4]=e=>i.value.content=e),class:'gc-textarea gc-editor-textarea',rows:'10',placeholder:'输入模板内容...'},null,512),[[d.vModelText,i.value.content]])]),(0,d.createElementVNode)('div',Fa,[a[26]||(a[26]=(0,d.createElementVNode)('label',null,[(0,d.createElementVNode)('span',null,'默认启用')],-1)),(0,d.createVNode)((0,d.unref)(De),{modelValue:i.value.enabled,'onUpdate:modelValue':a[5]||(a[5]=e=>i.value.enabled=e)},null,8,['modelValue'])]),(0,d.createElementVNode)('div',Sa,[(0,d.createVNode)((0,d.unref)(Te),{onClick:s},{default:(0,d.withCtx)(()=>[...a[27]||(a[27]=[(0,d.createTextVNode)('取消',-1)])]),_:1}),(0,d.createVNode)((0,d.unref)(Te),{variant:'primary',onClick:r},{default:(0,d.withCtx)(()=>[...a[28]||(a[28]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-plus'},null,-1),(0,d.createTextVNode)(' 创建模板 ',-1)])]),_:1})])])])],2112)):c.value?((0,d.openBlock)(),(0,d.createElementBlock)(d.Fragment,{key:2},[(0,d.createCommentVNode)(' 模板编辑 '),(0,d.createElementVNode)('div',za,[(0,d.createElementVNode)('div',$a,[(0,d.createElementVNode)('button',{class:'gc-btn-link',onClick:g},[...a[29]||(a[29]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-arrow-left'},null,-1),(0,d.createTextVNode)(' 返回列表 ',-1)])]),(0,d.createElementVNode)('span',_a,'编辑: '+(0,d.toDisplayString)(c.value.name),1)]),(0,d.createElementVNode)('div',Ta,[(0,d.createElementVNode)('div',ja,[a[30]||(a[30]=(0,d.createElementVNode)('label',null,'模板名称',-1)),(0,d.withDirectives)((0,d.createElementVNode)('input',{'onUpdate:modelValue':a[6]||(a[6]=e=>c.value.name=e),type:'text',class:'gc-input',disabled:c.value.builtin},null,8,Ia),[[d.vModelText,c.value.name]])]),(0,d.createElementVNode)('div',Wa,[a[31]||(a[31]=(0,d.createElementVNode)('label',null,'描述',-1)),(0,d.withDirectives)((0,d.createElementVNode)('input',{'onUpdate:modelValue':a[7]||(a[7]=e=>c.value.description=e),type:'text',class:'gc-input'},null,512),[[d.vModelText,c.value.description]])]),(0,d.createElementVNode)('div',Ya,[a[32]||(a[32]=(0,d.createElementVNode)('label',null,'模板内容',-1)),a[33]||(a[33]=(0,d.createElementVNode)('div',{class:'gc-editor-hint'},[(0,d.createTextVNode)(' 支持变量: '),(0,d.createElementVNode)('code',null,'{{角色名}}'),(0,d.createTextVNode)(),(0,d.createElementVNode)('code',null,'{{当前身高_格式化}}'),(0,d.createTextVNode)(),(0,d.createElementVNode)('code',null,'{{倍率}}'),(0,d.createTextVNode)(),(0,d.createElementVNode)('code',null,'{{级别}}'),(0,d.createTextVNode)(),(0,d.createElementVNode)('code',null,'{{描述}}'),(0,d.createTextVNode)(),(0,d.createElementVNode)('code',null,'{{身体数据}}'),(0,d.createTextVNode)(),(0,d.createElementVNode)('code',null,'{{相对参照}}'),(0,d.createTextVNode)(),(0,d.createElementVNode)('code',null,'{{互动限制列表}}')],-1)),(0,d.withDirectives)((0,d.createElementVNode)('textarea',{'onUpdate:modelValue':a[8]||(a[8]=e=>c.value.content=e),class:'gc-textarea gc-editor-textarea',rows:'12'},null,512),[[d.vModelText,c.value.content]])]),(0,d.createElementVNode)('div',Ma,[(0,d.createVNode)((0,d.unref)(Te),{onClick:g},{default:(0,d.withCtx)(()=>[...a[34]||(a[34]=[(0,d.createTextVNode)('取消',-1)])]),_:1}),(0,d.createVNode)((0,d.unref)(Te),{variant:'primary',onClick:A},{default:(0,d.withCtx)(()=>[...a[35]||(a[35]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-save'},null,-1),(0,d.createTextVNode)(' 保存 ',-1)])]),_:1})])])])],2112)):(0,d.createCommentVNode)('v-if',!0):((0,d.openBlock)(),(0,d.createElementBlock)('div',Aa,[a[17]||(a[17]=(0,d.createElementVNode)('div',{class:'gc-prompts-hint'},[(0,d.createElementVNode)('i',{class:'fa-solid fa-info-circle'}),(0,d.createElementVNode)('span',null,'启用/禁用模板来自定义注入的提示词内容，点击模板可编辑')],-1)),((0,d.openBlock)(!0),(0,d.createElementBlock)(d.Fragment,null,(0,d.renderList)(e.templates,e=>((0,d.openBlock)(),(0,d.createElementBlock)('div',{key:e.id,class:(0,d.normalizeClass)(['gc-prompt-item',{disabled:!e.enabled,builtin:e.builtin}])},[(0,d.createElementVNode)('div',pa,[(0,d.createVNode)((0,d.unref)(De),{'model-value':e.enabled,size:'sm','onUpdate:modelValue':a=>n.$emit('toggle',e.id)},null,8,['model-value','onUpdate:modelValue'])]),(0,d.createElementVNode)('div',{class:'gc-prompt-info',onClick:n=>l(e)},[(0,d.createElementVNode)('div',Ca,[(0,d.createElementVNode)('span',null,(0,d.toDisplayString)(e.name),1),e.builtin?((0,d.openBlock)(),(0,d.createBlock)((0,d.unref)(Oe),{key:0,size:'sm'},{default:(0,d.withCtx)(()=>[...a[10]||(a[10]=[(0,d.createTextVNode)('内置',-1)])]),_:1})):((0,d.openBlock)(),(0,d.createBlock)((0,d.unref)(Oe),{key:1,variant:'custom',size:'sm'},{default:(0,d.withCtx)(()=>[...a[11]||(a[11]=[(0,d.createTextVNode)('自定义',-1)])]),_:1})),(0,d.createElementVNode)('span',ua,(0,d.toDisplayString)(e.type),1)]),(0,d.createElementVNode)('div',va,(0,d.toDisplayString)(e.description),1)],8,ma),(0,d.createElementVNode)('div',ba,[(0,d.createElementVNode)('div',fa,[(0,d.createElementVNode)('button',{class:'gc-btn-icon-xs',onClick:a=>n.$emit('move',e.id,'up'),title:'上移'},[...a[12]||(a[12]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-chevron-up'},null,-1)])],8,ha),(0,d.createElementVNode)('button',{class:'gc-btn-icon-xs',onClick:a=>n.$emit('move',e.id,'down'),title:'下移'},[...a[13]||(a[13]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-chevron-down'},null,-1)])],8,xa)]),(0,d.createElementVNode)('button',{class:'gc-btn-icon-sm',onClick:n=>l(e),title:'编辑'},[...a[14]||(a[14]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-pen'},null,-1)])],8,Ba),e.builtin?(0,d.createCommentVNode)('v-if',!0):((0,d.openBlock)(),(0,d.createElementBlock)('button',{key:0,class:'gc-btn-icon-sm danger',onClick:a=>n.$emit('delete',e.id,e.name),title:'删除'},[...a[15]||(a[15]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-trash'},null,-1)])],8,Ea))])],2))),128)),(0,d.createVNode)((0,d.unref)(Te),{class:'gc-add-template-btn',onClick:o},{default:(0,d.withCtx)(()=>[...a[16]||(a[16]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-plus'},null,-1),(0,d.createTextVNode)(' 新建自定义模板 ',-1)])]),_:1})]))])]),_:1},8,['visible']))}});s(681);const Oa=(0,Ne.A)(Pa,[['__scopeId','data-v-16fdb386']]),Ua={class:'gc-debug-status-section'},Ra={class:'gc-debug-section'},Ga={class:'gc-debug-status'},qa={class:'gc-debug-row'},La={key:0,class:'gc-debug-row'},Qa={class:'gc-debug-value'},Ha={class:'gc-debug-row'},Za={class:'gc-debug-value mono'},Xa={class:'gc-debug-section'},Ja={class:'gc-debug-status'},Ka={class:'gc-debug-row'},et={class:'gc-debug-row'},nt={class:'gc-debug-row'},at={class:'gc-debug-row'},tt={class:'gc-debug-row'},ct={class:'gc-debug-value'},it={class:'gc-debug-section'},ot={class:'gc-debug-status'},st={class:'gc-debug-row'},rt={class:'gc-debug-row'},lt={class:'gc-debug-row'},dt={class:'gc-debug-row'},gt={class:'gc-debug-section'},At={class:'gc-debug-status'},pt={class:'gc-debug-row'},mt={class:'gc-debug-value'},Ct={class:'gc-debug-row'},ut={key:0,class:'gc-debug-row'},vt={class:'gc-debug-value'},bt={class:'gc-debug-row'},ft={class:'gc-debug-value highlight'},ht=(0,d.defineComponent)({__name:'DebugStatusSection',props:{mvuInfo:{}},setup:e=>(n,a)=>((0,d.openBlock)(),(0,d.createElementBlock)('div',Ua,[(0,d.createCommentVNode)(' MVU 状态 '),(0,d.createElementVNode)('div',Ra,[a[3]||(a[3]=(0,d.createElementVNode)('h3',null,[(0,d.createElementVNode)('i',{class:'fa-solid fa-satellite-dish'}),(0,d.createTextVNode)(' MVU 连接')],-1)),(0,d.createElementVNode)('div',Ga,[(0,d.createElementVNode)('div',qa,[a[0]||(a[0]=(0,d.createElementVNode)('span',{class:'gc-debug-label'},'MVU 可用',-1)),(0,d.createElementVNode)('span',{class:(0,d.normalizeClass)(['gc-debug-value',e.mvuInfo.mvuAvailable?'success':'error'])},(0,d.toDisplayString)(e.mvuInfo.mvuAvailable?'✅ 是':'❌ 否'),3)]),e.mvuInfo.mvuVersion?((0,d.openBlock)(),(0,d.createElementBlock)('div',La,[a[1]||(a[1]=(0,d.createElementVNode)('span',{class:'gc-debug-label'},'MVU 版本',-1)),(0,d.createElementVNode)('span',Qa,(0,d.toDisplayString)(e.mvuInfo.mvuVersion),1)])):(0,d.createCommentVNode)('v-if',!0),(0,d.createElementVNode)('div',Ha,[a[2]||(a[2]=(0,d.createElementVNode)('span',{class:'gc-debug-label'},'变量前缀',-1)),(0,d.createElementVNode)('span',Za,(0,d.toDisplayString)(e.mvuInfo.prefix),1)])])]),(0,d.createCommentVNode)(' 数据状态 '),(0,d.createElementVNode)('div',Xa,[a[9]||(a[9]=(0,d.createElementVNode)('h3',null,[(0,d.createElementVNode)('i',{class:'fa-solid fa-database'}),(0,d.createTextVNode)(' 数据状态')],-1)),(0,d.createElementVNode)('div',Ja,[(0,d.createElementVNode)('div',Ka,[a[4]||(a[4]=(0,d.createElementVNode)('span',{class:'gc-debug-label'},'stat_data',-1)),(0,d.createElementVNode)('span',{class:(0,d.normalizeClass)(['gc-debug-value',e.mvuInfo.messageVariables?.hasStatData?'success':'warn'])},(0,d.toDisplayString)(e.mvuInfo.messageVariables?.hasStatData?'✅ 有':'⚠️ 无'),3)]),(0,d.createElementVNode)('div',et,[a[5]||(a[5]=(0,d.createElementVNode)('span',{class:'gc-debug-label'},'巨大娘数据',-1)),(0,d.createElementVNode)('span',{class:(0,d.normalizeClass)(['gc-debug-value',e.mvuInfo.messageVariables?.hasGiantessData?'success':'warn'])},(0,d.toDisplayString)(e.mvuInfo.messageVariables?.hasGiantessData?'✅ 有':'⚠️ 无'),3)]),(0,d.createElementVNode)('div',nt,[a[6]||(a[6]=(0,d.createElementVNode)('span',{class:'gc-debug-label'},'场景数据',-1)),(0,d.createElementVNode)('span',{class:(0,d.normalizeClass)(['gc-debug-value',e.mvuInfo.messageVariables?.hasScenarioData?'success':'muted'])},(0,d.toDisplayString)(e.mvuInfo.messageVariables?.hasScenarioData?'✅ 有':'— 无'),3)]),(0,d.createElementVNode)('div',at,[a[7]||(a[7]=(0,d.createElementVNode)('span',{class:'gc-debug-label'},'互动限制',-1)),(0,d.createElementVNode)('span',{class:(0,d.normalizeClass)(['gc-debug-value',e.mvuInfo.messageVariables?.hasInteractionData?'success':'muted'])},(0,d.toDisplayString)(e.mvuInfo.messageVariables?.hasInteractionData?'✅ 有':'— 无'),3)]),(0,d.createElementVNode)('div',tt,[a[8]||(a[8]=(0,d.createElementVNode)('span',{class:'gc-debug-label'},'角色数量',-1)),(0,d.createElementVNode)('span',ct,(0,d.toDisplayString)(e.mvuInfo.messageVariables?.characterDetails?.length||0),1)])])]),(0,d.createCommentVNode)(' 当前设置 '),(0,d.createElementVNode)('div',it,[a[14]||(a[14]=(0,d.createElementVNode)('h3',null,[(0,d.createElementVNode)('i',{class:'fa-solid fa-sliders'}),(0,d.createTextVNode)(' 当前配置')],-1)),(0,d.createElementVNode)('div',ot,[(0,d.createElementVNode)('div',st,[a[10]||(a[10]=(0,d.createElementVNode)('span',{class:'gc-debug-label'},'脚本启用',-1)),(0,d.createElementVNode)('span',{class:(0,d.normalizeClass)(['gc-debug-value',e.mvuInfo.settings?.enabled?'success':'warn'])},(0,d.toDisplayString)(e.mvuInfo.settings?.enabled?'✅ 是':'⚠️ 否'),3)]),(0,d.createElementVNode)('div',rt,[a[11]||(a[11]=(0,d.createElementVNode)('span',{class:'gc-debug-label'},'自动注入',-1)),(0,d.createElementVNode)('span',{class:(0,d.normalizeClass)(['gc-debug-value',e.mvuInfo.settings?.autoInject?'success':'muted'])},(0,d.toDisplayString)(e.mvuInfo.settings?.autoInject?'✅ 开':'— 关'),3)]),(0,d.createElementVNode)('div',lt,[a[12]||(a[12]=(0,d.createElementVNode)('span',{class:'gc-debug-label'},'损害计算',-1)),(0,d.createElementVNode)('span',{class:(0,d.normalizeClass)(['gc-debug-value',e.mvuInfo.settings?.enableDamageCalculation?'success':'muted'])},(0,d.toDisplayString)(e.mvuInfo.settings?.enableDamageCalculation?'✅ 开':'— 关'),3)]),(0,d.createElementVNode)('div',dt,[a[13]||(a[13]=(0,d.createElementVNode)('span',{class:'gc-debug-label'},'世界观注入',-1)),(0,d.createElementVNode)('span',{class:(0,d.normalizeClass)(['gc-debug-value',e.mvuInfo.settings?.injectWorldviewPrompt?'success':'muted'])},(0,d.toDisplayString)(e.mvuInfo.settings?.injectWorldviewPrompt?'✅ 开':'— 关'),3)])])]),(0,d.createCommentVNode)(' 场景与世界观 '),(0,d.createElementVNode)('div',gt,[a[19]||(a[19]=(0,d.createElementVNode)('h3',null,[(0,d.createElementVNode)('i',{class:'fa-solid fa-globe'}),(0,d.createTextVNode)(' 场景与世界观')],-1)),(0,d.createElementVNode)('div',At,[(0,d.createElementVNode)('div',pt,[a[15]||(a[15]=(0,d.createElementVNode)('span',{class:'gc-debug-label'},'当前场景',-1)),(0,d.createElementVNode)('span',mt,(0,d.toDisplayString)(e.mvuInfo.scenario?.current),1)]),(0,d.createElementVNode)('div',Ct,[a[16]||(a[16]=(0,d.createElementVNode)('span',{class:'gc-debug-label'},'场景来源',-1)),(0,d.createElementVNode)('span',{class:(0,d.normalizeClass)(['gc-debug-value','MVU变量'===e.mvuInfo.scenario?.source?'highlight':'muted'])},(0,d.toDisplayString)(e.mvuInfo.scenario?.source),3)]),e.mvuInfo.scenario?.reason?((0,d.openBlock)(),(0,d.createElementBlock)('div',ut,[a[17]||(a[17]=(0,d.createElementVNode)('span',{class:'gc-debug-label'},'场景原因',-1)),(0,d.createElementVNode)('span',vt,(0,d.toDisplayString)(e.mvuInfo.scenario.reason),1)])):(0,d.createCommentVNode)('v-if',!0),(0,d.createElementVNode)('div',bt,[a[18]||(a[18]=(0,d.createElementVNode)('span',{class:'gc-debug-label'},'当前世界观',-1)),(0,d.createElementVNode)('span',ft,(0,d.toDisplayString)(e.mvuInfo.worldview?.name),1)])])])]))});s(894);const xt=(0,Ne.A)(ht,[['__scopeId','data-v-91dab098']]),Bt={class:'gc-debug-characters-section'},Et={key:0,class:'gc-debug-empty'},kt={key:1,class:'gc-debug-characters'},yt={class:'gc-debug-char-header'},wt={class:'gc-debug-char-name'},Vt={class:'gc-debug-char-body'},Nt={class:'gc-debug-char-row'},Dt={class:'mono'},Ft={class:'gc-debug-char-row'},St={class:'mono'},zt={class:'gc-debug-char-row'},$t={class:'mono'},_t={key:0,class:'gc-debug-char-row'},Tt={class:'highlight'},jt={class:'gc-debug-char-row'},It={class:'gc-debug-char-row'},Wt={class:'gc-debug-char-row'},Yt={key:0,class:'gc-debug-char-custom'},Mt={class:'mono'},Pt={key:1,class:'gc-debug-char-damage estimate'},Ot={class:'gc-debug-char-row'},Ut={class:'damage'},Rt={class:'gc-debug-char-row'},Gt={class:'damage'},qt={class:'gc-debug-char-row'},Lt={key:2,class:'gc-debug-char-damage actual'},Qt={key:0,class:'gc-debug-char-row'},Ht={class:'actual-damage'},Zt={key:1,class:'gc-debug-char-row'},Xt={class:'actual-damage'},Jt={key:2,class:'gc-debug-char-row'},Kt={class:'action'},ec={key:3,class:'gc-debug-char-row'},nc={key:3,class:'gc-debug-char-no-damage'},ac=(0,d.defineComponent)({__name:'DebugCharactersSection',props:{characters:{}},setup:e=>(n,a)=>((0,d.openBlock)(),(0,d.createElementBlock)('div',Bt,[e.characters.length?((0,d.openBlock)(),(0,d.createElementBlock)('div',kt,[((0,d.openBlock)(!0),(0,d.createElementBlock)(d.Fragment,null,(0,d.renderList)(e.characters,e=>((0,d.openBlock)(),(0,d.createElementBlock)('div',{key:e.name,class:(0,d.normalizeClass)(['gc-debug-char-card',{giant:'巨大娘'===e.类型,tiny:'小人'===e.类型}])},[(0,d.createElementVNode)('div',yt,[(0,d.createElementVNode)('span',wt,(0,d.toDisplayString)(e.name),1),(0,d.createElementVNode)('span',{class:(0,d.normalizeClass)(['gc-debug-char-type','巨大娘'===e.类型?'giant':'tiny'])},(0,d.toDisplayString)(e.类型),3)]),(0,d.createElementVNode)('div',Vt,[(0,d.createElementVNode)('div',Nt,[a[1]||(a[1]=(0,d.createElementVNode)('span',null,'身高',-1)),(0,d.createElementVNode)('span',Dt,(0,d.toDisplayString)(e.当前身高_格式化||`${e.当前身高}m`),1)]),(0,d.createElementVNode)('div',Ft,[a[2]||(a[2]=(0,d.createElementVNode)('span',null,'原身高',-1)),(0,d.createElementVNode)('span',St,(0,d.toDisplayString)(e.原身高)+'m',1)]),(0,d.createElementVNode)('div',zt,[a[3]||(a[3]=(0,d.createElementVNode)('span',null,'倍率',-1)),(0,d.createElementVNode)('span',$t,(0,d.toDisplayString)(e.倍率?.toFixed(2))+'x',1)]),e.级别?((0,d.openBlock)(),(0,d.createElementBlock)('div',_t,[a[4]||(a[4]=(0,d.createElementVNode)('span',null,'级别',-1)),(0,d.createElementVNode)('span',Tt,(0,d.toDisplayString)(e.级别),1)])):(0,d.createCommentVNode)('v-if',!0),(0,d.createElementVNode)('div',jt,[a[5]||(a[5]=(0,d.createElementVNode)('span',null,'计算数据',-1)),(0,d.createElementVNode)('span',{class:(0,d.normalizeClass)(e.有计算数据?'success':'warn')},(0,d.toDisplayString)(e.有计算数据?'✅':'❌'),3)]),(0,d.createElementVNode)('div',It,[a[6]||(a[6]=(0,d.createElementVNode)('span',null,'损害数据',-1)),(0,d.createElementVNode)('span',{class:(0,d.normalizeClass)(e.有损害数据?'success':'muted')},(0,d.toDisplayString)(e.有损害数据?'✅':'—'),3)]),(0,d.createElementVNode)('div',Wt,[a[7]||(a[7]=(0,d.createElementVNode)('span',null,'历史记录',-1)),(0,d.createElementVNode)('span',null,(0,d.toDisplayString)(e.有身高历史?`${e.历史记录数}条`:'—'),1)])]),(0,d.createCommentVNode)(' 自定义部位 '),e.自定义部位&&Object.keys(e.自定义部位).length?((0,d.openBlock)(),(0,d.createElementBlock)('div',Yt,[a[8]||(a[8]=(0,d.createElementVNode)('div',{class:'gc-debug-char-custom-title'},[(0,d.createElementVNode)('i',{class:'fa-solid fa-bolt'}),(0,d.createTextVNode)(' 自定义部位 ')],-1)),((0,d.openBlock)(!0),(0,d.createElementBlock)(d.Fragment,null,(0,d.renderList)(e.自定义部位,(e,n)=>((0,d.openBlock)(),(0,d.createElementBlock)('div',{key:n,class:'gc-debug-char-row'},[(0,d.createElementVNode)('span',null,(0,d.toDisplayString)(n),1),(0,d.createElementVNode)('span',Mt,(0,d.toDisplayString)(e)+'m',1)]))),128))])):(0,d.createCommentVNode)('v-if',!0),(0,d.createCommentVNode)(' 预估损害 '),e.预估损害?((0,d.openBlock)(),(0,d.createElementBlock)('div',Pt,[a[12]||(a[12]=(0,d.createElementVNode)('div',{class:'gc-debug-char-damage-title'},[(0,d.createElementVNode)('i',{class:'fa-solid fa-calculator'}),(0,d.createTextVNode)(' 预估损害 '),(0,d.createElementVNode)('span',{class:'gc-debug-char-damage-badge'},'自动计算')],-1)),(0,d.createElementVNode)('div',Ot,[a[9]||(a[9]=(0,d.createElementVNode)('span',null,'破坏力等级',-1)),(0,d.createElementVNode)('span',Ut,(0,d.toDisplayString)(e.预估损害.破坏力等级),1)]),(0,d.createElementVNode)('div',Rt,[a[10]||(a[10]=(0,d.createElementVNode)('span',null,'单步伤亡',-1)),(0,d.createElementVNode)('span',Gt,(0,d.toDisplayString)(e.预估损害.单步伤亡),1)]),(0,d.createElementVNode)('div',qt,[a[11]||(a[11]=(0,d.createElementVNode)('span',null,'场景',-1)),(0,d.createElementVNode)('span',null,(0,d.toDisplayString)(e.预估损害.场景),1)])])):(0,d.createCommentVNode)('v-if',!0),(0,d.createCommentVNode)(' 实际损害 '),e.实际损害?((0,d.openBlock)(),(0,d.createElementBlock)('div',Lt,[a[17]||(a[17]=(0,d.createElementVNode)('div',{class:'gc-debug-char-damage-title'},[(0,d.createElementVNode)('i',{class:'fa-solid fa-skull'}),(0,d.createTextVNode)(' 实际损害 '),(0,d.createElementVNode)('span',{class:'gc-debug-char-damage-badge actual'},'剧情记录')],-1)),e.实际损害.总伤亡人数_格式化?((0,d.openBlock)(),(0,d.createElementBlock)('div',Qt,[a[13]||(a[13]=(0,d.createElementVNode)('span',null,'累计伤亡',-1)),(0,d.createElementVNode)('span',Ht,(0,d.toDisplayString)(e.实际损害.总伤亡人数_格式化),1)])):(0,d.createCommentVNode)('v-if',!0),e.实际损害.总建筑损毁?((0,d.openBlock)(),(0,d.createElementBlock)('div',Zt,[a[14]||(a[14]=(0,d.createElementVNode)('span',null,'累计建筑损毁',-1)),(0,d.createElementVNode)('span',Xt,(0,d.toDisplayString)(e.实际损害.总建筑损毁)+'栋',1)])):(0,d.createCommentVNode)('v-if',!0),e.实际损害.最近行动?((0,d.openBlock)(),(0,d.createElementBlock)('div',Jt,[a[15]||(a[15]=(0,d.createElementVNode)('span',null,'最近行动',-1)),(0,d.createElementVNode)('span',Kt,(0,d.toDisplayString)(e.实际损害.最近行动),1)])):(0,d.createCommentVNode)('v-if',!0),e.实际损害.重大事件数?((0,d.openBlock)(),(0,d.createElementBlock)('div',ec,[a[16]||(a[16]=(0,d.createElementVNode)('span',null,'重大事件',-1)),(0,d.createElementVNode)('span',null,(0,d.toDisplayString)(e.实际损害.重大事件数)+'件',1)])):(0,d.createCommentVNode)('v-if',!0)])):(0,d.createCommentVNode)('v-if',!0),(0,d.createCommentVNode)(' 无损害数据提示 '),e.预估损害||e.实际损害||'巨大娘'!==e.类型?(0,d.createCommentVNode)('v-if',!0):((0,d.openBlock)(),(0,d.createElementBlock)('div',nc,[...a[18]||(a[18]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-info-circle'},null,-1),(0,d.createElementVNode)('span',null,'启用损害计算后显示预估数据',-1)])]))],2))),128))])):((0,d.openBlock)(),(0,d.createElementBlock)('div',Et,[...a[0]||(a[0]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-users-slash'},null,-1),(0,d.createElementVNode)('p',null,'暂无角色数据',-1),(0,d.createElementVNode)('small',null,'在世界书或提示词中设置角色身高后，这里会显示详细信息',-1)])]))]))});s(202);const tc=(0,Ne.A)(ac,[['__scopeId','data-v-3eacdf91']]),cc={class:'gc-debug-test-section'},ic={class:'gc-debug-section'},oc={class:'gc-debug-form'},sc={class:'gc-debug-input-row'},rc=['value'],lc=['value'],dc=['value'],gc={class:'gc-debug-hint'},Ac={key:0},pc={key:1},mc={key:2},Cc={class:'gc-debug-btn-row'},uc=['disabled'],vc={class:'gc-debug-section'},bc={class:'gc-debug-quick-tests'},fc={class:'gc-debug-section'},hc={class:'gc-debug-form'},xc={class:'gc-setting-item'},Bc=['value'],Ec={key:0,class:'gc-actual-damage-form'},kc={class:'gc-debug-input-group'},yc={class:'gc-debug-input-row'},wc={class:'gc-debug-input-group'},Vc={class:'gc-debug-input-row'},Nc={class:'gc-debug-input-group'},Dc={class:'gc-debug-input-group'},Fc={class:'gc-debug-input-row'},Sc={class:'gc-debug-input-group'},zc={key:1,class:'gc-debug-hint muted'},$c=(0,d.defineComponent)({__name:'DebugTestSection',props:{testName:{},testHeight:{},testOriginal:{},characters:{}},emits:['update:test-name','update:test-height','update:test-original','inject','clear','quick-test','save-damage','clear-damage'],setup(e,{emit:n}){const a=e,t=n,c=(0,d.ref)(''),i=(0,d.ref)({totalCasualties:0,totalBuildings:0,lastAction:'',lastActionCasualties:0,note:''}),o=(0,d.computed)(()=>a.characters.filter(e=>e.currentHeight/e.originalHeight>=1)),s=()=>{c.value&&t('save-damage',{name:c.value,data:{...i.value}})},r=()=>{c.value&&(t('clear-damage',c.value),i.value={totalCasualties:0,totalBuildings:0,lastAction:'',lastActionCasualties:0,note:''})};return(n,a)=>((0,d.openBlock)(),(0,d.createElementBlock)('div',cc,[(0,d.createCommentVNode)(' 测试数据注入 '),(0,d.createElementVNode)('div',ic,[a[25]||(a[25]=(0,d.createElementVNode)('h3',null,[(0,d.createElementVNode)('i',{class:'fa-solid fa-flask'}),(0,d.createTextVNode)(' 测试数据注入')],-1)),(0,d.createElementVNode)('div',oc,[(0,d.createElementVNode)('div',sc,[(0,d.createElementVNode)('input',{value:e.testName,onInput:a[0]||(a[0]=e=>n.$emit('update:test-name',e.target.value)),type:'text',placeholder:'角色名',class:'gc-input sm'},null,40,rc),(0,d.createElementVNode)('input',{value:e.testHeight,onInput:a[1]||(a[1]=e=>n.$emit('update:test-height',parseFloat(e.target.value)||0)),type:'number',placeholder:'身高(m)',class:'gc-input sm'},null,40,lc),(0,d.createElementVNode)('input',{value:e.testOriginal,onInput:a[2]||(a[2]=e=>n.$emit('update:test-original',parseFloat(e.target.value)||0)),type:'number',placeholder:'原高(m)',class:'gc-input sm'},null,40,dc)]),(0,d.createElementVNode)('div',gc,[a[21]||(a[21]=(0,d.createElementVNode)('i',{class:'fa-solid fa-info-circle'},null,-1)),e.testHeight&&e.testOriginal&&e.testHeight<e.testOriginal?((0,d.openBlock)(),(0,d.createElementBlock)('span',Ac,[a[17]||(a[17]=(0,d.createTextVNode)(' 将创建',-1)),a[18]||(a[18]=(0,d.createElementVNode)('strong',{class:'tiny'},'小人',-1)),(0,d.createTextVNode)('（'+(0,d.toDisplayString)((e.testHeight/e.testOriginal).toFixed(4))+'倍） ',1)])):e.testHeight&&e.testOriginal?((0,d.openBlock)(),(0,d.createElementBlock)('span',pc,[a[19]||(a[19]=(0,d.createTextVNode)(' 将创建',-1)),a[20]||(a[20]=(0,d.createElementVNode)('strong',{class:'giant'},'巨大娘',-1)),(0,d.createTextVNode)('（'+(0,d.toDisplayString)((e.testHeight/e.testOriginal).toFixed(1))+'倍） ',1)])):((0,d.openBlock)(),(0,d.createElementBlock)('span',mc,'输入身高和原高自动判断类型'))]),(0,d.createElementVNode)('div',Cc,[(0,d.createElementVNode)('button',{class:'gc-btn gc-btn-sm primary',onClick:a[3]||(a[3]=e=>n.$emit('inject'))},[...a[22]||(a[22]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-syringe'},null,-1),(0,d.createTextVNode)(' 注入测试 ',-1)])]),(0,d.createElementVNode)('button',{class:'gc-btn gc-btn-sm',onClick:a[4]||(a[4]=a=>n.$emit('clear',e.testName)),disabled:!e.testName},[...a[23]||(a[23]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-eraser'},null,-1),(0,d.createTextVNode)(' 清除此角色 ',-1)])],8,uc),(0,d.createElementVNode)('button',{class:'gc-btn gc-btn-sm danger',onClick:a[5]||(a[5]=e=>n.$emit('clear'))},[...a[24]||(a[24]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-trash'},null,-1),(0,d.createTextVNode)(' 清除全部 ',-1)])])])])]),(0,d.createCommentVNode)(' 快捷测试 '),(0,d.createElementVNode)('div',vc,[a[26]||(a[26]=(0,d.createElementVNode)('h3',null,[(0,d.createElementVNode)('i',{class:'fa-solid fa-lightbulb'}),(0,d.createTextVNode)(' 快捷测试')],-1)),(0,d.createElementVNode)('div',bc,[(0,d.createElementVNode)('button',{class:'gc-btn gc-btn-sm',onClick:a[6]||(a[6]=e=>n.$emit('quick-test',{name:'巨人',height:100,original:1.65}))},' 巨大娘 100m '),(0,d.createElementVNode)('button',{class:'gc-btn gc-btn-sm',onClick:a[7]||(a[7]=e=>n.$emit('quick-test',{name:'千米级',height:1e3,original:1.65}))},' 千米级 1km '),(0,d.createElementVNode)('button',{class:'gc-btn gc-btn-sm',onClick:a[8]||(a[8]=e=>n.$emit('quick-test',{name:'行星级',height:1e7,original:1.65}))},' 行星级 10Mm '),(0,d.createElementVNode)('button',{class:'gc-btn gc-btn-sm tiny',onClick:a[9]||(a[9]=e=>n.$emit('quick-test',{name:'小人',height:.01,original:1.65}))},' 小人 1cm '),(0,d.createElementVNode)('button',{class:'gc-btn gc-btn-sm tiny',onClick:a[10]||(a[10]=e=>n.$emit('quick-test',{name:'微型',height:.001,original:1.65}))},' 微型 1mm ')])]),(0,d.createCommentVNode)(' 实际损害录入 '),(0,d.createElementVNode)('div',fc,[a[41]||(a[41]=(0,d.createElementVNode)('h3',null,[(0,d.createElementVNode)('i',{class:'fa-solid fa-skull'}),(0,d.createTextVNode)(' 实际损害录入')],-1)),(0,d.createElementVNode)('div',hc,[a[40]||(a[40]=(0,d.createElementVNode)('div',{class:'gc-debug-hint damage'},[(0,d.createElementVNode)('i',{class:'fa-solid fa-info-circle'}),(0,d.createElementVNode)('span',null,'记录角色在剧情中造成的实际损害')],-1)),(0,d.createElementVNode)('div',xc,[a[28]||(a[28]=(0,d.createElementVNode)('label',null,'选择角色',-1)),(0,d.withDirectives)((0,d.createElementVNode)('select',{'onUpdate:modelValue':a[11]||(a[11]=e=>c.value=e),class:'gc-input'},[a[27]||(a[27]=(0,d.createElementVNode)('option',{value:''},'-- 选择角色 --',-1)),((0,d.openBlock)(!0),(0,d.createElementBlock)(d.Fragment,null,(0,d.renderList)(o.value,e=>((0,d.openBlock)(),(0,d.createElementBlock)('option',{key:e.name,value:e.name},(0,d.toDisplayString)(e.name),9,Bc))),128))],512),[[d.vModelSelect,c.value]])]),c.value?((0,d.openBlock)(),(0,d.createElementBlock)('div',Ec,[(0,d.createElementVNode)('div',kc,[a[30]||(a[30]=(0,d.createElementVNode)('label',null,'累计伤亡',-1)),(0,d.createElementVNode)('div',yc,[(0,d.withDirectives)((0,d.createElementVNode)('input',{'onUpdate:modelValue':a[12]||(a[12]=e=>i.value.totalCasualties=e),type:'number',class:'gc-input sm',placeholder:'0'},null,512),[[d.vModelText,i.value.totalCasualties,void 0,{number:!0}]]),a[29]||(a[29]=(0,d.createElementVNode)('span',{class:'gc-input-suffix'},'人',-1))])]),(0,d.createElementVNode)('div',wc,[a[32]||(a[32]=(0,d.createElementVNode)('label',null,'累计建筑损毁',-1)),(0,d.createElementVNode)('div',Vc,[(0,d.withDirectives)((0,d.createElementVNode)('input',{'onUpdate:modelValue':a[13]||(a[13]=e=>i.value.totalBuildings=e),type:'number',class:'gc-input sm',placeholder:'0'},null,512),[[d.vModelText,i.value.totalBuildings,void 0,{number:!0}]]),a[31]||(a[31]=(0,d.createElementVNode)('span',{class:'gc-input-suffix'},'栋',-1))])]),(0,d.createElementVNode)('div',Nc,[a[33]||(a[33]=(0,d.createElementVNode)('label',null,'最近行动描述',-1)),(0,d.withDirectives)((0,d.createElementVNode)('input',{'onUpdate:modelValue':a[14]||(a[14]=e=>i.value.lastAction=e),type:'text',class:'gc-input',placeholder:'如：踩下一脚'},null,512),[[d.vModelText,i.value.lastAction]])]),(0,d.createElementVNode)('div',Dc,[a[35]||(a[35]=(0,d.createElementVNode)('label',null,'最近行动伤亡',-1)),(0,d.createElementVNode)('div',Fc,[(0,d.withDirectives)((0,d.createElementVNode)('input',{'onUpdate:modelValue':a[15]||(a[15]=e=>i.value.lastActionCasualties=e),type:'number',class:'gc-input sm',placeholder:'0'},null,512),[[d.vModelText,i.value.lastActionCasualties,void 0,{number:!0}]]),a[34]||(a[34]=(0,d.createElementVNode)('span',{class:'gc-input-suffix'},'人',-1))])]),(0,d.createElementVNode)('div',Sc,[a[36]||(a[36]=(0,d.createElementVNode)('label',null,'备注',-1)),(0,d.withDirectives)((0,d.createElementVNode)('input',{'onUpdate:modelValue':a[16]||(a[16]=e=>i.value.note=e),type:'text',class:'gc-input',placeholder:'可选备注'},null,512),[[d.vModelText,i.value.note]])]),(0,d.createElementVNode)('div',{class:'gc-debug-btn-row'},[(0,d.createElementVNode)('button',{class:'gc-btn gc-btn-sm primary',onClick:s},[...a[37]||(a[37]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-save'},null,-1),(0,d.createTextVNode)(' 保存 ',-1)])]),(0,d.createElementVNode)('button',{class:'gc-btn gc-btn-sm danger',onClick:r},[...a[38]||(a[38]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-trash'},null,-1),(0,d.createTextVNode)(' 清除 ',-1)])])])])):((0,d.openBlock)(),(0,d.createElementBlock)('div',zc,[...a[39]||(a[39]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-exclamation-circle'},null,-1),(0,d.createElementVNode)('span',null,'请先选择一个巨大娘角色',-1)])]))])])]))}});s(799);const _c=(0,Ne.A)($c,[['__scopeId','data-v-075ee580']]),Tc={class:'gc-debug-logs-section'},jc={class:'gc-debug-logs-header'},Ic={class:'gc-debug-logs'},Wc={class:'gc-log-time'},Yc={class:'gc-log-msg'},Mc={key:0,class:'gc-debug-empty'},Pc=(0,d.defineComponent)({__name:'DebugLogsSection',props:{logs:{}},emits:['clear'],setup:e=>(n,a)=>((0,d.openBlock)(),(0,d.createElementBlock)('div',Tc,[(0,d.createElementVNode)('div',jc,[a[2]||(a[2]=(0,d.createElementVNode)('h3',null,[(0,d.createElementVNode)('i',{class:'fa-solid fa-terminal'}),(0,d.createTextVNode)(' 调试日志')],-1)),(0,d.createElementVNode)('button',{class:'gc-btn-link',onClick:a[0]||(a[0]=e=>n.$emit('clear')),title:'清空日志'},[...a[1]||(a[1]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-trash'},null,-1)])])]),(0,d.createElementVNode)('div',Ic,[((0,d.openBlock)(!0),(0,d.createElementBlock)(d.Fragment,null,(0,d.renderList)(e.logs,(e,n)=>((0,d.openBlock)(),(0,d.createElementBlock)('div',{key:n,class:(0,d.normalizeClass)(['gc-debug-log-item',e.level])},[(0,d.createElementVNode)('span',Wc,(0,d.toDisplayString)(e.time),1),(0,d.createElementVNode)('span',Yc,(0,d.toDisplayString)(e.message),1)],2))),128)),e.logs.length?(0,d.createCommentVNode)('v-if',!0):((0,d.openBlock)(),(0,d.createElementBlock)('div',Mc,[...a[3]||(a[3]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-terminal'},null,-1),(0,d.createElementVNode)('p',null,'暂无日志',-1),(0,d.createElementVNode)('small',null,'开启调试模式后操作会记录在这里',-1)])]))])]))});s(152);const Oc=(0,Ne.A)(Pc,[['__scopeId','data-v-4e1480de']]),Uc={class:'gc-debug-raw-section'},Rc={class:'gc-debug-section'},Gc={class:'gc-debug-json'},qc={class:'gc-debug-section'},Lc={class:'gc-debug-json'},Qc=(0,d.defineComponent)({__name:'DebugRawSection',props:{mvuInfo:{},settings:{}},setup:e=>(n,a)=>((0,d.openBlock)(),(0,d.createElementBlock)('div',Uc,[(0,d.createElementVNode)('div',Rc,[a[0]||(a[0]=(0,d.createElementVNode)('h3',null,[(0,d.createElementVNode)('i',{class:'fa-solid fa-database'}),(0,d.createTextVNode)(' MVU 原始数据')],-1)),(0,d.createElementVNode)('pre',Gc,(0,d.toDisplayString)(JSON.stringify(e.mvuInfo.messageVariables,null,2)),1)]),(0,d.createElementVNode)('div',qc,[a[1]||(a[1]=(0,d.createElementVNode)('h3',null,[(0,d.createElementVNode)('i',{class:'fa-solid fa-cog'}),(0,d.createTextVNode)(' 当前设置')],-1)),(0,d.createElementVNode)('pre',Lc,(0,d.toDisplayString)(JSON.stringify(e.settings,null,2)),1)])]))});s(534);const Hc=(0,Ne.A)(Qc,[['__scopeId','data-v-22b96ac2']]),Zc={class:'gc-debug-content'},Xc={class:'gc-debug-tabs'},Jc={key:0,class:'gc-debug-tab-badge'},Kc={key:0,class:'gc-debug-tab-badge'},ei={key:0,class:'gc-debug-tab-content'},ni={key:1,class:'gc-debug-tab-content'},ai={key:2,class:'gc-debug-tab-content'},ti={key:3,class:'gc-debug-tab-content'},ci={key:4,class:'gc-debug-tab-content'},ii=(0,d.defineComponent)({__name:'DebugPanel',props:{visible:{type:Boolean},mvuInfo:{},logs:{},settings:{},characters:{},testName:{},testHeight:{},testOriginal:{}},emits:['close','refresh','clear-logs','update:testName','update:testHeight','update:testOriginal','inject-test','clear-test','quick-test','save-damage','clear-damage'],setup(e){const n=e,a=(0,d.ref)('status'),t=(0,d.computed)(()=>n.mvuInfo.messageVariables?.characterDetails?.length||0),c=(0,d.computed)(()=>(n.mvuInfo.messageVariables?.characterDetails||[]).filter(e=>'未知'!==e.类型));return(n,i)=>((0,d.openBlock)(),(0,d.createBlock)((0,d.unref)(Me),{visible:e.visible,title:'MVU 调试',icon:'fa-solid fa-bug','panel-class':'gc-debug-panel',onClose:i[15]||(i[15]=e=>n.$emit('close'))},{'header-actions':(0,d.withCtx)(()=>[(0,d.createElementVNode)('button',{class:'gc-btn-link',onClick:i[0]||(i[0]=e=>n.$emit('refresh')),title:'刷新状态'},[...i[16]||(i[16]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-rotate'},null,-1)])])]),default:(0,d.withCtx)(()=>[(0,d.createElementVNode)('div',Zc,[(0,d.createCommentVNode)(' 选项卡导航 '),(0,d.createElementVNode)('div',Xc,[(0,d.createElementVNode)('button',{class:(0,d.normalizeClass)(['gc-debug-tab',{active:'status'===a.value}]),onClick:i[1]||(i[1]=e=>a.value='status')},[...i[17]||(i[17]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-satellite-dish'},null,-1),(0,d.createTextVNode)(' 状态 ',-1)])],2),(0,d.createElementVNode)('button',{class:(0,d.normalizeClass)(['gc-debug-tab',{active:'characters'===a.value}]),onClick:i[2]||(i[2]=e=>a.value='characters')},[i[18]||(i[18]=(0,d.createElementVNode)('i',{class:'fa-solid fa-users'},null,-1)),i[19]||(i[19]=(0,d.createTextVNode)(' 角色 ',-1)),t.value?((0,d.openBlock)(),(0,d.createElementBlock)('span',Jc,(0,d.toDisplayString)(t.value),1)):(0,d.createCommentVNode)('v-if',!0)],2),(0,d.createElementVNode)('button',{class:(0,d.normalizeClass)(['gc-debug-tab',{active:'test'===a.value}]),onClick:i[3]||(i[3]=e=>a.value='test')},[...i[20]||(i[20]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-flask'},null,-1),(0,d.createTextVNode)(' 测试 ',-1)])],2),(0,d.createElementVNode)('button',{class:(0,d.normalizeClass)(['gc-debug-tab',{active:'logs'===a.value}]),onClick:i[4]||(i[4]=e=>a.value='logs')},[i[21]||(i[21]=(0,d.createElementVNode)('i',{class:'fa-solid fa-terminal'},null,-1)),i[22]||(i[22]=(0,d.createTextVNode)(' 日志 ',-1)),e.logs.length?((0,d.openBlock)(),(0,d.createElementBlock)('span',Kc,(0,d.toDisplayString)(e.logs.length),1)):(0,d.createCommentVNode)('v-if',!0)],2),(0,d.createElementVNode)('button',{class:(0,d.normalizeClass)(['gc-debug-tab',{active:'raw'===a.value}]),onClick:i[5]||(i[5]=e=>a.value='raw')},[...i[23]||(i[23]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-database'},null,-1),(0,d.createTextVNode)(' 原始 ',-1)])],2)]),(0,d.createCommentVNode)(' 状态选项卡 '),'status'===a.value?((0,d.openBlock)(),(0,d.createElementBlock)('div',ei,[(0,d.createVNode)(xt,{'mvu-info':e.mvuInfo},null,8,['mvu-info'])])):(0,d.createCommentVNode)('v-if',!0),(0,d.createCommentVNode)(' 角色选项卡 '),'characters'===a.value?((0,d.openBlock)(),(0,d.createElementBlock)('div',ni,[(0,d.createVNode)(tc,{characters:c.value},null,8,['characters'])])):(0,d.createCommentVNode)('v-if',!0),(0,d.createCommentVNode)(' 测试选项卡 '),'test'===a.value?((0,d.openBlock)(),(0,d.createElementBlock)('div',ai,[(0,d.createVNode)(_c,{'test-name':e.testName,'test-height':e.testHeight,'test-original':e.testOriginal,characters:e.characters,'onUpdate:testName':i[6]||(i[6]=e=>n.$emit('update:testName',e)),'onUpdate:testHeight':i[7]||(i[7]=e=>n.$emit('update:testHeight',e)),'onUpdate:testOriginal':i[8]||(i[8]=e=>n.$emit('update:testOriginal',e)),onInject:i[9]||(i[9]=e=>n.$emit('inject-test')),onClear:i[10]||(i[10]=e=>n.$emit('clear-test',e)),onQuickTest:i[11]||(i[11]=e=>n.$emit('quick-test',e)),onSaveDamage:i[12]||(i[12]=e=>n.$emit('save-damage',e)),onClearDamage:i[13]||(i[13]=e=>n.$emit('clear-damage',e))},null,8,['test-name','test-height','test-original','characters'])])):(0,d.createCommentVNode)('v-if',!0),(0,d.createCommentVNode)(' 日志选项卡 '),'logs'===a.value?((0,d.openBlock)(),(0,d.createElementBlock)('div',ti,[(0,d.createVNode)(Oc,{logs:e.logs,onClear:i[14]||(i[14]=e=>n.$emit('clear-logs'))},null,8,['logs'])])):(0,d.createCommentVNode)('v-if',!0),(0,d.createCommentVNode)(' 原始数据选项卡 '),'raw'===a.value?((0,d.openBlock)(),(0,d.createElementBlock)('div',ci,[(0,d.createVNode)(Hc,{'mvu-info':e.mvuInfo,settings:e.settings},null,8,['mvu-info','settings'])])):(0,d.createCommentVNode)('v-if',!0)])]),_:1},8,['visible']))}});s(821);const oi=(0,Ne.A)(ii,[['__scopeId','data-v-18dd7d1a']]),si={class:'gc-extensions'},ri={class:'gc-extension-list'},li={class:'gc-extension-item core'},di={class:'gc-extension-info'},gi={class:'gc-extension-name'},Ai={class:'gc-extension-info'},pi={class:'gc-extension-name'},mi={class:'gc-extension-toggle'},Ci={key:0,class:'gc-expand-icon'},ui={key:0,class:'gc-extension-settings'},vi={class:'gc-setting-item'},bi=['value'],fi=['value'],hi={class:'gc-setting-toggle'},xi={class:'gc-setting-toggle'},Bi={class:'gc-setting-toggle'},Ei={class:'gc-setting-toggle'},ki={key:0,class:'gc-damage-preview'},yi={class:'gc-damage-preview-content'},wi={class:'gc-damage-stat'},Vi={class:'gc-damage-value'},Ni={class:'gc-damage-stat'},Di={class:'gc-damage-value casualties'},Fi={class:'gc-damage-stat'},Si={class:'gc-damage-value buildings'},zi=(0,d.defineComponent)({__name:'ExtensionsPanel',props:{settings:{},damageSummary:{},damageScenarios:{}},emits:['toggle-damage','update:setting'],setup(e){const n=e,a=(0,d.ref)(!1),t=(0,d.ref)(!0);(0,d.watch)(()=>n.settings.enableDamageCalculation,e=>{e&&(t.value=!0)});const c=e=>{if(!e)return'-';const n=e=>e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(1)}K`:e.toString();return`${n(e.min)} - ${n(e.max)}`};return(n,i)=>((0,d.openBlock)(),(0,d.createElementBlock)('div',si,[(0,d.createElementVNode)('div',{class:'gc-section-header clickable',onClick:i[0]||(i[0]=e=>a.value=!a.value)},[i[9]||(i[9]=(0,d.createElementVNode)('div',{class:'gc-header-left'},[(0,d.createElementVNode)('i',{class:'fa-solid fa-puzzle-piece'}),(0,d.createElementVNode)('span',null,'扩展系统')],-1)),(0,d.createElementVNode)('i',{class:(0,d.normalizeClass)(['fa-solid gc-chevron',a.value?'fa-chevron-right':'fa-chevron-down'])},null,2)]),(0,d.createVNode)(d.Transition,{name:'slide',persisted:''},{default:(0,d.withCtx)(()=>[(0,d.withDirectives)((0,d.createElementVNode)('div',ri,[(0,d.createCommentVNode)(' 核心计算（始终开启） '),(0,d.createElementVNode)('div',li,[i[13]||(i[13]=(0,d.createElementVNode)('div',{class:'gc-extension-icon'},[(0,d.createElementVNode)('i',{class:'fa-solid fa-calculator'})],-1)),(0,d.createElementVNode)('div',di,[(0,d.createElementVNode)('div',gi,[i[11]||(i[11]=(0,d.createTextVNode)(' 基础计算 ',-1)),(0,d.createVNode)((0,d.unref)(Oe),{size:'sm'},{default:(0,d.withCtx)(()=>[...i[10]||(i[10]=[(0,d.createTextVNode)('核心',-1)])]),_:1})]),i[12]||(i[12]=(0,d.createElementVNode)('div',{class:'gc-extension-desc'},'身体数据计算、相对尺寸参照',-1))]),i[14]||(i[14]=(0,d.createElementVNode)('div',{class:'gc-extension-toggle'},[(0,d.createElementVNode)('span',{class:'gc-always-on'},'始终开启')],-1))]),(0,d.createCommentVNode)(' 损害计算（可开关） '),(0,d.createElementVNode)('div',{class:(0,d.normalizeClass)(['gc-extension-item',{active:e.settings.enableDamageCalculation,clickable:e.settings.enableDamageCalculation}]),onClick:i[3]||(i[3]=n=>e.settings.enableDamageCalculation?t.value=!t.value:null)},[i[18]||(i[18]=(0,d.createElementVNode)('div',{class:'gc-extension-icon damage'},[(0,d.createElementVNode)('i',{class:'fa-solid fa-explosion'})],-1)),(0,d.createElementVNode)('div',Ai,[(0,d.createElementVNode)('div',pi,[i[16]||(i[16]=(0,d.createTextVNode)(' 损害计算 ',-1)),e.settings.enableDamageCalculation?((0,d.openBlock)(),(0,d.createBlock)((0,d.unref)(Oe),{key:0,variant:'success',size:'sm'},{default:(0,d.withCtx)(()=>[...i[15]||(i[15]=[(0,d.createTextVNode)('已启用',-1)])]),_:1})):(0,d.createCommentVNode)('v-if',!0)]),i[17]||(i[17]=(0,d.createElementVNode)('div',{class:'gc-extension-desc'},'计算巨大娘行动可能造成的破坏',-1))]),(0,d.createElementVNode)('div',mi,[(0,d.createElementVNode)('div',{onClick:i[2]||(i[2]=(0,d.withModifiers)(()=>{},['stop'])),class:'gc-switch-wrapper'},[(0,d.createVNode)((0,d.unref)(De),{'model-value':e.settings.enableDamageCalculation,'onUpdate:modelValue':i[1]||(i[1]=e=>n.$emit('toggle-damage',e))},null,8,['model-value'])]),e.settings.enableDamageCalculation?((0,d.openBlock)(),(0,d.createElementBlock)('div',Ci,[(0,d.createElementVNode)('i',{class:(0,d.normalizeClass)(['fa-solid',t.value?'fa-chevron-up':'fa-chevron-down'])},null,2)])):(0,d.createCommentVNode)('v-if',!0)])],2),(0,d.createCommentVNode)(' 损害计算设置 '),(0,d.createVNode)(d.Transition,{name:'slide'},{default:(0,d.withCtx)(()=>[e.settings.enableDamageCalculation&&t.value?((0,d.openBlock)(),(0,d.createElementBlock)('div',ui,[(0,d.createElementVNode)('div',vi,[i[19]||(i[19]=(0,d.createElementVNode)('label',null,'默认场景',-1)),(0,d.createElementVNode)('select',{class:'gc-input',value:e.settings.damageScenario,onChange:i[4]||(i[4]=e=>n.$emit('update:setting','damageScenario',e.target.value))},[((0,d.openBlock)(!0),(0,d.createElementBlock)(d.Fragment,null,(0,d.renderList)(e.damageScenarios,e=>((0,d.openBlock)(),(0,d.createElementBlock)('option',{key:e.id,value:e.id},(0,d.toDisplayString)(e.name)+' ('+(0,d.toDisplayString)(e.density.toLocaleString())+'人/km²) ',9,fi))),128))],40,bi)]),(0,d.createElementVNode)('div',hi,[i[20]||(i[20]=(0,d.createElementVNode)('label',null,[(0,d.createElementVNode)('span',null,'注入损害提示词'),(0,d.createElementVNode)('small',null,'在提示词中包含损害计算结果')],-1)),(0,d.createVNode)((0,d.unref)(De),{size:'sm','model-value':e.settings.injectDamagePrompt,'onUpdate:modelValue':i[5]||(i[5]=e=>n.$emit('update:setting','injectDamagePrompt',e))},null,8,['model-value'])]),(0,d.createElementVNode)('div',xi,[i[21]||(i[21]=(0,d.createElementVNode)('label',null,[(0,d.createElementVNode)('span',null,'显示特殊效应'),(0,d.createElementVNode)('small',null,'地震、海啸等物理效应')],-1)),(0,d.createVNode)((0,d.unref)(De),{size:'sm','model-value':e.settings.showSpecialEffects,'onUpdate:modelValue':i[6]||(i[6]=e=>n.$emit('update:setting','showSpecialEffects',e))},null,8,['model-value'])]),(0,d.createElementVNode)('div',Bi,[i[22]||(i[22]=(0,d.createElementVNode)('label',null,[(0,d.createElementVNode)('span',null,'按角色显示损害'),(0,d.createElementVNode)('small',null,'在角色卡片中显示损害数据')],-1)),(0,d.createVNode)((0,d.unref)(De),{size:'sm','model-value':e.settings.showDamagePerCharacter,'onUpdate:modelValue':i[7]||(i[7]=e=>n.$emit('update:setting','showDamagePerCharacter',e))},null,8,['model-value'])]),(0,d.createElementVNode)('div',Ei,[i[23]||(i[23]=(0,d.createElementVNode)('label',null,[(0,d.createElementVNode)('span',null,'显示损害汇总'),(0,d.createElementVNode)('small',null,'所有角色的损害统计')],-1)),(0,d.createVNode)((0,d.unref)(De),{size:'sm','model-value':e.settings.showDamageSummary,'onUpdate:modelValue':i[8]||(i[8]=e=>n.$emit('update:setting','showDamageSummary',e))},null,8,['model-value'])]),(0,d.createCommentVNode)(' 损害预览 '),e.damageSummary?((0,d.openBlock)(),(0,d.createElementBlock)('div',ki,[i[27]||(i[27]=(0,d.createElementVNode)('div',{class:'gc-damage-preview-header'},[(0,d.createElementVNode)('i',{class:'fa-solid fa-chart-bar'}),(0,d.createElementVNode)('span',null,'当前汇总')],-1)),(0,d.createElementVNode)('div',yi,[(0,d.createElementVNode)('div',wi,[i[24]||(i[24]=(0,d.createElementVNode)('span',{class:'gc-damage-label'},'巨大娘数量',-1)),(0,d.createElementVNode)('span',Vi,(0,d.toDisplayString)(e.damageSummary.giantCount),1)]),(0,d.createElementVNode)('div',Ni,[i[25]||(i[25]=(0,d.createElementVNode)('span',{class:'gc-damage-label'},'预估单步伤亡',-1)),(0,d.createElementVNode)('span',Di,(0,d.toDisplayString)(c(e.damageSummary.totalCasualties)),1)]),(0,d.createElementVNode)('div',Fi,[i[26]||(i[26]=(0,d.createElementVNode)('span',{class:'gc-damage-label'},'预估建筑损毁',-1)),(0,d.createElementVNode)('span',Si,(0,d.toDisplayString)(c(e.damageSummary.totalBuildings)),1)])])])):(0,d.createCommentVNode)('v-if',!0)])):(0,d.createCommentVNode)('v-if',!0)]),_:1})],512),[[d.vShow,!a.value]])]),_:1})]))}});s(587);const $i=(0,Ne.A)(zi,[['__scopeId','data-v-4e3af112']]),_i={class:'gc-result-header'},Ti={class:'gc-result-icon-wrapper'},ji={class:'gc-result-title'},Ii={class:'gc-result-height'},Wi={class:'gc-result-meta'},Yi={class:'gc-multiplier'},Mi={class:'gc-result-body'},Pi={class:'gc-level-desc'},Oi={class:'gc-result-desc'},Ui=(0,d.defineComponent)({__name:'Result',props:{result:{},isGiant:{type:Boolean}},emits:['close'],setup:e=>(n,a)=>((0,d.openBlock)(),(0,d.createElementBlock)('div',{class:(0,d.normalizeClass)(['gc-result',e.isGiant?'giant':'tiny'])},[(0,d.createElementVNode)('div',_i,[(0,d.createElementVNode)('div',Ti,[(0,d.createElementVNode)('i',{class:(0,d.normalizeClass)(['fa-solid',e.isGiant?'fa-ruler-vertical':'fa-microscope'])},null,2)]),(0,d.createElementVNode)('div',ji,[(0,d.createElementVNode)('div',Ii,(0,d.toDisplayString)(e.result.当前身高_格式化),1),(0,d.createElementVNode)('div',Wi,[(0,d.createElementVNode)('span',{class:(0,d.normalizeClass)(['gc-badge',e.isGiant?'giant':'tiny'])},(0,d.toDisplayString)(e.result.级别),3),(0,d.createElementVNode)('span',Yi,[a[1]||(a[1]=(0,d.createElementVNode)('i',{class:'fa-solid fa-xmark'},null,-1)),(0,d.createTextVNode)(' '+(0,d.toDisplayString)(e.result.倍率),1)])])]),(0,d.createElementVNode)('button',{class:'gc-result-close',onClick:a[0]||(a[0]=e=>n.$emit('close')),title:'关闭'},[...a[2]||(a[2]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-times'},null,-1)])])]),(0,d.createElementVNode)('div',Mi,[(0,d.createElementVNode)('div',Pi,[a[3]||(a[3]=(0,d.createElementVNode)('i',{class:'fa-solid fa-quote-left'},null,-1)),(0,d.createTextVNode)(' '+(0,d.toDisplayString)(e.result.级别描述),1)]),(0,d.createElementVNode)('div',Oi,(0,d.toDisplayString)(e.result.描述),1)])],2))});s(526);const Ri=(0,Ne.A)(Ui,[['__scopeId','data-v-5651f202']]),Gi={class:'gc-calc-section'},qi={class:'gc-calc-box'},Li={class:'gc-input-wrapper'},Qi={class:'gc-input-wrapper'},Hi=(0,d.defineComponent)({__name:'QuickCalc',setup(e){const{calcHeight:n,calcOriginal:a,calcResult:t,isGiant:c,doCalculate:i,clearCalcResult:o}=function(){const e=(0,d.ref)(void 0),n=(0,d.ref)(1.65),a=(0,d.ref)(null),t=(0,d.ref)(!0),c=(0,d.computed)(()=>null!==a.value);return{calcHeight:e,calcOriginal:n,calcResult:a,isGiant:t,hasResult:c,doCalculate:()=>{if(!e.value||e.value<=0)return void toastr.warning('请输入有效的身高');const c=e.value/n.value;t.value=c>=1,a.value=c>=1?N(e.value,n.value):D(e.value,n.value)},clearCalcResult:()=>{a.value=null},resetCalculator:()=>{e.value=void 0,n.value=1.65,a.value=null,t.value=!0}}}();return(e,s)=>((0,d.openBlock)(),(0,d.createElementBlock)('div',Gi,[(0,d.createElementVNode)('div',qi,[(0,d.createElementVNode)('div',Li,[(0,d.withDirectives)((0,d.createElementVNode)('input',{'onUpdate:modelValue':s[0]||(s[0]=e=>(0,d.isRef)(n)?n.value=e:null),type:'number',placeholder:'身高(m)',class:'gc-input',onKeypress:s[1]||(s[1]=(0,d.withKeys)((...e)=>(0,d.unref)(i)&&(0,d.unref)(i)(...e),['enter']))},null,544),[[d.vModelText,(0,d.unref)(n),void 0,{number:!0}]]),s[4]||(s[4]=(0,d.createElementVNode)('span',{class:'gc-unit'},'m',-1))]),s[7]||(s[7]=(0,d.createElementVNode)('span',{class:'gc-operator'},'/',-1)),(0,d.createElementVNode)('div',Qi,[(0,d.withDirectives)((0,d.createElementVNode)('input',{'onUpdate:modelValue':s[2]||(s[2]=e=>(0,d.isRef)(a)?a.value=e:null),type:'number',placeholder:'原高(m)',class:'gc-input'},null,512),[[d.vModelText,(0,d.unref)(a),void 0,{number:!0}]]),s[5]||(s[5]=(0,d.createElementVNode)('span',{class:'gc-unit'},'m',-1))]),(0,d.createElementVNode)('button',{class:'gc-btn-icon primary',onClick:s[3]||(s[3]=(...e)=>(0,d.unref)(i)&&(0,d.unref)(i)(...e)),title:'计算'},[...s[6]||(s[6]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-calculator'},null,-1)])])]),(0,d.createCommentVNode)(' 计算结果 '),(0,d.createVNode)(d.Transition,{name:'fade'},{default:(0,d.withCtx)(()=>[(0,d.unref)(t)?((0,d.openBlock)(),(0,d.createBlock)(Ri,{key:0,result:(0,d.unref)(t),'is-giant':(0,d.unref)(c),onClose:(0,d.unref)(o)},null,8,['result','is-giant','onClose'])):(0,d.createCommentVNode)('v-if',!0)]),_:1})]))}});s(175);const Zi=(0,Ne.A)(Hi,[['__scopeId','data-v-361696cc']]),Xi={class:'gc-char-header'},Ji={class:'gc-char-info'},Ki={class:'gc-char-name'},eo={class:'gc-char-stats'},no={key:0,class:'gc-stat-height'},ao={key:1,class:'gc-stat-unknown'},to={key:2,class:'gc-stat-multiplier'},co=['title'],io={key:0,class:'gc-char-details'},oo={class:'gc-char-details-grid'},so={class:'gc-detail-section'},ro={class:'gc-detail-row'},lo={class:'gc-detail-value'},go={class:'gc-detail-row'},Ao={class:'gc-detail-value'},po={class:'gc-detail-row'},mo={class:'gc-detail-value'},Co={class:'gc-detail-row'},uo={class:'gc-detail-value'},vo={key:0,class:'gc-detail-section'},bo={key:0,class:'gc-detail-row'},fo={class:'gc-detail-label'},ho={class:'gc-detail-value'},xo={key:1,class:'gc-detail-section'},Bo={key:0,class:'gc-detail-row'},Eo={class:'gc-detail-label'},ko={class:'gc-detail-value'},yo={key:2,class:'gc-detail-section'},wo={key:0,class:'gc-detail-row'},Vo={class:'gc-detail-label'},No={class:'gc-detail-value'},Do={key:3,class:'gc-detail-section full-width'},Fo={class:'gc-history-list'},So={class:'gc-history-time'},zo={class:'gc-history-content'},$o={class:'gc-history-height'},_o={key:0,class:'gc-history-reason'},To=(0,d.defineComponent)({__name:'CharacterCard',props:{name:{},data:{},showDamage:{type:Boolean},expanded:{type:Boolean}},emits:['toggle'],setup(e,{emit:n}){const a=e,t=n,c=(0,d.computed)(()=>a.expanded),i=()=>{t('toggle',a.name)},o=(0,d.computed)(()=>a.data.calcData?a.data.calcData.倍率>=1?'giant':'tiny':''),s=(0,d.computed)(()=>a.data.calcData?a.data.calcData.倍率>=1?'fa-solid fa-shoe-prints':'fa-solid fa-bug':'fa-solid fa-user'),r=(0,d.computed)(()=>a.data.calcData?a.data.calcData.倍率>=1?'giant':'tiny':''),l=['眼睛高度','足长','手掌长','乳房高度'],g=['普通成年人','轿车长度','十层楼房'],A=['身高','足长','手掌长'];return(n,a)=>((0,d.openBlock)(),(0,d.createElementBlock)('div',{class:(0,d.normalizeClass)(['gc-char-item',{expanded:c.value,'has-damage':e.showDamage&&e.data.damageData}]),onClick:i},[(0,d.createElementVNode)('div',Xi,[(0,d.createElementVNode)('div',{class:(0,d.normalizeClass)(['gc-char-avatar',o.value])},[(0,d.createElementVNode)('i',{class:(0,d.normalizeClass)(s.value)},null,2)],2),(0,d.createElementVNode)('div',Ji,[(0,d.createElementVNode)('div',Ki,[(0,d.createTextVNode)((0,d.toDisplayString)(e.name)+' ',1),a[0]||(a[0]=(0,d.createElementVNode)('i',{class:'fa-solid fa-chevron-right gc-char-expand-icon'},null,-1))]),(0,d.createElementVNode)('div',eo,[e.data.calcData?((0,d.openBlock)(),(0,d.createElementBlock)('span',no,(0,d.toDisplayString)(e.data.calcData.当前身高_格式化),1)):((0,d.openBlock)(),(0,d.createElementBlock)('span',ao,'未设置')),e.data.calcData?((0,d.openBlock)(),(0,d.createElementBlock)('span',to,' ×'+(0,d.toDisplayString)(e.data.calcData.倍率),1)):(0,d.createCommentVNode)('v-if',!0),(0,d.createCommentVNode)(' 损害等级指示器 '),e.showDamage&&e.data.damageData?((0,d.openBlock)(),(0,d.createElementBlock)('span',{key:3,class:'gc-damage-indicator',title:`破坏力: ${e.data.damageData.破坏力等级}`},[a[1]||(a[1]=(0,d.createElementVNode)('i',{class:'fa-solid fa-explosion'},null,-1)),(0,d.createTextVNode)(' '+(0,d.toDisplayString)(e.data.damageData.破坏力等级),1)],8,co)):(0,d.createCommentVNode)('v-if',!0)])]),e.data.calcData?((0,d.openBlock)(),(0,d.createElementBlock)('span',{key:0,class:(0,d.normalizeClass)(['gc-level-badge',r.value])},(0,d.toDisplayString)(e.data.calcData.级别),3)):(0,d.createCommentVNode)('v-if',!0)]),(0,d.createCommentVNode)(' 展开详情 '),c.value&&e.data.calcData?((0,d.openBlock)(),(0,d.createElementBlock)('div',io,[(0,d.createElementVNode)('div',oo,[(0,d.createCommentVNode)(' 基础数据 '),(0,d.createElementVNode)('div',so,[a[6]||(a[6]=(0,d.createElementVNode)('div',{class:'gc-detail-section-title'},[(0,d.createElementVNode)('i',{class:'fa-solid fa-ruler-combined'}),(0,d.createTextVNode)(' 基础数据 ')],-1)),(0,d.createElementVNode)('div',ro,[a[2]||(a[2]=(0,d.createElementVNode)('span',{class:'gc-detail-label'},'原身高',-1)),(0,d.createElementVNode)('span',lo,(0,d.toDisplayString)(e.data.calcData.原身高)+'m',1)]),(0,d.createElementVNode)('div',go,[a[3]||(a[3]=(0,d.createElementVNode)('span',{class:'gc-detail-label'},'当前身高',-1)),(0,d.createElementVNode)('span',Ao,(0,d.toDisplayString)(e.data.calcData.当前身高_格式化),1)]),(0,d.createElementVNode)('div',po,[a[4]||(a[4]=(0,d.createElementVNode)('span',{class:'gc-detail-label'},'倍率',-1)),(0,d.createElementVNode)('span',mo,'×'+(0,d.toDisplayString)(e.data.calcData.倍率),1)]),(0,d.createElementVNode)('div',Co,[a[5]||(a[5]=(0,d.createElementVNode)('span',{class:'gc-detail-label'},'级别',-1)),(0,d.createElementVNode)('span',uo,(0,d.toDisplayString)(e.data.calcData.级别),1)])]),(0,d.createCommentVNode)(' 身体部位（巨大娘） '),'身体部位_格式化'in e.data.calcData?((0,d.openBlock)(),(0,d.createElementBlock)('div',vo,[a[7]||(a[7]=(0,d.createElementVNode)('div',{class:'gc-detail-section-title'},[(0,d.createElementVNode)('i',{class:'fa-solid fa-person'}),(0,d.createTextVNode)(' 关键部位 ')],-1)),((0,d.openBlock)(),(0,d.createElementBlock)(d.Fragment,null,(0,d.renderList)(l,n=>((0,d.openBlock)(),(0,d.createElementBlock)(d.Fragment,{key:n},[e.data.calcData.身体部位_格式化[n]?((0,d.openBlock)(),(0,d.createElementBlock)('div',bo,[(0,d.createElementVNode)('span',fo,(0,d.toDisplayString)(n),1),(0,d.createElementVNode)('span',ho,(0,d.toDisplayString)(e.data.calcData.身体部位_格式化[n]),1)])):(0,d.createCommentVNode)('v-if',!0)],64))),64))])):(0,d.createCommentVNode)('v-if',!0),(0,d.createCommentVNode)(' 眼中的世界（巨大娘） '),'眼中的世界_格式化'in e.data.calcData?((0,d.openBlock)(),(0,d.createElementBlock)('div',xo,[a[8]||(a[8]=(0,d.createElementVNode)('div',{class:'gc-detail-section-title'},[(0,d.createElementVNode)('i',{class:'fa-solid fa-eye'}),(0,d.createTextVNode)(' 她眼中的世界 ')],-1)),((0,d.openBlock)(),(0,d.createElementBlock)(d.Fragment,null,(0,d.renderList)(g,n=>((0,d.openBlock)(),(0,d.createElementBlock)(d.Fragment,{key:n},[e.data.calcData.眼中的世界_格式化[n]?((0,d.openBlock)(),(0,d.createElementBlock)('div',Bo,[(0,d.createElementVNode)('span',Eo,(0,d.toDisplayString)(n),1),(0,d.createElementVNode)('span',ko,(0,d.toDisplayString)(e.data.calcData.眼中的世界_格式化[n]),1)])):(0,d.createCommentVNode)('v-if',!0)],64))),64))])):(0,d.createCommentVNode)('v-if',!0),(0,d.createCommentVNode)(' 眼中的巨大娘（小人） '),'眼中的巨大娘_格式化'in e.data.calcData?((0,d.openBlock)(),(0,d.createElementBlock)('div',yo,[a[9]||(a[9]=(0,d.createElementVNode)('div',{class:'gc-detail-section-title'},[(0,d.createElementVNode)('i',{class:'fa-solid fa-eye'}),(0,d.createTextVNode)(' 眼中的巨大娘 ')],-1)),((0,d.openBlock)(),(0,d.createElementBlock)(d.Fragment,null,(0,d.renderList)(A,n=>((0,d.openBlock)(),(0,d.createElementBlock)(d.Fragment,{key:n},[e.data.calcData.眼中的巨大娘_格式化[n]?((0,d.openBlock)(),(0,d.createElementBlock)('div',wo,[(0,d.createElementVNode)('span',Vo,(0,d.toDisplayString)(n),1),(0,d.createElementVNode)('span',No,(0,d.toDisplayString)(e.data.calcData.眼中的巨大娘_格式化[n]),1)])):(0,d.createCommentVNode)('v-if',!0)],64))),64))])):(0,d.createCommentVNode)('v-if',!0),(0,d.createCommentVNode)(' 损害数据插槽 '),(0,d.renderSlot)(n.$slots,'damage',{damageData:e.data.damageData}),(0,d.createCommentVNode)(' 实际损害插槽 '),(0,d.renderSlot)(n.$slots,'actual-damage',{actualDamage:e.data.actualDamage}),(0,d.createCommentVNode)(' 身高历史 '),e.data.history&&e.data.history.length>0?((0,d.openBlock)(),(0,d.createElementBlock)('div',Do,[a[10]||(a[10]=(0,d.createElementVNode)('div',{class:'gc-detail-section-title'},[(0,d.createElementVNode)('i',{class:'fa-solid fa-clock-rotate-left'}),(0,d.createTextVNode)(' 最近变化 ')],-1)),(0,d.createElementVNode)('div',Fo,[((0,d.openBlock)(!0),(0,d.createElementBlock)(d.Fragment,null,(0,d.renderList)(e.data.history.slice(-3).reverse(),(e,n)=>{return(0,d.openBlock)(),(0,d.createElementBlock)('div',{key:n,class:'gc-history-item'},[(0,d.createElementVNode)('div',So,(0,d.toDisplayString)((a=e.time,a?a.includes(' ')?a.split(' ')[1]:a:'')),1),(0,d.createElementVNode)('div',zo,[(0,d.createElementVNode)('span',$o,(0,d.toDisplayString)(e.heightFormatted),1),e.reason?((0,d.openBlock)(),(0,d.createElementBlock)('span',_o,(0,d.toDisplayString)(e.reason),1)):(0,d.createCommentVNode)('v-if',!0)])]);var a}),128))])])):(0,d.createCommentVNode)('v-if',!0)])])):(0,d.createCommentVNode)('v-if',!0)],2))}});s(372);const jo=(0,Ne.A)(To,[['__scopeId','data-v-f94d7aac']]),Io={class:'gc-char-list'},Wo={key:0,class:'gc-empty'},Yo={key:0,class:'gc-detail-section full-width gc-damage-section'},Mo={class:'gc-detail-section-title'},Po={class:'gc-damage-level-badge'},Oo={class:'gc-damage-grid'},Uo={class:'gc-damage-item'},Ro={class:'gc-damage-item-value'},Go={class:'gc-damage-item'},qo={class:'gc-damage-item-value casualties'},Lo={class:'gc-damage-item'},Qo={class:'gc-damage-item-value buildings'},Ho={key:0,class:'gc-damage-item'},Zo={class:'gc-damage-item-value'},Xo={key:0,class:'gc-macro-damage'},Jo={class:'gc-macro-damage-title'},Ko={class:'gc-macro-damage-list'},es={key:0},ns={key:1},as={key:2},ts={key:3},cs={key:4},is={key:5},os={key:1,class:'gc-special-effects'},ss={class:'gc-special-effects-list'},rs={key:0,class:'gc-effect-more'},ls={key:0,class:'gc-detail-section full-width gc-actual-damage-section'},ds={class:'gc-actual-damage-grid'},gs={key:0,class:'gc-actual-damage-item'},As={class:'gc-actual-damage-item-value casualties'},ps={key:1,class:'gc-actual-damage-item'},ms={class:'gc-actual-damage-item-value buildings'},Cs={key:2,class:'gc-actual-damage-item'},us={class:'gc-actual-damage-item-value cities'},vs={key:0,class:'gc-last-action'},bs={class:'gc-last-action-content'},fs={class:'gc-last-action-desc'},hs={key:0,class:'gc-last-action-casualties'},xs={key:1,class:'gc-major-events'},Bs={class:'gc-major-events-title'},Es={class:'gc-major-events-list'},ks={class:'gc-major-event-desc'},ys={key:0,class:'gc-major-event-casualties'},ws={key:2,class:'gc-actual-damage-note'},Vs=(0,d.defineComponent)({__name:'CharacterList',props:{characters:{},showDamage:{type:Boolean}},setup(e){const n=(0,d.ref)(null),a=e=>{n.value=n.value===e?null:e},t=e=>e>=1e8?`${(e/1e8).toFixed(1)}亿`:e>=1e4?`${(e/1e4).toFixed(1)}万`:e>=1e3?`${(e/1e3).toFixed(1)}千`:Math.round(e).toString();return(c,i)=>((0,d.openBlock)(),(0,d.createElementBlock)('div',Io,[0===e.characters.size?((0,d.openBlock)(),(0,d.createElementBlock)('div',Wo,[...i[0]||(i[0]=[(0,d.createElementVNode)('i',{class:'fa-regular fa-folder-open'},null,-1),(0,d.createElementVNode)('span',null,'暂无角色数据',-1)])])):(0,d.createCommentVNode)('v-if',!0),((0,d.openBlock)(!0),(0,d.createElementBlock)(d.Fragment,null,(0,d.renderList)(e.characters,([c,o])=>((0,d.openBlock)(),(0,d.createBlock)(jo,{key:c,name:c,data:o,'show-damage':e.showDamage,expanded:n.value===c,onToggle:a},{damage:(0,d.withCtx)(({damageData:n})=>[e.showDamage&&n?((0,d.openBlock)(),(0,d.createElementBlock)('div',Yo,[(0,d.createElementVNode)('div',Mo,[i[1]||(i[1]=(0,d.createElementVNode)('i',{class:'fa-solid fa-explosion'},null,-1)),i[2]||(i[2]=(0,d.createTextVNode)(' 破坏力数据 ',-1)),(0,d.createElementVNode)('span',Po,(0,d.toDisplayString)(n.破坏力等级),1)]),(0,d.createElementVNode)('div',Oo,[(0,d.createElementVNode)('div',Uo,[i[3]||(i[3]=(0,d.createElementVNode)('div',{class:'gc-damage-item-label'},'足迹面积',-1)),(0,d.createElementVNode)('div',Ro,(0,d.toDisplayString)(n.足迹.足迹面积_格式化),1)]),(0,d.createElementVNode)('div',Go,[i[4]||(i[4]=(0,d.createElementVNode)('div',{class:'gc-damage-item-label'},'单步伤亡',-1)),(0,d.createElementVNode)('div',qo,(0,d.toDisplayString)(n.单步损害.小人伤亡.格式化),1)]),(0,d.createElementVNode)('div',Lo,[i[5]||(i[5]=(0,d.createElementVNode)('div',{class:'gc-damage-item-label'},'建筑损毁',-1)),(0,d.createElementVNode)('div',Qo,(0,d.toDisplayString)(n.单步损害.建筑损毁.格式化),1)]),n.单步损害.城区损毁.数量>0?((0,d.openBlock)(),(0,d.createElementBlock)('div',Ho,[i[6]||(i[6]=(0,d.createElementVNode)('div',{class:'gc-damage-item-label'},'城区损毁',-1)),(0,d.createElementVNode)('div',Zo,(0,d.toDisplayString)(n.单步损害.城区损毁.格式化),1)])):(0,d.createCommentVNode)('v-if',!0)]),(0,d.createCommentVNode)(' 宏观破坏 '),n.宏观破坏?((0,d.openBlock)(),(0,d.createElementBlock)('div',Xo,[(0,d.createElementVNode)('div',Jo,[i[7]||(i[7]=(0,d.createElementVNode)('i',{class:'fa-solid fa-globe'},null,-1)),(0,d.createTextVNode)(' 宏观破坏力: '+(0,d.toDisplayString)(n.宏观破坏.等级名称),1)]),(0,d.createElementVNode)('div',Ko,[n.宏观破坏.城市?((0,d.openBlock)(),(0,d.createElementBlock)('span',es,(0,d.toDisplayString)(n.宏观破坏.城市.格式化),1)):(0,d.createCommentVNode)('v-if',!0),n.宏观破坏.国家?((0,d.openBlock)(),(0,d.createElementBlock)('span',ns,(0,d.toDisplayString)(n.宏观破坏.国家.格式化),1)):(0,d.createCommentVNode)('v-if',!0),n.宏观破坏.大陆?((0,d.openBlock)(),(0,d.createElementBlock)('span',as,(0,d.toDisplayString)(n.宏观破坏.大陆.格式化),1)):(0,d.createCommentVNode)('v-if',!0),n.宏观破坏.行星?((0,d.openBlock)(),(0,d.createElementBlock)('span',ts,(0,d.toDisplayString)(n.宏观破坏.行星.格式化),1)):(0,d.createCommentVNode)('v-if',!0),n.宏观破坏.恒星?((0,d.openBlock)(),(0,d.createElementBlock)('span',cs,(0,d.toDisplayString)(n.宏观破坏.恒星.格式化),1)):(0,d.createCommentVNode)('v-if',!0),n.宏观破坏.星系?((0,d.openBlock)(),(0,d.createElementBlock)('span',is,(0,d.toDisplayString)(n.宏观破坏.星系.格式化),1)):(0,d.createCommentVNode)('v-if',!0)])])):(0,d.createCommentVNode)('v-if',!0),(0,d.createCommentVNode)(' 特殊效应 '),n.特殊效应.length>0?((0,d.openBlock)(),(0,d.createElementBlock)('div',os,[i[8]||(i[8]=(0,d.createElementVNode)('div',{class:'gc-special-effects-title'},[(0,d.createElementVNode)('i',{class:'fa-solid fa-bolt'}),(0,d.createTextVNode)(' 物理效应 ')],-1)),(0,d.createElementVNode)('div',ss,[((0,d.openBlock)(!0),(0,d.createElementBlock)(d.Fragment,null,(0,d.renderList)(n.特殊效应.slice(0,4),(e,n)=>((0,d.openBlock)(),(0,d.createElementBlock)('span',{key:n,class:'gc-effect-tag'},(0,d.toDisplayString)(e),1))),128)),n.特殊效应.length>4?((0,d.openBlock)(),(0,d.createElementBlock)('span',rs,' +'+(0,d.toDisplayString)(n.特殊效应.length-4)+'更多 ',1)):(0,d.createCommentVNode)('v-if',!0)])])):(0,d.createCommentVNode)('v-if',!0)])):(0,d.createCommentVNode)('v-if',!0)]),'actual-damage':(0,d.withCtx)(({actualDamage:e})=>[e?((0,d.openBlock)(),(0,d.createElementBlock)('div',ls,[i[15]||(i[15]=(0,d.createElementVNode)('div',{class:'gc-detail-section-title'},[(0,d.createElementVNode)('i',{class:'fa-solid fa-skull'}),(0,d.createTextVNode)(' 实际损害记录 '),(0,d.createElementVNode)('span',{class:'gc-actual-damage-badge'},'剧情累计')],-1)),(0,d.createElementVNode)('div',ds,[e.总伤亡人数?((0,d.openBlock)(),(0,d.createElementBlock)('div',gs,[i[9]||(i[9]=(0,d.createElementVNode)('div',{class:'gc-actual-damage-item-label'},'累计伤亡',-1)),(0,d.createElementVNode)('div',As,(0,d.toDisplayString)(t(e.总伤亡人数))+'人',1)])):(0,d.createCommentVNode)('v-if',!0),e.总建筑损毁?((0,d.openBlock)(),(0,d.createElementBlock)('div',ps,[i[10]||(i[10]=(0,d.createElementVNode)('div',{class:'gc-actual-damage-item-label'},'建筑损毁',-1)),(0,d.createElementVNode)('div',ms,(0,d.toDisplayString)(e.总建筑损毁)+'栋',1)])):(0,d.createCommentVNode)('v-if',!0),e.总城市毁灭?((0,d.openBlock)(),(0,d.createElementBlock)('div',Cs,[i[11]||(i[11]=(0,d.createElementVNode)('div',{class:'gc-actual-damage-item-label'},'城市毁灭',-1)),(0,d.createElementVNode)('div',us,(0,d.toDisplayString)(e.总城市毁灭)+'座',1)])):(0,d.createCommentVNode)('v-if',!0)]),(0,d.createCommentVNode)(' 最近行动 '),e.最近行动?((0,d.openBlock)(),(0,d.createElementBlock)('div',vs,[i[12]||(i[12]=(0,d.createElementVNode)('div',{class:'gc-last-action-title'},[(0,d.createElementVNode)('i',{class:'fa-solid fa-shoe-prints'}),(0,d.createTextVNode)(' 最近行动 ')],-1)),(0,d.createElementVNode)('div',bs,[(0,d.createElementVNode)('span',fs,(0,d.toDisplayString)(e.最近行动.描述),1),e.最近行动.伤亡人数?((0,d.openBlock)(),(0,d.createElementBlock)('span',hs,' 伤亡: '+(0,d.toDisplayString)(t(e.最近行动.伤亡人数))+'人 ',1)):(0,d.createCommentVNode)('v-if',!0)])])):(0,d.createCommentVNode)('v-if',!0),(0,d.createCommentVNode)(' 重大事件 '),e.重大事件?.length?((0,d.openBlock)(),(0,d.createElementBlock)('div',xs,[(0,d.createElementVNode)('div',Bs,[i[13]||(i[13]=(0,d.createElementVNode)('i',{class:'fa-solid fa-star'},null,-1)),(0,d.createTextVNode)(' 重大事件 ('+(0,d.toDisplayString)(e.重大事件.length)+') ',1)]),(0,d.createElementVNode)('div',Es,[((0,d.openBlock)(!0),(0,d.createElementBlock)(d.Fragment,null,(0,d.renderList)(e.重大事件.slice(-3),(e,n)=>((0,d.openBlock)(),(0,d.createElementBlock)('div',{key:n,class:'gc-major-event-item'},[(0,d.createElementVNode)('span',ks,(0,d.toDisplayString)(e.描述),1),e.伤亡人数?((0,d.openBlock)(),(0,d.createElementBlock)('span',ys,(0,d.toDisplayString)(t(e.伤亡人数))+'人',1)):(0,d.createCommentVNode)('v-if',!0)]))),128))])])):(0,d.createCommentVNode)('v-if',!0),(0,d.createCommentVNode)(' 备注 '),e.备注?((0,d.openBlock)(),(0,d.createElementBlock)('div',ws,[i[14]||(i[14]=(0,d.createElementVNode)('i',{class:'fa-solid fa-comment'},null,-1)),(0,d.createTextVNode)(' '+(0,d.toDisplayString)(e.备注),1)])):(0,d.createCommentVNode)('v-if',!0)])):(0,d.createCommentVNode)('v-if',!0)]),_:1},8,['name','data','show-damage','expanded']))),128))]))}});s(928);const Ns=(0,Ne.A)(Vs,[['__scopeId','data-v-142edb12']]),Ds={class:'gc-header-actions'},Fs={key:0,class:'gc-status-badge disabled'},Ss={class:'gc-control-bar'},zs={class:'gc-master-icon'},$s={class:'gc-action-bar'},_s={class:'gc-section'},Ts={class:'gc-section-header'},js={class:'gc-badge-count'},Is=(0,d.defineComponent)({__name:'Panel',setup(e){const n=m(),{settings:t,debugLogs:c}=a(n),{toggle:i,clearDebugLogs:o}=n,s=ye(),{characters:g}=a(s),{refresh:p,recalculateDamage:C,getDamageSummary:u}=s,v=J(),{templates:b}=a(v),{toggleTemplate:f,updateTemplate:h,addTemplate:x,removeTemplate:B,moveTemplate:E,resetToDefaults:k}=v,y=ae(),{worldviews:w,currentWorldviewId:V}=a(y),{setCurrentWorldview:N,addWorldview:D,updateWorldview:F,removeWorldview:S,resetToDefaults:T}=y,j=(0,d.computed)(()=>y.currentWorldview),I=(0,d.ref)(!1),W=(0,d.ref)(!1),Y=(0,d.ref)(!1),M=(0,d.ref)(!1),P=(0,d.ref)(!1),O=(0,d.ref)(!1),U=(0,d.computed)(()=>W.value||Y.value||M.value||P.value||O.value),R=e=>{e.target.closest('.gc-header-actions')||(I.value=!I.value)},G=(e,n)=>{t.value[e]=n},q=(0,d.computed)(()=>u()),L=(0,d.computed)(()=>A.map(e=>({id:e,name:e,density:Q(e)})));function Q(e){return{荒野:1,乡村:50,郊区:500,小城市:2e3,中等城市:5e3,大城市:1e4,超大城市中心:25e3,东京市中心:15e3,香港:26e3,马尼拉:43e3}[e]||5e3}const H=e=>{t.value.enableDamageCalculation=e,e?(C(),toastr.success('损害计算已启用')):toastr.info('损害计算已禁用')},Z=e=>{h(e.id,e),toastr.success(`模板 \"${e.name}\" 已保存`)},X=e=>{x(e),toastr.success(`模板 \"${e.name}\" 已创建`)},K=(e,n)=>{confirm(`确定要删除模板 \"${n}\" 吗？`)&&(B(e),toastr.success(`模板 \"${n}\" 已删除`))},ee=(e,n)=>{e&&n&&confirm(`确定要删除世界观 \"${n}\" 吗？`)&&(S(e),toastr.success(`世界观 \"${n}\" 已删除`))},ne=(0,d.ref)(pe()),te=(0,d.ref)('测试角色'),ce=(0,d.ref)(100),ie=(0,d.ref)(1.65),oe=()=>{ne.value=pe(),n.debugLog('🔄 已刷新 MVU 状态')},se=(0,d.computed)(()=>Array.from(g.value.values())),re=()=>{if(!te.value)return void toastr.warning('请输入角色名');const e=me(te.value,ce.value,ie.value);e.success?(toastr.success(`已注入测试数据: ${te.value}`),setTimeout(()=>{oe(),p()},500)):toastr.error(`注入失败: ${e.error}`)},le=e=>{const n=me(e.name,e.height,e.original);n.success?(toastr.success(`已注入测试数据: ${e.name}`),setTimeout(()=>{oe(),p()},500)):toastr.error(`注入失败: ${n.error}`)},de=e=>{const n=Ce(e);n.success?(toastr.success(e?`已清除角色: ${e}`:'已清除所有测试数据'),setTimeout(()=>{oe(),p()},300)):toastr.error(`清除失败: ${n.error}`)},ge=e=>{try{const n=t.value.variablePrefix,a=getVariables({type:'message',message_id:'latest'});_.set(a,`stat_data.${n}.${e.name}._实际损害`,e.data),insertOrAssignVariables(a,{type:'message',message_id:'latest'}),toastr.success(`已保存 ${e.name} 的实际损害数据`),setTimeout(()=>{oe(),p()},300)}catch(e){toastr.error(`保存失败: ${e}`)}},Ae=e=>{try{const n=t.value.variablePrefix;deleteVariable(`stat_data.${n}.${e}._实际损害`,{type:'message',message_id:'latest'}),toastr.success(`已清除 ${e} 的实际损害数据`),setTimeout(()=>{oe(),p()},300)}catch(e){toastr.error(`清除失败: ${e}`)}};return(0,d.watch)(M,e=>{e&&oe()}),(e,n)=>((0,d.openBlock)(),(0,d.createElementBlock)('div',{class:(0,d.normalizeClass)(['gc-panel',{collapsed:I.value}])},[(0,d.createCommentVNode)(' 面板头部 '),(0,d.createElementVNode)('div',{class:'gc-header',onClick:R},[n[15]||(n[15]=(0,d.createElementVNode)('div',{class:'gc-header-title'},[(0,d.createElementVNode)('div',{class:'gc-logo-wrapper'},[(0,d.createElementVNode)('i',{class:'fa-solid fa-person-rays gc-logo-icon'})]),(0,d.createElementVNode)('span',null,'巨大娘计算器')],-1)),(0,d.createElementVNode)('div',Ds,[(0,d.unref)(t).enabled||I.value?(0,d.createCommentVNode)('v-if',!0):((0,d.openBlock)(),(0,d.createElementBlock)('span',Fs,'已禁用')),(0,d.createElementVNode)('i',{class:(0,d.normalizeClass)(['fa-solid gc-toggle-icon',I.value?'fa-chevron-right':'fa-chevron-down'])},null,2)])]),(0,d.createCommentVNode)(' 面板内容 '),(0,d.withDirectives)((0,d.createElementVNode)('div',{class:(0,d.normalizeClass)(['gc-content',{'has-overlay':U.value}])},[(0,d.createCommentVNode)(' 总开关 '),(0,d.createElementVNode)('div',Ss,[(0,d.createElementVNode)('button',{class:(0,d.normalizeClass)(['gc-btn gc-master-btn',(0,d.unref)(t).enabled?'active':'']),onClick:n[0]||(n[0]=(...e)=>(0,d.unref)(i)&&(0,d.unref)(i)(...e))},[(0,d.createElementVNode)('div',zs,[(0,d.createElementVNode)('i',{class:(0,d.normalizeClass)(['fa-solid',(0,d.unref)(t).enabled?'fa-bolt':'fa-power-off'])},null,2)]),(0,d.createElementVNode)('span',null,(0,d.toDisplayString)((0,d.unref)(t).enabled?'脚本已启用':'脚本已禁用'),1),n[16]||(n[16]=(0,d.createElementVNode)('div',{class:'gc-master-status-dot'},null,-1))],2)]),(0,d.createCommentVNode)(' 功能按钮栏 '),(0,d.createElementVNode)('div',$s,[(0,d.createElementVNode)('button',{class:'gc-icon-btn',onClick:n[1]||(n[1]=(...e)=>(0,d.unref)(p)&&(0,d.unref)(p)(...e)),title:'刷新数据'},[...n[17]||(n[17]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-rotate'},null,-1)])]),n[22]||(n[22]=(0,d.createElementVNode)('div',{class:'gc-divider'},null,-1)),(0,d.unref)(t).debug?((0,d.openBlock)(),(0,d.createElementBlock)('button',{key:0,class:(0,d.normalizeClass)(['gc-icon-btn debug',{active:M.value}]),onClick:n[2]||(n[2]=e=>M.value=!M.value),title:'调试面板'},[...n[18]||(n[18]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-bug'},null,-1)])],2)):(0,d.createCommentVNode)('v-if',!0),(0,d.createElementVNode)('button',{class:(0,d.normalizeClass)(['gc-icon-btn prompt',{active:P.value}]),onClick:n[3]||(n[3]=e=>P.value=!P.value),title:'提示词管理'},[...n[19]||(n[19]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-file-lines'},null,-1)])],2),(0,d.createElementVNode)('button',{class:(0,d.normalizeClass)(['gc-icon-btn worldview',{active:O.value}]),onClick:n[4]||(n[4]=e=>O.value=!O.value),title:'世界观设定'},[(0,d.createElementVNode)('i',{class:(0,d.normalizeClass)(j.value?.icon||'fa-solid fa-globe')},null,2)],2),n[23]||(n[23]=(0,d.createElementVNode)('div',{class:'gc-divider'},null,-1)),(0,d.createElementVNode)('button',{class:(0,d.normalizeClass)(['gc-icon-btn',{active:W.value}]),onClick:n[5]||(n[5]=e=>W.value=!W.value),title:'设置'},[...n[20]||(n[20]=[(0,d.createElementVNode)('i',{class:'fa-solid fa-gear'},null,-1)])],2),(0,d.createElementVNode)('button',{class:(0,d.normalizeClass)(['gc-icon-btn',{active:Y.value}]),onClick:n[6]||(n[6]=e=>Y.value=!Y.value),title:'帮助'},[...n[21]||(n[21]=[(0,d.createElementVNode)('i',{class:'fa-regular fa-circle-question'},null,-1)])],2)]),(0,d.createCommentVNode)(' 设置面板 '),(0,d.createVNode)((0,d.unref)(xn),{visible:W.value,settings:(0,d.unref)(t),onClose:n[7]||(n[7]=e=>W.value=!1),'onUpdate:setting':G},null,8,['visible','settings']),(0,d.createCommentVNode)(' 帮助面板 '),(0,d.createVNode)((0,d.unref)(wn),{visible:Y.value,version:(0,d.unref)(r),changelog:(0,d.unref)(l),onClose:n[8]||(n[8]=e=>Y.value=!1)},null,8,['visible','version','changelog']),(0,d.createCommentVNode)(' 世界观面板 '),(0,d.createVNode)((0,d.unref)(da),{visible:O.value,worldviews:(0,d.unref)(w),'current-worldview':j.value,'current-worldview-id':(0,d.unref)(V),settings:(0,d.unref)(t),onClose:n[9]||(n[9]=e=>O.value=!1),onSelect:(0,d.unref)(N),onReset:(0,d.unref)(T),'onUpdate:setting':G,onCreate:(0,d.unref)(D),onUpdate:(0,d.unref)(F),onDelete:ee},null,8,['visible','worldviews','current-worldview','current-worldview-id','settings','onSelect','onReset','onCreate','onUpdate']),(0,d.createCommentVNode)(' 提示词面板 '),(0,d.createVNode)((0,d.unref)(Oa),{visible:P.value,templates:(0,d.unref)(b),onClose:n[10]||(n[10]=e=>P.value=!1),onToggle:(0,d.unref)(f),onMove:(0,d.unref)(E),onDelete:K,onCreate:X,onSave:Z,onReset:(0,d.unref)(k)},null,8,['visible','templates','onToggle','onMove','onReset']),(0,d.createCommentVNode)(' 调试面板 '),(0,d.unref)(t).debug?((0,d.openBlock)(),(0,d.createBlock)((0,d.unref)(oi),{key:0,visible:M.value,'mvu-info':ne.value,logs:(0,d.unref)(c),settings:(0,d.unref)(t),characters:se.value,'test-name':te.value,'test-height':ce.value,'test-original':ie.value,onClose:n[11]||(n[11]=e=>M.value=!1),onRefresh:oe,onClearLogs:(0,d.unref)(o),'onUpdate:testName':n[12]||(n[12]=e=>te.value=e),'onUpdate:testHeight':n[13]||(n[13]=e=>ce.value=e),'onUpdate:testOriginal':n[14]||(n[14]=e=>ie.value=e),onInjectTest:re,onClearTest:de,onQuickTest:le,onSaveDamage:ge,onClearDamage:Ae},null,8,['visible','mvu-info','logs','settings','characters','test-name','test-height','test-original','onClearLogs'])):(0,d.createCommentVNode)('v-if',!0),(0,d.createCommentVNode)(' 主要内容区 '),(0,d.createElementVNode)('div',{class:(0,d.normalizeClass)(['gc-main-area',{disabled:!(0,d.unref)(t).enabled}])},[(0,d.createCommentVNode)(' 快速计算器 '),(0,d.createVNode)(Zi),(0,d.createCommentVNode)(' 角色列表 '),(0,d.createElementVNode)('div',_s,[(0,d.createElementVNode)('div',Ts,[n[24]||(n[24]=(0,d.createElementVNode)('span',null,[(0,d.createElementVNode)('i',{class:'fa-solid fa-users'}),(0,d.createTextVNode)(' 角色列表')],-1)),(0,d.createElementVNode)('span',js,(0,d.toDisplayString)((0,d.unref)(g).size),1)]),(0,d.createVNode)(Ns,{characters:(0,d.unref)(g),'show-damage':(0,d.unref)(t).enableDamageCalculation},null,8,['characters','show-damage'])]),(0,d.createCommentVNode)(' 扩展计算系统 '),(0,d.createVNode)((0,d.unref)($i),{settings:(0,d.unref)(t),'damage-summary':q.value,'damage-scenarios':L.value,onToggleDamage:H,'onUpdate:setting':G},null,8,['settings','damage-summary','damage-scenarios'])],2)],2),[[d.vShow,!I.value]])],2))}});s(374);const Ws=(0,Ne.A)(Is,[['__scopeId','data-v-2fd76fdc']]);$(()=>{const n=e(),a=(0,d.createApp)(Ws).use(n),t=$('<div>').attr('script_id',getScriptId()).appendTo('#extensions_settings2');a.mount(t[0]),le(),function(){const e=m();if(e.debugLog('🚀 开始初始化 MVU 集成...'),'undefined'!=typeof Mvu){e.debugLog('✅ MVU 全局对象已找到:',{version:Mvu.version||'未知',events:Object.keys(Mvu.events||{})});try{eventOn(Mvu.events.VARIABLE_UPDATE_ENDED,de),e.debugLog('✅ 已监听 MVU 变量更新事件 (VARIABLE_UPDATE_ENDED)')}catch(n){e.debugError('❌ 监听 MVU 事件失败:',n)}}else e.debugWarn('⚠️ MVU 全局对象未找到')}(),function(){const e=m(),n={calculate:N,calculateTiny:D,checkInteraction:(e,n)=>S(e,n,E),formatLength:E,formatWeight:k,formatVolume:y,determineLevel:V,BASE_BODY_PARTS:u,REFERENCE_OBJECTS:v,SIZE_LEVELS:f,INTERACTION_RULES:F,VERSION:r,get CONFIG(){return e.settings},debug:{getMvuInfo:pe,injectTestData:me,clearTestData:Ce,get logs(){return e.debugLogs},clearLogs:()=>e.clearDebugLogs()},updater:{checkForUpdates:Be,getReleasePageUrl:be}};window.GiantessCalc=n}(),setTimeout(async()=>{try{const e=localStorage.getItem(Ee),n=e?JSON.parse(e):{};if(!1===n.autoCheck)return void console.log('[GTS-Updater] 自动检查已禁用');const a=Date.now();if(a-(n.lastCheckTime||0)<(n.checkInterval||864e5))return void console.log('[GTS-Updater] 距离上次检查不足 24 小时，跳过');console.log('[GTS-Updater] 开始检查更新...');const t=await Be();t.hasUpdate?(console.log(`[GTS-Updater] 发现新版本 v${t.latestVersion}（当前 v${t.currentVersion}）`),'undefined'!=typeof toastr&&toastr.info(`发现新版本 v${t.latestVersion}，请在设置中查看详情`,'巨大娘计算器',{timeOut:5e3})):console.log('[GTS-Updater] 当前已是最新版本'),n.lastCheckTime=a,localStorage.setItem(Ee,JSON.stringify(n))}catch(e){console.warn('[GTS-Updater] 检查更新失败:',e)}},5e3);const{destroy:c}=function(e='head'){const n=$('<div>').attr('script_id',getScriptId()).append($('head > style',document).clone()).appendTo(e);return{destroy:()=>n.remove()}}();$(window).on('pagehide',()=>{a.unmount(),t.remove(),c()})});\n//# sourceMappingURL=index.js.map",
  "info": "",
  "button": {
    "enabled": true,
    "buttons": [
      {
        "name": "重新处理变量",
        "visible": false
      },
      {
        "name": "重新读取初始变量",
        "visible": false
      },
      {
        "name": "快照楼层",
        "visible": false
      },
      {
        "name": "重演楼层",
        "visible": false
      },
      {
        "name": "重试额外模型解析",
        "visible": false
      },
      {
        "name": "清除旧楼层变量",
        "visible": false
      }
    ]
  },
  "data": {}
}