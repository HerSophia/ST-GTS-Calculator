# 物品计算 - 常量定义

> `src/core/items.ts` 中的常量定义

---

## 📋 概览

| 常量 | 说明 |
|------|------|
| `PRESET_ITEMS` | 预设物品库 |

---

## 📦 PRESET_ITEMS

预设物品库，包含常见物品的尺寸数据。

### 数据结构

```typescript
export const PRESET_ITEMS: Record<string, ItemDefinition> = {
  // 物品ID: 物品定义
};

interface ItemDefinition {
  名称: string;
  原始尺寸: {
    长?: number;    // 米
    宽?: number;    // 米
    高?: number;    // 米
    直径?: number;  // 米
    重量?: number;  // 千克
  };
  类型?: ItemType;
  材质?: ItemMaterial;
  描述?: string;
  随身携带?: boolean;
}
```

### 日用品

| 物品 | 长 | 宽 | 高 | 重量 | 材质 |
|------|-----|-----|-----|------|------|
| 智能手机 | 15cm | 7cm | 0.8cm | 200g | 玻璃 |
| 钥匙 | 6cm | 2.5cm | 0.3cm | 20g | 金属 |
| 钱包 | 11cm | 9cm | 2cm | 100g | 皮革 |
| 水杯 | - | - | 20cm | 300g | 玻璃 |
| 雨伞 | 90cm | - | - | 400g | 金属 |

```typescript
import { PRESET_ITEMS } from '@/core';

const phone = PRESET_ITEMS['智能手机'];
console.log(phone.原始尺寸.长); // 0.15 米
```

### 配饰

| 物品 | 尺寸 | 重量 | 材质 |
|------|------|------|------|
| 戒指 | 直径 1.8cm, 高 0.5cm | 5g | 金属 |
| 项链 | 长 45cm, 宽 0.2cm | 20g | 金属 |
| 耳环 | 长 3cm, 宽 1cm | 3g | 金属 |
| 手表 | 直径 4cm, 高 1cm | 80g | 金属 |

### 服装

| 物品 | 长 | 宽 | 高 | 重量 | 材质 |
|------|-----|-----|-----|------|------|
| 高跟鞋 | 25cm | 8cm | 12cm | 300g | 皮革 |
| 运动鞋 | 28cm | 10cm | 8cm | 350g | 橡胶 |

### 食物

| 物品 | 尺寸 | 重量 | 材质 |
|------|------|------|------|
| 苹果 | 直径 8cm | 200g | 食材 |
| 汉堡 | 直径 12cm, 高 8cm | 250g | 食材 |
| 易拉罐 | 直径 6.6cm, 高 12cm | 350g | 金属 |

### 交通工具

| 物品 | 长 | 宽 | 高 | 重量 | 材质 |
|------|------|------|------|------|------|
| 自行车 | 1.8m | 0.6m | 1.1m | 12kg | 金属 |
| 轿车 | 4.5m | 1.8m | 1.5m | 1,500kg | 金属 |
| 公交车 | 12m | 2.5m | 3.2m | 12,000kg | 金属 |

### 玩具

| 物品 | 尺寸 | 重量 | 材质 |
|------|------|------|------|
| 玩偶 | 高 30cm, 宽 15cm | 200g | 布料 |
| 积木 | 3cm × 1.5cm × 1cm | 2g | 塑料 |

---

## 🏷️ 物品类型 (ItemType)

物品类型影响互动判定和描述。

```typescript
type ItemType =
  | '日用品'      // 手机、钥匙、钱包等
  | '配饰'        // 戒指、项链、耳环等
  | '服装'        // 衣服、鞋子等
  | '食物'        // 食物、饮料等
  | '家具'        // 桌椅、床等
  | '交通工具'    // 车、船、飞机等
  | '建筑'        // 房屋、大厦等
  | '自然物'      // 树、石头等
  | '玩具'        // 玩具、模型等
  | '武器'        // 武器类
  | '工具'        // 工具类
  | '其他';
```

### 类型说明

| 类型 | 说明 | 特殊互动 |
|------|------|----------|
| 日用品 | 日常使用的物品 | 握持、使用 |
| 配饰 | 装饰性物品 | 穿戴判定 |
| 服装 | 衣物、鞋帽 | 穿戴判定 |
| 食物 | 可食用物品 | 吞咽/咬食判定 |
| 家具 | 室内家具 | - |
| 交通工具 | 载具 | 巨大化后成为玩具 |
| 建筑 | 建筑物 | 巨大化后如积木 |
| 自然物 | 自然界物品 | - |
| 玩具 | 玩具、模型 | - |
| 武器 | 武器类物品 | - |
| 工具 | 工具类物品 | - |
| 其他 | 其他物品 | - |

---

## 🧱 物品材质 (ItemMaterial)

物品材质影响特殊效果计算。

```typescript
type ItemMaterial =
  | '金属'
  | '玻璃'
  | '塑料'
  | '木材'
  | '布料'
  | '皮革'
  | '橡胶'
  | '石材'
  | '混凝土'
  | '食材'
  | '液体'
  | '其他';
```

### 材质特殊效果

| 材质 | 触发条件 | 特殊效果 |
|------|----------|----------|
| 玻璃 | 物品主尺寸 > 10米 | 「玻璃材质在巨大尺寸下可能因自重碎裂」 |
| 金属 | 物品重量 > 1000kg | 「金属物品重量巨大，落地会造成严重冲击」 |
| 液体 | 物品重量 > 100kg | 「液体量巨大，倾倒会形成洪水」 |

### 使用示例

```typescript
import { calculateItem } from '@/core';

const giantPhone = {
  名称: '巨大手机',
  原始尺寸: { 长: 15, 高: 0.8 }, // 15米长的手机
  材质: '玻璃',
};

const calc = calculateItem(giantPhone, 1); // 不缩放
console.log(calc.特殊效果);
// ["玻璃材质在巨大尺寸下可能因自重碎裂"]
```

---

## 📐 物品尺寸 (ItemDimensions)

物品尺寸使用米和千克作为单位。

```typescript
interface ItemDimensions {
  长?: number;    // 米
  宽?: number;    // 米
  高?: number;    // 米
  直径?: number;  // 米（用于圆形物品）
  重量?: number;  // 千克
}
```

### 尺寸使用规则

1. **长宽高**：用于长方体或类似形状的物品
2. **直径**：用于圆形或球形物品
3. **主尺寸**：取 `max(长, 宽, 高, 直径)` 用于互动判定
4. **重量缩放**：重量按体积（三次方）缩放

```typescript
// 重量缩放示例
const phone = {
  原始尺寸: { 重量: 0.2 }, // 200g
  随身携带: true,
};

// 100 倍角色携带的手机
const calc = calculateItem(phone, 100, true);
// 重量 = 0.2 * 100³ = 200,000 kg = 200 吨
```

---

## 💡 使用指南

### 添加自定义物品

在 MVU 变量中添加物品时，只需提供必要字段：

```javascript
// 最简形式
_.set('巨大娘.角色.络络._物品.钻石', {
  名称: '钻石',
  原始尺寸: { 直径: 0.02 },
});

// 完整形式
_.set('巨大娘.角色.络络._物品.跑车', {
  名称: '法拉利跑车',
  原始尺寸: {
    长: 4.5,
    宽: 2.0,
    高: 1.2,
    重量: 1400,
  },
  类型: '交通工具',
  材质: '金属',
  描述: '一辆红色法拉利',
  随身携带: false,
});
```

### 使用预设物品

```javascript
// 引用预设物品的数据
const phone = PRESET_ITEMS['智能手机'];
_.set('巨大娘.角色.络络._物品.手机', {
  ...phone,
  随身携带: true,
});
```

### 查询所有预设物品

```javascript
import { PRESET_ITEMS } from '@/core';

// 列出所有预设物品
console.log(Object.keys(PRESET_ITEMS));
// ['智能手机', '钥匙', '钱包', '水杯', '雨伞', '戒指', '项链', ...]
```
